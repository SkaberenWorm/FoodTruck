var POS=function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=125)}([function(t,e){t.exports=_},function(t,e,i){var n=i(9),o=i(2),r=i(0),s=i(3),a=i(7),c=i(13),u=i(6),l=i(8),h=i(4),d=i(18);t.exports=n.Application.extend({_initChannel:function(){this.channelName=r.result(this,"channelName")||"global",this.channel=r.result(this,"channel")||o.channel(this.channelName)},_initDebug:function(t){t&&l.enable("*"),o.DEBUG=t,console.info("Debugging is "+(t?"on":"off")+", visit http://woopos.com.au/docs/debugging")},_initOptions:function(t){t=t||{},a.Templates=t.templates||{},u.extend(t.i18n),this.options=t.params||{},this._initDebug(this.options.debug),h.emulateHTTP=!0===this.options.emulateHTTP,d.settings=this.options.accounting},start:function(t){var e=this;s.getJSON(t.ajaxurl,{action:t.action||"wc_pos_payload",security:t.nonce},function(t){0===t&&window.location.replace("/wp-login.php?pos=1"),e._initOptions(t),n.Application.prototype.start.call(e,t)})},set:function(t,e){r.set(this,t,e)},namespace:function(t){return(window.adminpage?"wc_pos-":"")+t},debug:l,polyglot:u,Utils:c}),n.TemplateCache.prototype.loadTemplate=function(t){return r.get(a.Templates,t.split("."),s(t).html())},n.TemplateCache.prototype.compileTemplate=function(t){return a.compile(t)}},function(t,e){t.exports=Backbone.Radio},function(t,e){t.exports=jQuery},function(t,e){t.exports=Backbone},function(t,e,i){var n=i(9),o=i(1);t.exports=o.prototype.ItemView=n.ItemView},function(t,e,i){var n=i(41);t.exports=new n},function(t,e){t.exports=Handlebars},function(t,e,i){(function(n){function o(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG),t}(e=t.exports=i(58)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var i=this.useColors;if(t[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+t[0]+(i?"%c ":" ")+"+"+e.humanize(this.diff),!i)return;var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var o=0,r=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&"%c"===t&&(r=++o)}),t.splice(r,0,n)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=o,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(o())}).call(e,i(27))},function(t,e){t.exports=Marionette},function(t,e,i){var n=i(9),o=i(1);t.exports=o.prototype.LayoutView=n.LayoutView.extend({working:function(t){"start"===t?this.$el.addClass("working"):this.$el.removeClass("working")}})},function(t,e,i){var n=i(4),o=i(9),r=i(3),s=i(0),a=i(1),c=i(113),u=i(2).channel("global");t.exports=a.prototype.Route=o.Object.extend({constructor:function(){this.initialize.apply(this,arguments)},_triggerMethod:function(t,e){this.router&&this.router.triggerMethod.apply(this.router,[t+":route"].concat(e)),this.triggerMethod.apply(this,[t].concat(e))},enter:function(t){var e=this;return this.transitioning=!0,this._triggerMethod("before:enter",t),this._triggerMethod("before:fetch",t),s.defer(function(){e.transitioning&&(e.loading=new c({container:e.container}))}),r.when(this.fetch.call(this,t)).then(function(){e._triggerMethod("fetch",t),e._triggerMethod("before:render",t)}).then(function(){return e.transitioning=!1,e.render.apply(e,t)}).then(function(){e._triggerMethod("render",t),e._triggerMethod("enter",t)}).fail(function(){e._triggerMethod("error",t)})},navigate:function(){n.history.navigate.apply(n.history,arguments)},fetch:function(){},render:function(){},setTabLabel:function(t){u.trigger("tab:label",t)}})},function(t,e,i){var n=i(9),o=i(2),r=i(1),s=i(0);t.exports=r.prototype.Service=n.Object.extend({constructor:function(t){t=t||{},this.channelName&&(this.channel=o.channel(s.result(this,"channelName"))),t.app&&(this.app=t.app),n.Object.apply(this,arguments)},start:function(){this.triggerMethod("before:start"),this._isStarted=!0,this.triggerMethod("start")},stop:function(){this.triggerMethod("before:stop"),this._isStarted=!1,this.triggerMethod("stop")},isStarted:function(){return!0===this._isStarted}})},function(t,e,i){var n=i(18),o=i(0),r={round:function(t,e,i){var r,s,a,c;if(o.isFinite(parseInt(e,10))||(e=n.settings.currency.precision),a=(t*=r=Math.pow(10,e))%1==.5*(c=t>0|-(t<0)),s=Math.floor(t),a)switch(i){case"2":case"PHP_ROUND_HALF_DOWN":t=s+(c<0);break;case"3":case"PHP_ROUND_HALF_EVEN":t=s+s%2*c;break;case"4":case"PHP_ROUND_HALF_ODD":t=s+!(s%2);break;default:t=s+(c>0)}return(a?t:Math.round(t))/r},decimalPlaces:function(t){return(+t).toFixed(4).replace(/^-?\d*\.?|0+$/g,"").length},unformat:function(t){return n.unformat(t,n.settings.number.decimal)},formatNumber:function(t,e){return"auto"===e&&(e=r.decimalPlaces(t)),o.isFinite(parseInt(e,10))||(e=n.settings.currency.precision),n.formatNumber(t,e)},formatMoney:function(t,e){return"auto"===e&&(e=r.decimalPlaces(t)),o.isFinite(parseInt(e,10))||(e=n.settings.currency.precision),t=r.round(t,e),n.formatMoney(t)},isPositiveInteger:function(t,e){var i=~~Number(t);return e?String(i)===t&&i>=0:String(i)===t&&i>0},parseErrorResponse:function(t){var e=t.responseJSON;return e.errors?e.errors[0].message:t.responseText},toType:function(t){return{}.toString.call(t).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}};t.exports=r},function(t,e,i){var n=i(4),o=i(1);t.exports=o.prototype.Collection=n.Collection.extend({constructor:function(){n.Collection.apply(this,arguments),this._isNew=!0,this.once("sync",function(){this._isNew=!1})},isNew:function(){return this._isNew},parse:function(t){return t&&t[this.name]?t[this.name]:t},sync:function(){return n.sync.apply(this,arguments)}})},function(t,e,i){var n=i(9),o=i(1);t.exports=o.prototype.Behavior=n.Behavior},function(t,e,i){var n=i(4),o=i(1),r=i(0),s={float:parseFloat,int:parseInt,number:function(t){return t=Number(t),r.isNaN(t)?0:t}};t.exports=o.prototype.Model=n.Model.extend({parse:function(t){var e=t&&t[this.name]?t[this.name]:t;if(e)return r.each(this.schema,function(t,i){r.has(e,i)&&r.isString(t)&&s[t]&&(e[i]=s[t](e[i]))},this),e}})},function(t,e,i){var n=i(5),o=i(4),r=i(1);i(109),i(110),i(111),t.exports=r.prototype.FormView=n.extend({constructor:function(){return n.prototype.constructor.apply(this,arguments)},bindings:{},render:function(){var t=Array.prototype.slice.apply(arguments),e=n.prototype.render.apply(this,t);return o.Validation.bind(this,{model:this.model,valid:function(t,e){t.$('input[name="'+e+'"]').removeClass("form-control-error").parent().removeClass("has-error")},invalid:function(t,e){t.$('input[name="'+e+'"]').addClass("form-control-error").parent().addClass("has-error")}}),this.stickit(),e},remove:function(){return o.Validation.unbind(this),n.prototype.remove.apply(this,arguments)}})},function(t,e){t.exports=accounting},function(t,e,i){var n=i(0),o=i(4),r=["_onModelEvent","_prepareModel","_removeReference","_reset","add","initialize","sync","remove","reset","set","push","pop","unshift","shift","sort","parse","fetch","create","model","off","on","listenTo","listenToOnce","bind","trigger","once","stopListening"],s=["add","remove","reset","sort","destroy","sync","request","error"];t.exports=function(t,e){function i(){e.length=t.length}var a={};return n.each(n.functions(o.Collection.prototype),function(e){n.contains(r,e)||(a[e]=function(){return t[e].apply(t,arguments)})}),n.extend(e,o.Events,a),e.listenTo(t,"all",i),e.listenTo(t,"all",function(i){var o=n.toArray(arguments),r="change"===i||"change:"===i.slice(0,7);"reset"===i&&(e.models=t.models),n.contains(s,i)?(n.contains(["add","remove","destroy"],i)?o[2]=e:n.contains(["reset","sort"],i)&&(o[1]=e),e.trigger.apply(this,o)):r&&e.contains(o[1])&&e.trigger.apply(this,o)}),e.models=t.models,i(),e}},function(t,e,i){"use strict";var n=i(45);t.exports=Function.prototype.bind||n},function(t,e,i){var n=i(4).Radio,o=i(8)("dualCollection"),r=i(34),s=i(1),a=i(0),c=i(3),u=i(35);t.exports=s.prototype.DualCollection=r.extend({keyPath:"local_id",mergeKeyPath:"id",_syncDelayed:!0,queue:[],delay:500,url:function(){return n.request("entities","get",{type:"option",name:"wc_api"})+this.name},state:{pageSize:10},fetch:function(t){return(t=t||{}).remote?this.remoteFetch(t):r.prototype.fetch.call(this,t)},remoteFetch:function(t){var e=this;return this.sync("read",this,t).then(function(t){var i=e.parse(t);return r.prototype.merge.call(e,i)}).then(function(t){var i=a.map(t,function(t){return t.get("id")});e.dequeue(i)})},fullSync:function(){var t=this;if(!this._syncing)return this._syncing=!0,o("fullSync started"),this.trigger("start:fullSync"),this.fetchUpdated().then(function(){return t.auditRecords()}).then(function(){if(t._syncDelayed)return t.syncDelayed()}).done(function(){o("fullSync complete")}).fail(function(t){o("fullSync failed",t)}).always(function(){t._syncing=!1,t.trigger("end:fullSync")});o("sync already in progress")},fetchUpdated:function(){var t=this;if(0===this.length)return this.fetch({remote:!0});var e=a.compact(this.pluck("updated_at")).sort().pop();return this.getRemoteIds(e).then(function(e){return t.enqueue(e),t.processQueue({queue:e,all:!0})})},syncDelayed:function(){var t=this.getDelayedModels(),e=a.map(t,function(t){return t.remoteSync(null,t)});return c.when.apply(this,e)},getDelayedModels:function(){return this.filter(function(t){return t.isDelayed()})},auditRecords:function(){var t=this.pluck("id"),e=this;return this.getRemoteIds().then(function(i){var n=a.chain(i).difference(t).compact().value(),o=a.chain(t).difference(i).compact().value();return e.enqueue(n),e.dequeue(o),e.removeGarbage(o)}).done(function(){o("audit complete")}).fail(function(t){o("audit failed",t)})},getRemoteIds:function(t){var e=n.request("entities","get",{type:"option",name:"ajaxurl"});return o(t?"getting updated ids from server since "+t:"getting all ids from server"),c.getJSON(e,{action:"wc_pos_get_all_ids",type:this.name,updated_at_min:t})},removeGarbage:function(t){var e=this.getModelsByRemoteIds(t);if(0!==e.length)return this.remove(e),this.db.removeBatch(a.pluck(e,"id"))},getModelsByRemoteIds:function(t){return this.filter(function(e){return a(t).contains(e.get("id"))})},enqueue:function(t){if(!a.isArray(t))return this.queue.push(t);this.queue=a.union(this.queue,t)},dequeue:function(t){a.isArray(t)?this.queue=a.difference(this.queue,t):this.queue=a.without(this.queue,t)},hasAllRecords:function(){return 0===this.queue.length},processQueue:function(t){var e=(t=t||{}).queue||a.clone(this.queue);if(0!==e.length&&!this._processingQueue){this._processingQueue=!0,this.trigger("start:processQueue");var i=this,n=new c.Deferred,o=e.splice(0,this.state.pageSize).join(",");return this.fetch({remote:!0,data:{filter:t.filter||{limit:-1,in:o}}}).done(function(){t.all&&0!==e.length?(n.progress(o),a.delay(i.processQueue.bind(i),i.getDelay(),t)):n.resolve()}).fail(n.reject).always(function(){i._processingQueue=!1,i.trigger("end:processQueue")}),n.promise()}},getDelay:function(){return n.request("entities","get",{type:"option",name:"delay"})||this.delay},clear:function(){if(this.db){var t=this;return r.prototype.clear.call(this).then(function(){t.queue=[]})}},formatDate:function(t){if(t)return u(t).toISOString()}})},function(t,e,i){var n=i(23),o=i(1),r=i(0),s=i(8)("dualModel");t.exports=o.prototype.DualModel=n.extend({idAttribute:"local_id",remoteIdAttribute:"id",fields:["title"],validate:function(t){var e={};t[this.idAttribute]&&(e[this.idAttribute]=parseInt(t[this.idAttribute],10)),t[this.remoteIdAttribute]&&(e[this.remoteIdAttribute]=parseInt(t[this.remoteIdAttribute],10)),this.set(e,{silent:!0})},url:function(){var t=this.get(this.remoteIdAttribute),e=r.result(this.collection,"url");return t?e+"/"+t+"/":e},states:{update:"UPDATE_FAILED",create:"CREATE_FAILED",delete:"DELETE_FAILED"},hasRemoteId:function(){return!!this.get(this.remoteIdAttribute)},isDelayed:function(){var t=this.get("status");return t===this.states.update||t===this.states.create||t===this.states.delete},sync:function(t,e,i){i=i||{};var o=r.clone(i);o.remote=void 0;var s="patch"===t?"update":t;return this.setStatus(s),n.prototype.sync.call(this,s,e,o).then(function(){if(i.remote)return e.remoteSync(t,e,i)})},remoteSync:function(t,e,i){return e=e||this,(i=i||{}).remote=!0,t=t||e.getMethod(),n.prototype.sync.call(this,t,e,i).then(function(t){if(t){var i=e.parse(t);return e.merge(i)}})},setStatus:function(t){this.states[t]&&("update"!==t||this.hasRemoteId()||(t="create"),this.set({status:this.states[t]}))},getMethod:function(){var t=this.get("status"),e=r.findKey(this.states,function(e){return e===t});if(e)return e;s("No method given for remote sync")},merge:function(t){if(this.set(t),this.isDelayed()&&this.unset("status"),this.collection&&this.collection.db)return this.collection.merge(this.toJSON())}})},function(t,e,i){var n=i(1),o=i(16),r=i(65);t.exports=n.prototype.DeepModel=o.extend(r)},function(t,e,i){var n=i(15),o=i(1),r=i(0),s=i(3),a=i(38),c=(o=i(1)).prototype.namespace("tooltip"),u=a.createContext({classPrefix:c}),l={position:"top center",openOn:"hover",classes:c+"-theme-arrows",constrainToWindow:!0,constrainToScrollParent:!1,remove:!0},h=n.extend({_initialized:[],initialize:function(t){this.options=r.extend({},l,t),this.ui={tooltip:'*[data-toggle="'+c+'"]'}},events:{"mouseenter @ui.tooltip":"onHover"},onHover:function(t){if(-1===this._initialized.indexOf(t.target)){var e=r.extend({},this.options,{target:t.target,content:s(t.target).attr("title")}),i=new u(e);this._initialized.push(t.target),s(t.target).removeAttr("title"),i.open()}}});t.exports=h,o.prototype.set("Behaviors.Tooltip",h)},function(t,e,i){var n=i(9),o=i(1);t.exports=o.prototype.CollectionView=n.CollectionView.extend({})},function(t,e,i){var n=i(5),o=i(7),r=i(0),s=i(107),a=i(6),c=i(108);t.exports=n.extend({viewOptions:["buttons"],buttons:[{action:"save",className:"btn-primary"}],template:o.compile(s),initialize:function(t){this.mergeOptions(t,this.viewOptions)},templateHelpers:function(){return r.each(this.buttons,function(t){t[t.type||"button"]=!0,t.label=t.label||a.t("buttons."+t.action)}),{buttons:this.buttons}},behaviors:{Buttons:{behaviorClass:c}}})},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new f(t,e)),1!==u.length||l||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){var n=i(20);t.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},function(t,e,i){"use strict";var n=i(47),o=i(49),r="function"==typeof Symbol&&"symbol"==typeof Symbol(),s=Object.prototype.toString,a=Object.defineProperty&&function(){var t={};try{for(var e in Object.defineProperty(t,"x",{enumerable:!1,value:t}),t)return!1;return t.x===t}catch(t){return!1}}(),c=function(t,e,i,n){var o;e in t&&("function"!=typeof(o=n)||"[object Function]"!==s.call(o)||!n())||(a?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:i,writable:!0}):t[e]=i)},u=function(t,e){var i=arguments.length>2?arguments[2]:{},s=n(e);r&&(s=s.concat(Object.getOwnPropertySymbols(e))),o(s,function(n){c(t,n,e[n],i[n])})};u.supportsDescriptors=!!a,t.exports=u},function(t,e,i){"use strict";var n=i(20),o=i(50),r=n.call(Function.call,String.prototype.replace),s=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,a=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/;t.exports=function(){var t=o.ToString(o.CheckObjectCoercible(this));return r(r(t,s,""),a,"")}},function(t,e,i){"use strict";var n=Function.prototype.toString,o=/^\s*class /,r=function(t){try{var e=n.call(t).replace(/\/\/.*\n/g,"").replace(/\/\*[.\s\S]*\*\//g,"").replace(/\n/gm," ").replace(/ {2}/g," ");return o.test(e)}catch(t){return!1}},s=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;t.exports=function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(a)return function(t){try{return!r(t)&&(n.call(t),!0)}catch(t){return!1}}(t);if(r(t))return!1;var e=s.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}},function(t,e,i){"use strict";var n=i(30);t.exports=function(){return String.prototype.trim&&"​"==="​".trim()?String.prototype.trim:n}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(14),o=i(1),r=i(62),s=i(2);t.exports=o.prototype.IndexedDBCollection=n.extend({name:"store",storePrefix:"wc_pos_",dbVersion:4005,keyPath:"local_id",autoIncrement:!0,indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"id",keyPath:"id",unique:!0},{name:"status",keyPath:"status",unique:!1}],constructor:function(){n.apply(this,arguments);var t={storeName:this.name,storePrefix:this.storePrefix,dbVersion:this.dbVersion,keyPath:this.keyPath,autoIncrement:this.autoIncrement,indexes:this.indexes,defaultErrorHandler:function(t){s.trigger("global","error",{status:t.target.error.name,message:t.target.error.message})}};this.db=new r(t,this),this.versionCheck(),this.db.open().fail(function(t){s.trigger("global","error",{status:"indexedDB error",message:t})})},merge:function(t){var e=this;return this.db.merge(t).then(function(){var t=Array.prototype.slice.apply(arguments);return e.add(t,{merge:!0})})},clear:function(){if(this.db){var t=this;return this.db.open().then(function(){return t.reset(),t.db.clear()})}},versionCheck:function(){var t=this.name,e=parseInt(s.request("entities","get",{type:"option",name:"idbVersion"}),10)||0,i=parseInt(s.request("entities","get",{type:"localStorage",name:t+"_idbVersion"}),10)||0;e!==i&&this.clear().then(function(){s.request("entities","set",{type:"localStorage",name:t+"_idbVersion",data:e})})}})},function(t,e){t.exports=moment},function(t,e,i){var n=i(0),o=i(4),r=i(68),s=i(70),a=i(72),c=i(19),u=i(73),l=i(74);function h(t,e){this._superset=t,this._filtered=new r(t,e),this._sorted=new s(this._filtered,e),this._paginated=new a(this._sorted,e),c(this._paginated,this),u.call(this,this._filtered,p),u.call(this,this._sorted,f),u.call(this,this._paginated,g),this.initialize(e)}n.extend(r.prototype,l);var d={superset:function(){return this._superset},getFilteredLength:function(){return this._filtered.length},removeTransforms:function(){return this._filtered.resetFilters(),this._sorted.removeSort(),this._paginated.removePagination(),this},destroy:function(){this.stopListening(),this._filtered.destroy(),this._sorted.destroy(),this._paginated.destroy(),this.length=0,this.trigger("obscura:destroy")}},p=["filtered:add","filtered:remove","filtered:reset"],f=["sorted:add","sorted:remove"],g=["paginated:change:perPage","paginated:change:page","paginated:change:numPages"];n.each(["filterBy","removeFilter","resetFilters","refilter","hasFilter","getFilters","query","getQuery","getTokens","getRemoteFilter"],function(t){d[t]=function(){var e=r.prototype[t].apply(this._filtered,arguments);return e===this._filtered?this:e}}),n.each(["setPerPage","setPage","getPerPage","getNumPages","getPage","hasNextPage","hasPrevPage","nextPage","prevPage","movePage","removePagination","firstPage","lastPage","appendNextPage"],function(t){d[t]=function(){var e=a.prototype[t].apply(this._paginated,arguments);return e===this._paginated?this:e}}),n.each(["setSort","reverseSort","removeSort"],function(t){d[t]=function(){var e=s.prototype[t].apply(this._sorted,arguments);return e===this._sorted?this:e}}),n.each(["add","create","remove","set","reset","sort","parse","sync","fetch","push","pop","shift","unshift"],function(t){d[t]=function(){throw new Error("Backbone.Obscura: Unsupported method: "+t+"called on read-only proxy")}}),n.extend(h.prototype,d,o.Events),(h=o.Collection.extend(h.prototype)).FilteredCollection=r,h.SortedCollection=s,h.PaginatedCollection=a,t.exports=h},function(t,e,i){var n=i(23),o=i(2),r=i(6);t.exports=n.extend({initialize:function(){this.url=o.request("entities","get",{type:"option",name:"ajaxurl"})},sync:function(t,e,i){var r=o.request("entities","get",{type:"option",name:"nonce"}),s="id="+e.get("id"),a="security="+r;return i.url=this.url+"?action=wc_pos_admin_settings&"+s+"&"+a,i.buttons&&this.updateButtonState(i),n.prototype.sync(t,e,i)},parse:function(t){return t||(t=null),t},updateButtonState:function(t){var e=t.success,i=t.error,n=t.buttons;n.trigger("state",["loading",""]),t.success=function(t,i,o){e&&e(t,i,o),n.trigger("state",["success",null])},t.error=function(t,e,o){i&&i(t,e,o);var s=null;t.status&&405===t.status&&(s=r.t("messages.legacy")+'. <a href="#tools">'+r.t("buttons.legacy")+"</a>."),!s&&t.responseJSON&&t.responseJSON.errors&&(s=t.responseJSON.errors[0].message),n.trigger("state",["error",s])}},destroy:function(t){var e=this;return this.sync("delete",this,t).then(function(t){t.id=e.id,e.clear({silent:!0}).set(t)})}})},function(t,e,i){var n,o,r,s;s=function(t){"use strict";var e=Function.prototype.bind,i=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(t,e,i){for(var n=!0;n;){var o=t,r=e,s=i;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=s,n=!0,a=u=void 0}};var r=t.Utils,s=r.extend,a=r.addClass,c=r.removeClass,u=r.hasClass,l=r.Evented;function h(t){var e=t.split(" "),n=i(e,2),o=n[0],r=n[1];if(["left","right"].indexOf(o)>=0){var s=[r,o];o=s[0],r=s[1]}return[o,r].join(" ")}function d(t,e){for(var i=void 0,n=[];-1!==(i=t.indexOf(e));)n.push(t.splice(i,1));return n}var p=["click"];"ontouchstart"in document.documentElement&&p.push("touchstart");var f={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},g="";for(var m in f){if({}.hasOwnProperty.call(f,m))void 0!==document.createElement("p").style[m]&&(g=f[m])}var v={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},y={};var b=function i(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],f=function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return new(e.apply(b,[null].concat(i)))};s(f,{createContext:i,drops:[],defaults:{}});var m={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,tetherOptions:{}}};s(f,m,r),s(f.defaults,m.defaults,r.defaults),void 0===y[f.classPrefix]&&(y[f.classPrefix]=[]),f.updateBodyClasses=function(){for(var t=!1,e=y[f.classPrefix],i=e.length,n=0;n<i;++n)if(e[n].isOpened()){t=!0;break}t?a(document.body,f.classPrefix+"-open"):c(document.body,f.classPrefix+"-open")};var b=function(e){function i(t){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o(Object.getPrototypeOf(i.prototype),"constructor",this).call(this),this.options=s({},f.defaults,t),this.target=this.options.target,void 0===this.target)throw new Error("Drop Error: You must provide a target.");var e="data-"+f.classPrefix,n=this.target.getAttribute(e);n&&null==this.options.content&&(this.options.content=n);for(var r=["position","openOn"],c=0;c<r.length;++c){var u=this.target.getAttribute(e+"-"+r[c]);u&&null==this.options[r[c]]&&(this.options[r[c]]=u)}this.options.classes&&!1!==this.options.addTargetClasses&&a(this.target,this.options.classes),f.drops.push(this),y[f.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(i,l),n(i,[{key:"_on",value:function(t,e,i){this._boundEvents.push({element:t,event:e,handler:i}),t.addEventListener(e,i)}},{key:"bindMethods",value:function(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function(){var t=this;if(this.drop=document.createElement("div"),a(this.drop,f.classPrefix),this.options.classes&&a(this.drop,this.options.classes),this.content=document.createElement("div"),a(this.content,f.classPrefix+"-content"),"function"==typeof this.options.content){var e=function(){var e=t.options.content.call(t,t);if("string"==typeof e)t.content.innerHTML=e;else{if("object"!=typeof e)throw new Error("Drop Error: Content function should return a string or HTMLElement.");t.content.innerHTML="",t.content.appendChild(e)}};e(),this.on("open",e.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function(){var e=this.options.position.split(" ");e[0]=v[e[0]],e=e.join(" ");var i=[];this.options.constrainToScrollParent?i.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):i.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?i.push({to:"window",attachment:"together"}):i.push({to:"window"});var n={element:this.drop,target:this.target,attachment:h(e),targetAttachment:h(this.options.position),classPrefix:f.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:i,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new t(s({},n,this.options.tetherOptions)))}},{key:"setupEvents",value:function(){var t=this;if(this.options.openOn)if("always"!==this.options.openOn){var e=this.options.openOn.split(" ");if(e.indexOf("click")>=0)for(var i=function(e){t.toggle(e),e.preventDefault()},n=function(e){t.isOpened()&&(e.target===t.drop||t.drop.contains(e.target)||e.target===t.target||t.target.contains(e.target)||t.close(e))},o=0;o<p.length;++o){var r=p[o];this._on(this.target,r,i),this._on(document,r,n)}var s=null,a=null,c=function(e){null!==a?clearTimeout(a):s=setTimeout(function(){t.open(e),s=null},("focus"===e.type?t.options.focusDelay:t.options.hoverOpenDelay)||t.options.openDelay)},u=function(e){null!==s?clearTimeout(s):a=setTimeout(function(){t.close(e),a=null},("blur"===e.type?t.options.blurDelay:t.options.hoverCloseDelay)||t.options.closeDelay)};e.indexOf("hover")>=0&&(this._on(this.target,"mouseover",c),this._on(this.drop,"mouseover",c),this._on(this.target,"mouseout",u),this._on(this.drop,"mouseout",u)),e.indexOf("focus")>=0&&(this._on(this.target,"focus",c),this._on(this.drop,"focus",c),this._on(this.target,"blur",u),this._on(this.drop,"blur",u))}else setTimeout(this.open.bind(this))}},{key:"isOpened",value:function(){if(this.drop)return u(this.drop,f.classPrefix+"-open")}},{key:"toggle",value:function(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function(t){var e=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),void 0!==this.tether&&this.tether.enable(),a(this.drop,f.classPrefix+"-open"),a(this.drop,f.classPrefix+"-open-transitionend"),setTimeout(function(){e.drop&&a(e.drop,f.classPrefix+"-after-open")}),void 0!==this.tether&&this.tether.position(),this.trigger("open"),f.updateBodyClasses())}},{key:"_transitionEndHandler",value:function(t){t.target===t.currentTarget&&(u(this.drop,f.classPrefix+"-open")||c(this.drop,f.classPrefix+"-open-transitionend"),this.drop.removeEventListener(g,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(this.isClosing=!0,e=!1!==this.options.beforeClose(t,this)),this.isClosing=!1,e}},{key:"close",value:function(t){this.isOpened()&&this.beforeCloseHandler(t)&&(c(this.drop,f.classPrefix+"-open"),c(this.drop,f.classPrefix+"-after-open"),this.drop.addEventListener(g,this.transitionEndHandler),this.trigger("close"),void 0!==this.tether&&this.tether.disable(),f.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function(){this.isOpened()&&void 0!==this.tether&&this.tether.position()}},{key:"destroy",value:function(){this.remove(),void 0!==this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],i=e.element,n=e.event,o=e.handler;i.removeEventListener(n,o)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,d(y[f.classPrefix],this),d(f.drops,this)}}]),i}();return f}();return document.addEventListener("DOMContentLoaded",function(){b.updateBodyClasses()}),b},o=[i(90)],void 0===(r="function"==typeof(n=s)?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n=i(4),o=i(9),r=i(3),s=i(0),a=i(11),c=i(1);t.exports=c.prototype.Router=o.AppRouter.extend({constructor:function(){this.channel=n.Radio.channel("router"),this.on("all",this._onRouterEvent),this.listenTo(n.history,"route",this._onHistoryRoute),o.AppRouter.apply(this,arguments)},_onRouterEvent:function(t){var e=s.toArray(arguments).slice(1);this.channel.trigger.apply(this.channel,[t,this].concat(e))},_onHistoryRoute:function(t){this===t?this.active=!0:(this.active=!1,this._currentRoute=void 0)},execute:function(t,e){var i=this;this.active||this.triggerMethod.apply(this,["before:enter"].concat(e)),this.triggerMethod.apply(this,["before:route"].concat(e)),r.when(this._execute(t,e)).then(function(){i.active||i.triggerMethod.apply(i,["enter"].concat(e)),i.triggerMethod.apply(i,["route"].concat(e))})},_execute:function(t,e){var i=t.apply(this,e);if(this._currentRoute=i,i instanceof a)return i.router=this,i.enter(e)},triggerMethod:o.triggerMethod})},function(t,e,i){var n=i(15),o=i(1),r=i(3),s=i(2),a=n.extend({ui:{toggle:'*[data-action^="legacy-"]'},events:{"click @ui.toggle":"toggle"},toggle:function(t){t.preventDefault();var e=s.request("entities","get",{type:"option",name:"ajaxurl"}),i=s.request("entities","get",{type:"option",name:"nonce"});r.getJSON(e,{action:"wc_pos_toggle_legacy_server",enable:"enable"===r(t.target).data("action").split("-").pop(),security:i},function(){window.location.reload()})}});t.exports=a,o.prototype.set("Behaviors.EmulateHTTP",a)},function(t,e,i){"use strict";var n=i(42),o=i(44),r=i(28),s=i(46),a=function(t){o(!1,t)},c=String.prototype.replace,u=String.prototype.split,l="||||",h={arabic:function(t){return t<3?t:t%100>=3&&t%100<=10?3:t%100>=11?4:5},chinese:function(){return 0},german:function(t){return 1!==t?1:0},french:function(t){return t>1?1:0},russian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){return 1===t?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0}},d={arabic:["ar"],chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru","lt"],czech:["cs","sk"],polish:["pl"],icelandic:["is"]};function p(t){var e,i=(e={},n(d,function(t,i){n(t,function(t){e[t]=i})}),e);return i[t]||i[u.call(t,/-/,1)[0]]||i.en}var f=/\$/g,g="$$",m=/%\{(.*?)\}/g;function v(t,e,i){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var n,o,a=t,d="number"==typeof e?{smart_count:e}:e;if(null!=d.smart_count&&a){var v=u.call(a,l);a=s(v[(n=i||"en",o=d.smart_count,h[p(n)](o))]||v[0])}return a=c.call(a,m,function(t,e){return r(d,e)&&null!=d[e]?c.call(d[e],f,g):t})}function y(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var i=e.allowMissing?v:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:i,this.warn=e.warn||a}y.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},y.prototype.extend=function(t,e){n(t,function(t,i){var n=e?e+"."+i:i;"object"==typeof t?this.extend(t,n):this.phrases[n]=t},this)},y.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:n(t,function(t,i){var n=e?e+"."+i:i;"object"==typeof t?this.unset(t,n):delete this.phrases[n]},this)},y.prototype.clear=function(){this.phrases={}},y.prototype.replace=function(t){this.clear(),this.extend(t)},y.prototype.t=function(t,e){var i,n,o=null==e?{}:e;if("string"==typeof this.phrases[t])i=this.phrases[t];else if("string"==typeof o._)i=o._;else if(this.onMissingKey){n=(0,this.onMissingKey)(t,o,this.currentLocale)}else this.warn('Missing translation for key: "'+t+'"'),n=t;return"string"==typeof i&&(n=v(i,o,this.currentLocale)),n},y.prototype.has=function(t){return r(this.phrases,t)},y.transformPhrase=v,t.exports=y},function(t,e,i){var n=i(43);t.exports=function(t,e,i){if(!n(e))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this);"[object Array]"===o.call(t)?function(t,e,i){for(var n=0,o=t.length;n<o;n++)r.call(t,n)&&e.call(i,t[n],n,t)}(t,e,i):"string"==typeof t?function(t,e,i){for(var n=0,o=t.length;n<o;n++)e.call(i,t.charAt(n),n,t)}(t,e,i):function(t,e,i){for(var n in t)r.call(t,n)&&e.call(i,t[n],n,t)}(t,e,i)};var o=Object.prototype.toString,r=Object.prototype.hasOwnProperty},function(t,e){t.exports=function(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var i=Object.prototype.toString},function(t,e,i){"use strict";(function(e){var i=function(){};"production"!==e.env.NODE_ENV&&(i=function(t,e,i){var n=arguments.length;i=new Array(n>2?n-2:0);for(var o=2;o<n;o++)i[o-2]=arguments[o];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var r=0,s="Warning: "+e.replace(/%s/g,function(){return i[r++]});"undefined"!=typeof console&&console.error(s);try{throw new Error(s)}catch(t){}}}),t.exports=i}).call(e,i(27))},function(t,e,i){"use strict";var n=Array.prototype.slice,o=Object.prototype.toString;t.exports=function(t){var e=this;if("function"!=typeof e||"[object Function]"!==o.call(e))throw new TypeError("Function.prototype.bind called on incompatible "+e);for(var i,r=n.call(arguments,1),s=Math.max(0,e.length-r.length),a=[],c=0;c<s;c++)a.push("$"+c);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var o=e.apply(this,r.concat(n.call(arguments)));return Object(o)===o?o:this}return e.apply(t,r.concat(n.call(arguments)))}),e.prototype){var u=function(){};u.prototype=e.prototype,i.prototype=new u,u.prototype=null}return i}},function(t,e,i){"use strict";var n=i(20),o=i(29),r=i(30),s=i(32),a=i(57),c=n.call(Function.call,s());o(c,{getPolyfill:s,implementation:r,shim:a}),t.exports=c},function(t,e,i){"use strict";var n=Object.prototype.hasOwnProperty,o=Object.prototype.toString,r=Array.prototype.slice,s=i(48),a=Object.prototype.propertyIsEnumerable,c=!a.call({toString:null},"toString"),u=a.call(function(){},"prototype"),l=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(t){var e=t.constructor;return e&&e.prototype===t},d={$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{h(window[t])}catch(t){return!0}}catch(t){return!0}return!1}(),f=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===o.call(t),r=s(t),a=e&&"[object String]"===o.call(t),d=[];if(!e&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var f=u&&i;if(a&&t.length>0&&!n.call(t,0))for(var g=0;g<t.length;++g)d.push(String(g));if(r&&t.length>0)for(var m=0;m<t.length;++m)d.push(String(m));else for(var v in t)f&&"prototype"===v||!n.call(t,v)||d.push(String(v));if(c)for(var y=function(t){if("undefined"==typeof window||!p)return h(t);try{return h(t)}catch(t){return!1}}(t),b=0;b<l.length;++b)y&&"constructor"===l[b]||!n.call(t,l[b])||d.push(l[b]);return d};f.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var t=Object.keys;Object.keys=function(e){return s(e)?t(r.call(e)):t(e)}}}else Object.keys=f;return Object.keys||f},t.exports=f},function(t,e,i){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e=n.call(t),i="[object Arguments]"===e;return i||(i="[object Array]"!==e&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===n.call(t.callee)),i}},function(t,e){var i=Object.prototype.hasOwnProperty,n=Object.prototype.toString;t.exports=function(t,e,o){if("[object Function]"!==n.call(e))throw new TypeError("iterator must be a function");var r=t.length;if(r===+r)for(var s=0;s<r;s++)e.call(o,t[s],s,t);else for(var a in t)i.call(t,a)&&e.call(o,t[a],a,t)}},function(t,e,i){"use strict";var n=i(51),o=i(52),r=i(53),s=i(54),a=i(31),c=i(55),u=i(28),l={ToPrimitive:c,ToBoolean:function(t){return!!t},ToNumber:function(t){return Number(t)},ToInteger:function(t){var e=this.ToNumber(t);return n(e)?0:0!==e&&o(e)?r(e)*Math.floor(Math.abs(e)):e},ToInt32:function(t){return this.ToNumber(t)>>0},ToUint32:function(t){return this.ToNumber(t)>>>0},ToUint16:function(t){var e=this.ToNumber(t);if(n(e)||0===e||!o(e))return 0;var i=r(e)*Math.floor(Math.abs(e));return s(i,65536)},ToString:function(t){return String(t)},ToObject:function(t){return this.CheckObjectCoercible(t),Object(t)},CheckObjectCoercible:function(t,e){if(null==t)throw new TypeError(e||"Cannot call method on "+t);return t},IsCallable:a,SameValue:function(t,e){return t===e?0!==t||1/t==1/e:n(t)&&n(e)},Type:function(t){return null===t?"Null":void 0===t?"Undefined":"function"==typeof t||"object"==typeof t?"Object":"number"==typeof t?"Number":"boolean"==typeof t?"Boolean":"string"==typeof t?"String":void 0},IsPropertyDescriptor:function(t){if("Object"!==this.Type(t))return!1;var e={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in t)if(u(t,i)&&!e[i])return!1;var n=u(t,"[[Value]]"),o=u(t,"[[Get]]")||u(t,"[[Set]]");if(n&&o)throw new TypeError("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");return!(!u(t,"[[Get]]")&&!u(t,"[[Set]]"))},IsDataDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");return!(!u(t,"[[Value]]")&&!u(t,"[[Writable]]"))},IsGenericDescriptor:function(t){if(void 0===t)return!1;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");return!this.IsAccessorDescriptor(t)&&!this.IsDataDescriptor(t)},FromPropertyDescriptor:function(t){if(void 0===t)return t;if(!this.IsPropertyDescriptor(t))throw new TypeError("Desc must be a Property Descriptor");if(this.IsDataDescriptor(t))return{value:t["[[Value]]"],writable:!!t["[[Writable]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};if(this.IsAccessorDescriptor(t))return{get:t["[[Get]]"],set:t["[[Set]]"],enumerable:!!t["[[Enumerable]]"],configurable:!!t["[[Configurable]]"]};throw new TypeError("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function(t){if("Object"!==this.Type(t))throw new TypeError("ToPropertyDescriptor requires an object");var e={};if(u(t,"enumerable")&&(e["[[Enumerable]]"]=this.ToBoolean(t.enumerable)),u(t,"configurable")&&(e["[[Configurable]]"]=this.ToBoolean(t.configurable)),u(t,"value")&&(e["[[Value]]"]=t.value),u(t,"writable")&&(e["[[Writable]]"]=this.ToBoolean(t.writable)),u(t,"get")){var i=t.get;if(void 0!==i&&!this.IsCallable(i))throw new TypeError("getter must be a function");e["[[Get]]"]=i}if(u(t,"set")){var n=t.set;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("setter must be a function");e["[[Set]]"]=n}if((u(e,"[[Get]]")||u(e,"[[Set]]"))&&(u(e,"[[Value]]")||u(e,"[[Writable]]")))throw new TypeError("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return e}};t.exports=l},function(t,e){t.exports=Number.isNaN||function(t){return t!=t}},function(t,e){var i=Number.isNaN||function(t){return t!=t};t.exports=Number.isFinite||function(t){return"number"==typeof t&&!i(t)&&t!==1/0&&t!==-1/0}},function(t,e){t.exports=function(t){return t>=0?1:-1}},function(t,e){t.exports=function(t,e){var i=t%e;return Math.floor(i>=0?i:i+e)}},function(t,e,i){"use strict";var n=Object.prototype.toString,o=i(56),r=i(31),s=function(t,e){var i=e||("[object Date]"===n.call(t)?String:Number);if(i===String||i===Number){var s,a,c=i===String?["toString","valueOf"]:["valueOf","toString"];for(a=0;a<c.length;++a)if(r(t[c[a]])&&(s=t[c[a]](),o(s)))return s;throw new TypeError("No default value")}throw new TypeError("invalid [[DefaultValue]] hint supplied")};t.exports=function(t,e){return o(t)?t:s(t,e)}},function(t,e){t.exports=function(t){return null===t||"function"!=typeof t&&"object"!=typeof t}},function(t,e,i){"use strict";var n=i(29),o=i(32);t.exports=function(){var t=o();return n(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t}},function(t,e,i){function n(t){var i;function n(){if(n.enabled){var t=n,o=+new Date,r=o-(i||o);t.diff=r,t.prev=i,t.curr=o,i=o;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(i,n){if("%%"===i)return i;c++;var o=e.formatters[n];if("function"==typeof o){var r=s[c];i=o.call(t,r),s.splice(c,1),c--}return i}),e.formatArgs.call(t,s),(n.log||e.log||console.log.bind(console)).apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var i,n=0;for(i in t)n=(n<<5)-n+t.charCodeAt(i),n|=0;return e.colors[Math.abs(n)%e.colors.length]}(t),n.destroy=o,"function"==typeof e.init&&e.init(n),e.instances.push(n),n}function o(){var t=e.instances.indexOf(this);return-1!==t&&(e.instances.splice(t,1),!0)}(e=t.exports=n.debug=n.default=n).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){var i;e.save(t),e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(i=0;i<o;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")));for(i=0;i<e.instances.length;i++){var r=e.instances[i];r.enabled=e.enabled(r.namespace)}},e.enabled=function(t){if("*"===t[t.length-1])return!0;var i,n;for(i=0,n=e.skips.length;i<n;i++)if(e.skips[i].test(t))return!1;for(i=0,n=e.names.length;i<n;i++)if(e.names[i].test(t))return!0;return!1},e.humanize=i(59),e.instances=[],e.names=[],e.skips=[],e.formatters={}},function(t,e){var i=1e3,n=60*i,o=60*n,r=24*o,s=365.25*r;function a(t,e,i){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}t.exports=function(t,e){e=e||{};var c,u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*r;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===u&&!1===isNaN(t))return e.long?a(c=t,r,"day")||a(c,o,"hour")||a(c,n,"minute")||a(c,i,"second")||c+" ms":function(t){if(t>=r)return Math.round(t/r)+"d";if(t>=o)return Math.round(t/o)+"h";if(t>=n)return Math.round(t/n)+"m";if(t>=i)return Math.round(t/i)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,i){(function(e){var n=i(12),o=i(61),r=i(77),s=i(79),a=i(81),c=i(83),u=i(37),l=i(85),h=i(86),d=i(36),p=i(8)("entities"),f=i(1),g=i(0),m=e.localStorage||window.localStorage,v=e.JSON||window.JSON,y=n.extend({channelName:"entities",initialize:function(){this.channel.reply("get",this.get,this),this.channel.reply("set",this.set,this),this.channel.reply("remove",this.remove,this),this.channel.reply("set:filter",this.setFilter,this)},collections:{products:o,orders:r,cart:s,customers:a,coupons:c,gateways:h,settings:l},getMethods:{collection:"getCollection",model:"getModel",filtered:"getFiltered",option:"getOption",settings:"getSettings",localStorage:"getLocalStorage"},setMethods:{localStorage:"setLocalStorage"},get:function(t){t=t||{};var e=this.getMethods[t.type];if(this[e])return this[e](t);p('request needs a type, eg: "collection" or "option"')},set:function(t){t=t||{};var e=this.setMethods[t.type];if(this[e])return this[e](t);p('set needs a type, eg: "localStorage"')},attach:function(t){var e="model"===t.type?"models":"collections",i="_"+t.name;return this[e].hasOwnProperty(t.name)&&(this[i]=new this[e][t.name]([],t)),this[i]},getCollection:function(t){var e="_"+t.name;return t.init?new this.collections[t.name]([],t):this[e]||this.attach(t)},getAllCollections:function(){return g.reduce(this.collections,function(t,e,i){return t[i]=this.getCollection({name:i}),t},{},this)},getModel:function(t){var e="_"+t.name;return t.init?new this.models[t.name]([],t):this[e]||this.attach(t)},getFiltered:function(t){var e="_"+t.name,i="_filtered"+t.name;return this[i]?this[i]:(this[e]||this.attach(t),this[i]=new d(this[e],t),this[i])},getOption:function(t){return this.app.getOption(t.name)},getSettings:function(t){var e=this.app.getOption(t.name);return new u(e)},setFilter:function(t){var e="_filtered"+(t=t||{}).name;this[e]&&this[e].filterBy("search",t.filter)},serialize:function(t){return v.stringify(t)},deserialize:function(t){try{t=v.parse(t)}catch(t){p(t)}return t||void 0},getLocalStorage:function(t){t=t||{};var e=m.getItem("wc_pos_"+t.name),i=this.deserialize(e);return t.key&&i&&i[t.key]?i[t.key]:i},setLocalStorage:function(t){var e=(t=t||{}).data,i=this.getLocalStorage({name:t.name});g.isObject(i)&&g.isObject(e)&&(e=g.extend(i,e)),m.setItem("wc_pos_"+t.name,this.serialize(e))},remove:function(t){if("localStorage"===(t=t||{}).type&&t.name&&t.key){var e=this.getLocalStorage({name:t.name});delete e[t.key],m.setItem("wc_pos_"+t.name,v.stringify(e))}else m.removeItem("wc_pos_"+t.name)},idbCollections:function(){return g.reduce(this.getAllCollections(),function(t,e,i){return e instanceof f.IndexedDBCollection&&(t[i]=e),t},{},this)}});t.exports=y,f.prototype.set("Entities.Service",y)}).call(e,i(33))},function(t,e,i){var n=i(21),o=i(64);t.exports=n.extend({model:o,name:"products"})},function(t,e,i){var n=i(63),o=i(3),r=i(0),s=i(4),a=function(){},c=function(t){throw t};function u(t,e){this.parent=e,this.options=t,t.defaultErrorHandler&&(c=t.defaultErrorHandler)}var l={open:function(){if(this._open)return this._open;var t=new o.Deferred,e=this.options||{};return e.onStoreReady=t.resolve,e.onError=t.reject,this.store=new n(e),this._open=t.promise(),this._open},create:function(t,e){var i=(e=e||{}).success||a,n=e.error||c,o=this._returnAttributes(t),r=this.store.keyPath;return this.put(o).then(function(t){return o[r]=t,i(o),o}).fail(n)},update:function(t,e){var i=(e=e||{}).success||a,n=e.error||c,o=this._returnAttributes(t),r=this;return this.put(o).then(function(t){return r.get(t).done(i).fail(n)}).fail(n)},read:function(t,e){var i=(e=e||{}).success||a,n=e.error||c;return this.get(t.id).done(i).fail(n)},destroy:function(t,e){if(t.isNew())return!1;var i=(e=e||{}).success||a,n=e.error||c;return this.remove(t.id).done(i).fail(n)},put:function(t,e){var i=new o.Deferred;return null!==this.store.keyPath?this.store.put(t,i.resolve,i.reject):this.store.put(t,e,i.resolve,i.reject),i.promise()},get:function(t){var e=new o.Deferred;return this.store.get(t,e.resolve,e.reject),e.promise()},remove:function(t){return r.isObject(t)&&t.hasOwnProperty(this.store.keyPath)&&(t=t[this.store.keyPath]),this._remove(t)},_remove:function(t){var e=new o.Deferred;return this.store.remove(t,e.resolve,e.reject),e.promise()},getAll:function(t){var e=new o.Deferred;return this.store.getAll(function(i){t.success.apply(this,arguments),e.resolve(i)},function(i){t.error.apply(this,arguments),e.reject(i)}),e.promise()},iterate:function(t){t=t||{};var e=new o.Deferred;t.onEnd=e.resolve,t.onError=e.reject;var i=e.notify;return this.store.iterate(i,t),e.promise()},makeKeyRange:function(t){return this.store.makeKeyRange(t)},saveAll:function(){return this.putBatch(this.parent.toJSON())},batch:function(t){var e=new o.Deferred;return this.store.batch(t,e.resolve,e.reject),e.promise()},putBatch:function(t){return r.isArray(t)?this._putBatch(t):this.put(t)},_putBatch:function(t){var e=new o.Deferred;return this.store.putBatch(t,e.resolve,e.reject),e.promise()},removeBatch:function(t){return r.isArray(t)?this._removeBatch(t):this.remove(t)},_removeBatch:function(t){var e=new o.Deferred;return this.store.removeBatch(t,e.resolve,e.reject),e.promise()},clear:function(){var t=new o.Deferred;return this.store.clear(t.resolve,t.reject),t.promise()},query:function(t,e){var i=new o.Deferred;return this.store.query(i.resolve,{index:t,keyRange:e,onError:i.reject}),i.promise()},getByAttribute:function(t){var e=r.chain(t).keys().first().value(),i=this.store.makeKeyRange({only:r.chain(t).values().first().value()});return this.query(e,i)},merge:function(t){if(t=r.isArray(t)?t:[t],!this.parent.mergeKeyPath)return this.putBatch(t);var e=r.map(t,this._merge,this);return o.when.apply(this,e)},_merge:function(t){var e=this.parent.mergeKeyPath,i=this.store.keyPath,n=this,o={};return t[i]?this.update(t):(o[e]=t[e],this.getByAttribute(o).then(function(e){var o=r.first(e);return o?(t[i]=o[i],n.update(t)):n.create(t)}))},_returnAttributes:function(t){return t instanceof s.Model?t.toJSON():t}};r.extend(u.prototype,l),t.exports=u},function(t,e){t.exports=IDBStore},function(t,e,i){var n=i(22),o=i(0),r=i(66),s=i(36);t.exports=n.extend({name:"product",fields:["name"],schema:{price:"number",regular_price:"number",sale_price:"number",stock_quantity:"number"},initialize:function(){this.on({"change:updated_at":this.onUpdate})},onUpdate:function(){"variable"===this.get("type")&&this.getVariations().superset().set(this.get("variations"))},productAttributes:function(){return o.chain(this.get("attributes")).where({variation:!1}).where({visible:!0}).value()},productVariations:function(){return o.where(this.get("attributes"),{variation:!0})},matchMaker:function(t,e,i){var n=o.all(t,function(t){return"prefix"===t.type&&"barcode"===t.prefix&&t.query?this.barcodeMatch(t.query):"prefix"===t.type&&"cat"===t.prefix?(t.prefix="categories",e.prefix(t,this)):void 0},this);return n||i(t,this)},barcodeMatch:function(t){var e=this.get("type"),i=this.get("barcode").toLowerCase(),n=t.toString().toLowerCase();return i===n?("variable"!==e&&this.trigger("match:barcode",this),!0):"variable"!==e?this.partialBarcodeMatch(i,n):this.variableBarcodeMatch(i,n)},partialBarcodeMatch:function(t,e){return-1!==t.indexOf(e)},variableBarcodeMatch:function(t,e){var i;return this.getVariations().superset().each(function(t){var n=t.get("barcode").toLowerCase();n!==e?-1===n.indexOf(e)||(i="partial"):i=t}),i?("partial"!==i&&this.trigger("match:barcode",i,this),!0):this.partialBarcodeMatch(t,e)},getVariationOptions:function(){if(this._variationOptions)return this._variationOptions;var t=this.get("variations"),e=o.pluck(t,"attributes").reduce(function(t,e){return o.each(e,function(e){if(t[e.name])return t[e.name].push(e.option);t[e.name]=[e.option]}),t},{});return this._variationOptions=o.map(e,function(t,e){return{name:e,options:o.uniq(t)}}),this._variationOptions},getVariations:function(){if("variable"!==this.get("type"))return!1;if(!this._variations){var t=new r(this.get("variations"),{parent:this,parentAttrs:this.attributes});this._variations=new s(t)}return this._variations}})},function(t,e,i){var n=i(0);function o(t){var e={},i=c.keyPathSeparator;for(var r in t){var s=t[r];if(!s||s.constructor!==Object&&s.constructor!==Array||n.isEmpty(s))e[r]=s;else{var a=o(s);for(var u in a){var l=a[u];e[r+i+u]=l}}}return e}function r(t,e,i){for(var o=c.keyPathSeparator,r=e?e.split(o):[],s=t,a=0,u=r.length;a<u;a++){if(i&&!n.has(s,r[a]))return!1;if(null==(s=s[r[a]])&&a<u-1&&(s={}),void 0===s)return!!i||s}return!!i||s}function s(t,e,i,o){o=o||{};for(var r=c.keyPathSeparator,s=e?e.split(r):[],a=t,u=0,l=s.length;u<l&&void 0!==a;u++){var h=s[u];if(u===l-1)o.unset?delete a[h]:a[h]=i;else{if(void 0===a[h]||!n.isObject(a[h])){if(o.unset)return void delete a[h];var d=s[u+1];a[h]=/^\d+$/.test(d)?[]:{}}a=a[h]}}}function a(t,e){s(t,e,null,{unset:!0})}var c={constructor:function(t,e){var i=t||{};this.cid=n.uniqueId("c"),this.attributes={},e&&e.collection&&(this.collection=e.collection),e&&e.parse&&(i=this.parse(i,e)||{}),i=n.merge({},n.result(this,"defaults"),i),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(t){return n.merge({},this.attributes)},get:function(t){return r(this.attributes,t)},set:function(t,e,i){var u,l,h,d,p,f,g,m;if(null==t)return this;if("object"==typeof t?(l=t,i=e||{}):(l={})[t]=e,i||(i={}),!this._validate(l,i))return!1;for(u in h=i.unset,p=i.silent,d=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.merge({},this.attributes),this.changed={}),m=this.attributes,g=this._previousAttributes,this.idAttribute in l&&(this.id=l[this.idAttribute]),l=o(l))e=l[u],n.isEqual(r(m,u),e)||d.push(u),n.isEqual(r(g,u),e)?a(this.changed,u):s(this.changed,u,e),h?a(m,u):s(m,u,e);if(!p){d.length&&(this._pending=!0);for(var v=c.keyPathSeparator,y={},b=0,w=d.length;b<w;b++){t=d[b];y.hasOwnProperty(t)&&y[t]||(y[t]=!0,this.trigger("change:"+t,this,r(m,t),i));for(var _=t.split(v),x=_.length-1;x>0;x--){var C=_.slice(0,x).join(v),F=C+v+"*";y.hasOwnProperty(F)&&y[F]||(y[F]=!0,this.trigger("change:"+F,this,r(m,C),i)),y.hasOwnProperty(C)&&y[C]||(y[C]=!0,this.trigger("change:"+C,this,r(m,C),i))}}}if(f)return this;if(!p)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},clear:function(t){var e={},i=o(this.attributes);for(var r in i)e[r]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):void 0!==r(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o(this.changed);var e=this._changing?this._previousAttributes:this.attributes;t=o(t),e=o(e);var i,r=!1;for(var s in t)n.isEqual(e[s],i=t[s])||((r||(r={}))[s]=i);return r},previous:function(t){return null!=t&&this._previousAttributes?r(this._previousAttributes,t):null},previousAttributes:function(){return n.merge({},this._previousAttributes)},keyPathSeparator:"."};t.exports=c},function(t,e,i){var n=i(14),o=i(67),r=i(2),s=i(0);t.exports=n.extend({model:o,url:function(){return r.request("entities","get",{type:"option",name:"wc_api"})+"products"},initialize:function(){this._isNew=!1},compact:function(t){for(var e=-1,i=t?t.length:0,n=-1,o=[];++e<i;){var r=t[e];(0===r||r)&&(o[++n]=r)}return o},range:function(t){var e=this.compact(this.pluck(t)),i=0,n=0;return s.isEmpty(e)||(i=s(e).min(),n=s(e).max()),s.uniq([i,n])}})},function(t,e,i){var n=i(23),o=i(0),r=i(2);t.exports=n.extend({name:"product",defaults:{type:"variation"},schema:{price:"number",regular_price:"number",sale_price:"number",stock_quantity:"number"},url:function(){var t=r.request("entities","get",{type:"option",name:"wc_api"});if(-1!==t.indexOf("wp-json")){var e=this.get("id"),i=this.parent.get("id");if(e&&i)return t+"products/"+i+"/variations/"+e}return t+"products/"+this.id},constructor:function(t,e){e=o.extend({parse:!0},e),n.call(this,t,e)},initialize:function(t,e){e=e||{},this.parent=e.parent,this.set({name:e.parent.get("name")})},save:function(t,e){var i=this;return n.prototype.save.call(this,t,e).then(function(){i.parent.set({variations:i.collection.toJSON()}),i.parent.merge()})},getVariationAttributes:function(){var t=[],e=this.get("attributes");return o.each(this.parent.productVariations(),function(i){var n=o.findWhere(e,{id:i.id});n&&0!==n.id||(n=o.findWhere(e,{name:i.name})),n?t.push(o.merge(n,i)):t.push(i)}),o.sortBy(t,"position")}})},function(t,e,i){var n=i(0),o=i(4),r=i(19),s=i(69);function a(){this._filterResultCache={}}function c(t){for(var e in this._filterResultCache)this._filterResultCache.hasOwnProperty(e)&&delete this._filterResultCache[e][t]}function u(t){this._filterResultCache[t.cid]||(this._filterResultCache[t.cid]={});var e=this._filterResultCache[t.cid];for(var i in this._filters)if(this._filters.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(e[i]=this._filters[i].fn(t)),!e[i]))return!1;return!0}function l(){var t=[];this._superset&&(t=this._superset.filter(n.bind(u,this))),this._collection.reset(t),this.length=this._collection.length}function h(t){if(this._filterResultCache[t.cid]={},u.call(this,t)){if(!this._collection.get(t.cid)){for(var e=null,i=this.superset().indexOf(t)-1;i>=0;i-=1)if(this.contains(this.superset().at(i))){e=this.indexOf(this.superset().at(i))+1;break}e=e||0,this._collection.add(t,{at:e})}}else this._collection.get(t.cid)&&this._collection.remove(t);this.length=this._collection.length}function d(t,e,i){"change:"===t.slice(0,7)&&function(t){this._filterResultCache[t.cid]={},u.call(this,t)||this._collection.get(t.cid)&&this._collection.remove(t)}.call(this,arguments[1])}function p(t){this.contains(t)&&this._collection.remove(t),this.length=this._collection.length}function f(t){this._superset=t,this._collection=new o.Collection(t.toArray()),r(this._collection,this),this.resetFilters(),this.listenTo(this._superset,"reset sort",l),this.listenTo(this._superset,"add change",h),this.listenTo(this._superset,"remove",p),this.listenTo(this._superset,"all",d)}var g={defaultFilterName:"__default",filterBy:function(t,e){return e||(e=t,t=this.defaultFilterName),function(t,e){this._filters[t]&&c.call(this,t),this._filters[t]=e,this.trigger("filtered:add",t)}.call(this,t,s(e)),l.call(this),this},removeFilter:function(t){return t||(t=this.defaultFilterName),function(t){delete this._filters[t],delete this._query,delete this._tokens,c.call(this,t),this.trigger("filtered:remove",t)}.call(this,t),l.call(this),this},resetFilters:function(){return this._filters={},a.call(this),this.trigger("filtered:reset"),l.call(this),this},superset:function(){return this._superset},refilter:function(t){return"object"==typeof t&&t.cid?h.call(this,t):(a.call(this),l.call(this)),this},getFilters:function(){return n.keys(this._filters)},hasFilter:function(t){return n.contains(this.getFilters(),t)},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("filtered:destroy")}};n.extend(f.prototype,g,o.Events),t.exports=f},function(t,e,i){var n=i(0);function o(t,e){return n.isArray(e)||(e=null),{fn:t,keys:e}}t.exports=function(t,e){return n.isFunction(t)?o(t,e):n.isObject(t)?(i=t,r=n.keys(i),s=n.map(r,function(t){var e,o,r,s,a=i[t];return n.isFunction(a)?(e=t,o=a,function(t){return o(t.get(e))}):(r=t,s=a,function(t){return t.get(r)===s})}),o(function(t){for(var e=0;e<s.length;e++)if(!s[e](t))return!1;return!0},r)):void 0;var i,r,s}},function(t,e,i){var n=i(0),o=i(4),r=i(19),s=i(71);function a(t){return this._comparator?s(this._collection.models,t,(e=this._comparator,n.isFunction(e)?e:function(t){return t.get(e)}),this._reverse):this._superset.indexOf(t);var e}function c(t){var e=a.call(this,t);this._collection.add(t,{at:e})}function u(t){this.contains(t)&&this._collection.remove(t)}function l(t){this.contains(t)&&this._collection.indexOf(t)!==a.call(this,t)&&(this._collection.remove(t),c.call(this,t))}function h(){var t;this._comparator?(t=n.isString(this._comparator)||1===this._comparator.length?this._superset.sortBy(this._comparator):this._superset.models.sort(this._comparator),this._collection.reset(this._reverse?t.reverse():t)):this._collection.reset(this._superset.toArray())}function d(t){this._superset=t,this._reverse=!1,this._comparator=null,this._collection=new o.Collection(t.toArray()),r(this._collection,this),this.listenTo(this._superset,"add",c),this.listenTo(this._superset,"remove",u),this.listenTo(this._superset,"change",l),this.listenTo(this._superset,"reset",h)}var p={setSort:function(t,e){return this._reverse="desc"===e,this._comparator=t,h.call(this),t?this.trigger("sorted:add"):this.trigger("sorted:remove"),this},reverseSort:function(){return this._reverse=!this._reverse,h.call(this),this},removeSort:function(){return this.setSort(),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this.length=0,this.trigger("sorted:destroy")}};n.extend(d.prototype,p,o.Events),t.exports=d},function(t,e,i){var n=i(0);t.exports=function(t,e,i,o){var r,s,a,c;i=null===i?n.identity:(s=o,2===(r=i).length?r:(a=r,c=s,function(t,e){var i=a(t),n=a(e);return i===n?0:c?i<n?1:-1:i<n?-1:1}));for(var u=0,l=t.length;u<l;){var h=u+l>>>1;i(t[h],e)<0?u=h+1:l=h}return u}},function(t,e,i){var n=i(0),o=i(4),r=i(19);function s(){if(this._infinite)var t=0,e=this._collection.length;else e=(t=this.getPage()*this.getPerPage())+this.getPerPage();return[t,e]}function a(){var t=s.call(this);return this._collection.reset(this.superset().slice(t[0],t[1]))}function c(){var t=this.superset().length,e=this.getPerPage(),i=t%e==0?t/e:Math.floor(t/e)+1,n=this._totalPages!==i;if(this._totalPages=i,n&&this.trigger("paginated:change:numPages",{numPages:i}),this.getPage()>=i)return this.setPage(i-1),!0}function u(){this._infinite=!1,c.call(this)||a.call(this)}function l(t,e){for(var i=n.max([t.length,e.length]),o=0,r=0;o<i;o+=1,r+=1)if(t[o]!==e[r])if(e[o-1]===t[o])r-=1;else{if(e[o+1]!==t[o])return t[o];r+=1}}function h(t,e,i){if(!c.call(this)){var n,o=s.call(this),r=o[0],a=o[1],u=l(this.superset().slice(r,a),this._collection.toArray());this._infinite&&i.add||(n=l(this._collection.toArray(),this.superset().slice(r,a))),n&&this._collection.remove(n),u&&this._collection.add(u,{at:this.superset().indexOf(u)-r})}}function d(t,e){this._superset=t,this._collection=new o.Collection(t.toArray()),this._page=0,this.setPerPage(e&&e.perPage?e.perPage:null),r(this._collection,this),this.listenTo(this._superset,"add remove",h),this.listenTo(this._superset,"reset sort",u)}var p={removePagination:function(){return this._infinite=!1,this.setPerPage(null),this},setPerPage:function(t){return this._perPage=t,u.call(this),this.setPage(0),this.trigger("paginated:change:perPage",{perPage:t,numPages:this.getNumPages()}),this},setPage:function(t){this._infinite=!1;var e=this.getNumPages()-1;return t=(t=(t=t>0?t:0)<e?t:e)<0?0:t,this._page=t,a.call(this),this.trigger("paginated:change:page",{page:t}),this},getPerPage:function(){return this._perPage||this.superset().length||1},getNumPages:function(){return this._infinite?function(){var t=this.getPerPage(),e=this.superset().length-this._collection.length;return(e%t==0?e/t:Math.floor(e/t)+1)+1}.call(this):this._totalPages},getPage:function(){return this._page},hasNextPage:function(){return this.getPage()<this.getNumPages()-1},hasPrevPage:function(){return this.getPage()>0},nextPage:function(){return this.movePage(1),this},prevPage:function(){return this.movePage(-1),this},firstPage:function(){this.setPage(0)},lastPage:function(){this.setPage(this.getNumPages()-1)},movePage:function(t){return this.setPage(this.getPage()+t),this},superset:function(){return this._superset},destroy:function(){this.stopListening(),this._collection.reset([]),this._superset=this._collection,this._page=0,this._totalPages=0,this.length=0,this._infinite=!1,this.trigger("paginated:destroy")},appendNextPage:function(){return this._infinite=!0,function(){var t=this._collection.length+this.getPerPage();return this._collection.add(this.superset().slice(0,t))}.call(this),this.trigger("paginated:change:page",{page:0}),this}};n.extend(d.prototype,p,o.Events),t.exports=d},function(t,e,i){var n=i(0);t.exports=function(t,e){n.each(e,function(e){this.listenTo(t,e,function(){var t=n.toArray(arguments);t.unshift(e),this.trigger.apply(this,t)})},this)}},function(t,e,i){var n=i(0),o=i(75);t.exports={query:function(t,e){return n.isUndefined(e)&&(e=t,t="search"),this._query=e,""===e?this.removeFilter(t):this.filterBy(t,n.bind(o,this,e))},getQuery:function(){return this._query},getTokens:function(){return this._tokens},getRemoteFilter:function(){if(this._tokens){var t={not_in:this.pluck("id").join(",")};return n.each(this._tokens,function(e){"string"===e.type&&(t.q=e.query),"prefix"===e.type&&(t[e.prefix]=e.query)}),t}}}},function(t,e,i){var n=i(0),o=new(i(76));var r={string:function(t,e){if(t=t||{},!n.isString(t.query))return!1;var i=n.chain(e.fields||["title"]).map(function(t){return e.get(t)}).compact().value();return n.any(i,function(e){return this._partialString(e,t.query.toLowerCase())},this)},prefix:function(t,e){if(t=t||{},!n.isString(t.query))return!1;var i,o=e.get(t.prefix),r=(i=o,{}.toString.call(i).match(/\s([a-z|A-Z]+)/)[1].toLowerCase());return this.hasOwnProperty("_"+r)?this["_"+r](o,t.query.toLowerCase()):void 0},or:function(t,e){return n.any(t.queries,function(t){return this[t.type](t,e)},this)},_string:function(t,e){return t.toLowerCase()===e},_partialString:function(t,e){return-1!==t.toLowerCase().indexOf(e)},_number:function(t,e){return t.toString()===e},_partialNumber:function(t,e){return-1!==t.toString().indexOf(e)},_boolean:function(t,e){return"true"===e?!0===t:"false"===e&&!1===t},_array:function(t,e){return n.any(t,function(t){return n.isString(t)?t.toLowerCase()===e:n.isObject(t)&&t.hasOwnProperty("slug")?t.slug.toLowerCase()===e:void 0})}};function s(t,e){return n.all(t,function(t){return r[t.type](t,e)})}t.exports=function(t,e){var i=n.isArray(t)?t:o.parse(t);return this._tokens=i,e.matchMaker?e.matchMaker(i,r,s):s(i,e)}},function(t,e,i){var n=i(0);function o(t){this.options=t||{}}var r={QUOTES:/['"`]/,SPACES:/[ \t\r\n]/,FLAGS:/[~\+#!\*\/]/,SCREEN:/[\\]/,GROUP_OPEN:/\(/,GROUP_CLOSE:/\)/,OR:/\|/,PREFIX:/:/,RANGE:/-/,OR_OPEN:/\[/,OR_CLOSE:/]/};function s(t){var e,i,n,o=t.part||{};t.hasarg&&(["range","prange"].indexOf(o.type)>=0?o.to=t.buffer:t.buffer&&t.buffer.length&&(o.query=t.buffer),o.type||(o.type=o.prefix?"prefix":"string"),t.parts.push(o),t.or_at_next_arg&&t.or_at_next_arg+1===t.parts.length&&(e=t.parts,i=e.pop(),n=e.pop(),e.push({type:"or",queries:[n,i]}),t.or_at_next_arg=0),t.part={},t.buffer="",t.hasarg=!1)}var a={screen:function(t){t.screen=!0},or_open:function(t){t.hasarg?t.buffer+=t.character:(t.part.type="or",t.part.queries=this.parse(this._input.join(""),!0),t.part.queries&&t.part.queries.length&&(t.hasarg=!0,s.call(this,t)))},or_close:function(t){t.close=!0},group_open:function(t){t.hasarg?t.buffer+=t.character:(t.part.type="and",t.part.queries=this.parse(this._input.join(""),!0),t.part.queries&&t.part.queries.length&&(t.hasarg=!0,s.call(this,t)))},group_close:function(t){t.open?(t.close=!0,t.open=void 0):t.buffer+=t.character},or:function(t){t.or_at_next_arg=t.parts.length,t.hasarg&&(t.or_at_next_arg+=1,s.call(this,t))},prefix:function(t){t.part.prefix=t.buffer,t.part.type="prefix",t.buffer="",t.hasarg=!0},range:function(t){t.part.type&&"prefix"===t.part.type?t.part.type="prange":t.part.type="range",t.part.from=t.buffer,t.buffer="",t.hasarg=!0},spaces:function(t){s.call(this,t)},quotes:function(t){t.buffer.length?(t.buffer+=t.character,t.hasarg=!0):function t(e,i){0!==this._input.length&&(e.character=this._input.shift(),e.character===i?s.call(this,e):(e.buffer+=e.character,e.hasarg=!0,t.call(this,e,i)))}.call(this,t,t.character)},flags:function(t){t.buffer.length?t.buffer+=t.character:(t.part.flags||(t.part.flags=[]),t.part.flags.push(t.character))}};function c(t){t.character=this._input.shift();var e=function(t){var e;return n.any(["SCREEN","OR_OPEN","OR_CLOSE","GROUP_OPEN","GROUP_CLOSE","OR","PREFIX","SPACES","QUOTES","FLAGS"],function(i){return r[i].test(t)?(e=i,!0):(e=void 0,!1)}),e}.call(this,t.character);e&&!t.screen?a[e.toLowerCase()].call(this,t):(t.buffer+=t.character,t.hasarg=!0,t.screen=!1),this._input.length>0&&!t.close?c.call(this,t):t.close=void 0}var u={parse:function(t,e){var i={parts:[],part:{},open:e,buffer:"",hasarg:!1};return t&&t.length&&"string"==typeof t?(this._input=t.split(""),c.call(this,i),s.call(this,i),i.parts):i.parts}};n.extend(o.prototype,u),t.exports=o},function(t,e,i){var n=i(21),o=i(78),r=i(3),s=i(0),a=i(4);t.exports=n.extend({model:o,name:"orders",_syncDelayed:!1,setActiveOrder:function(t){var e=this.get(t);return e||"new"===t||(e=s.first(this.openOrders())),this.active=e,e},getActiveOrder:function(){var t=this,e=new r.Deferred;return this.active?e.resolve(this.active):this.create().then(function(i){i.cart.order_id=i.id,t.active=i,"cart/new"===a.history.getHash()&&a.history.navigate("cart/"+i.id),e.resolve(i)}),e.promise()},addToCart:function(t){this.getActiveOrder().then(function(e){e.cart.addToCart(t)})},create:function(){var t=new r.Deferred;return n.prototype.create.call(this,{local_id:Date.now()},{wait:!0,success:t.resolve,error:t.reject}),t.promise()},openOrders:function(){return this.filter(function(t){return t.isEditable()})}})},function(t,e,i){var n=i(22),o=i(2),r=i(13),s=i(8)("order"),a=i(1),c=i(3),u=n.extend({name:"order",fields:["customer.first_name","customer.last_name","customer.email"],defaults:{note:"",order_discount:0},initialize:function(t){if(!(t=t||{}).customer&&!t.billing){var e=this.getEntities("customers"),i=e.default||e.guest||{};this.set({customer_id:i.id,customer:i})}this.tax=this.getEntities("tax"),this.tax_rates=this.getEntities("tax_rates"),this.isEditable()&&(this.attachCart(),this.attachGateways()),this.on({"change:order_discount":this.calcTotals,"change:status":this.isEditable})},getEntities:function(t){return o.request("entities","get",{type:"option",name:t})||{}},isEditable:function(){return void 0===this.get("status")||this.isDelayed()},destroy:function(t){var e=this;return this.cart.db.removeBatch(this.cart.pluck("local_id")).always(function(){return n.prototype.destroy.call(e,t)})},attachCart:function(){var t=o.request("entities","get",{init:!0,type:"collection",name:"cart"});t.order_id=this.id,this.listenTo(t,{"add change":this.calcTotals,remove:this.itemRemoved}),t.db&&t.db.open().then(function(){t.fetchCartItems()}),this.cart=t},clearCart:function(){this.cart&&this.cart.db.removeBatch(this.cart.pluck("local_id"))},attachGateways:function(){this.gateways=o.request("entities","get",{init:!0,type:"collection",name:"gateways"});var t=o.request("entities","get",{type:"option",name:"gateways"});this.gateways.add(t)},itemRemoved:function(){return this.cart.length>0?this.calcTotals():this.destroy()},calcTotals:function(){var t=0,e=0,i=0,n=0,o=this.cart.sum("subtotal"),a=this.cart.sum("total"),c=o-a,u=this.get("order_discount");"yes"===this.tax.calc_taxes&&(t=this.cart.sum("total_tax"),e=this.cart.sum("subtotal_tax"),i=this.cart.sum("total_tax","shipping"),n=e-t),a+=t,a-=u,this.unset("tax_lines",{silent:!0});var l={total:r.round(a,4),subtotal:r.round(o,4),total_tax:r.round(t,4),subtotal_tax:r.round(e,4),shipping_tax:r.round(i,4),cart_discount:r.round(c,4),cart_discount_tax:r.round(n,4),tax_lines:this.cart.itemizedTax()};this.save(l),s("update totals",l)},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=parseFloat(this.get(t[i]));return e},process:function(){var t=this;return c.when(this.processCart()).then(function(){return t.processGateway()}).then(function(){var e=t.get("id")?"update":"create";return t.remoteSync(e)}).then(function(t){var e=t[0];"failed"===e.get("status")&&e.save({status:"UPDATE_FAILED"})})},processCart:function(){var t={product:[],shipping:[],fee:[]};this.cart.each(function(e){var i=e.get("type");"shipping"!==i&&"fee"!==i&&(i="product"),t[i].push(e.toJSON())}),this.set({line_items:t.product,shipping_lines:t.shipping,fee_lines:t.fee,tax_lines:this.cart.itemizedTax()})},processGateway:function(){var t=this.gateways.findWhere({active:!0}).toJSON();this.set({payment_details:t})}});t.exports=u,a.prototype.set("Entities.Order.Model",u)},function(t,e,i){var n=i(34),o=i(80),r=i(0),s=i(4);t.exports=n.extend({model:o,name:"cart",indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"order",keyPath:"order",unique:!1},{name:"type",keyPath:"type",unique:!1}],productAttributes:["order","name","local_id","product_id","type","price","regular_price","sale_price","taxable","tax_status","tax_class","attributes","meta","method_title","method_id"],comparator:function(t){var e=t.get("type");return"fee"===e?2:"shipping"===e?1:0},fetchCartItems:function(){if(this.order_id){var t=this.add.bind(this),e=this.db.store.makeKeyRange({only:this.order_id});this.db.store.query(t,{index:"order",keyRange:e})}},sum:function(t,e){var i=this.toJSON();return e&&(i=r.where(i,{type:e})),r.pluck(i,t).reduce(function(t,e){return t+e},0)},addToCart:function(t){var e,i=(t=t||{}).model||t;i instanceof s.Model&&(i=i.toJSON()),i.id&&(e=this.findWhere({product_id:i.id}),i.product_id=i.id,delete i.id),e?e.quantity("increase"):e=this._addToCart(i),e.trigger("pulse")},_addToCart:function(t){return t.order=this.order_id,"variation"===t.type&&(t.meta=r.map(t.attributes,function(t,e){return{key:++e,label:t.name,value:t.option}})),this.add(r.pick(t,this.productAttributes))},itemizedTax:function(){var t=r.clone(this.toJSON(),!0),e=r.map(t,function(t){if(t.tax)return r.each(t.tax,function(e){e.shipping="shipping"===t.type?e.total:0}),t.tax}),i=this.sumTaxes(e),n=[];return r.each(i,function(t,e){t.rate_id=e.toString(),n.push(t)}),n},sumTaxes:function(t){return r.reduce(t,function(t,e){return r.merge(t,e,function(t,e){return t&&(e.total+=t.total,e.subtotal+=t.subtotal,e.shipping+=t.shipping),e})},{})}})},function(t,e,i){var n=i(16),o=i(8)("cartItem"),r=i(13),s=i(0),a=i(2);t.exports=n.extend({idAttribute:"local_id",defaults:{subtotal:0,subtotal_tax:0,total_tax:0,total:0,item_tax:0,quantity:1,taxable:!0,tax_class:""},initialize:function(){if(this.tax=a.request("entities","get",{type:"option",name:"tax"})||{},this.tax_rates=a.request("entities","get",{type:"option",name:"tax_rates"})||{},this.on("change:quantity change:item_price change:regular_price change:taxable change:tax_class",this.updateLineTotals),void 0===this.get("item_price")){var t=parseFloat(this.get("price"));this.set({item_price:s.isNaN(t)?0:t})}},updateLineTotals:function(){var t,e,i,n=this.get("quantity"),a=this.get("item_price"),c=this.get("type"),u=parseFloat(this.get("regular_price")),l=this.get("tax_class");this.tax_rates[l]&&(i=s.cloneDeep(this.tax_rates[l])),"shipping"!==c&&"fee"!==c||(u=a),t=this.calcTax({price:a,quantity:n,rates:i}),e=this.calcTax({price:u,quantity:n,rates:i,subtotal:!0}),"yes"===this.tax.prices_include_tax&&(u-=e,a-=t);var h={item_subtotal:r.round(u,4),item_subtotal_tax:r.round(e,4),item_tax:r.round(t,4),subtotal:r.round(u*n,4),subtotal_tax:r.round(e*n,4),total_tax:r.round(t*n,4),total:r.round(a*n,4)};this.save(h),o("update totals",h)},calcTax:function(t){var e=0;return"yes"===this.tax.calc_taxes&&this.get("taxable")&&t.rates?e="yes"===this.tax.prices_include_tax?this.calcInclusiveTax(t):this.calcExclusiveTax(t):this.set("tax",void 0),e},calcInclusiveTax:function(t){var e,i=0,n=0,o=0,a=0,c=t.price,u=t.rates,l=t.quantity;s.each(u,function(t,e){"shipping"!==this.get("type")||"no"!==t.shipping?"yes"===t.compound?n+=parseFloat(t.rate):i+=parseFloat(t.rate):delete u[e]},this);var h=1+i/100,d=1+n/100;return e=c/d,s.each(u,function(i){var n=parseFloat(i.rate)/100,s=0;"yes"===i.compound?(s=c,n/=d):(s=e,n/=h),o=c-(c-n*s),i[t.subtotal?"subtotal":"total"]=r.round(o*l,4),a+=o},this),s.isEmpty(u)||this.set("tax",u),a},calcExclusiveTax:function(t){var e=[],i=0,n=0,o=0,a=t.price,c=t.rates,u=t.quantity;return s.each(c,function(t,i){n=0,"shipping"!==this.get("type")||"no"!==t.shipping?("yes"!==t.compound&&(n=a*(parseFloat(t.rate)/100)),e[i]=n):delete c[i]},this),e.length>0&&(i=e.reduce(function(t,e){return t+e})),s.each(c,function(n,s){if("yes"===n.compound){var c=a+i;e[s]=c*(parseFloat(n.rate)/100)}n[t.subtotal?"subtotal":"total"]=r.round(e[s]*u,4),o+=e[s]},this),s.isEmpty(c)||this.set("tax",c),o},quantity:function(t){var e=this.get("quantity");return this.set("quantity","increase"===t?++e:--e),this},sum:function(t){for(var e=0,i=0;i<t.length;i++)e+=this.get(t[i]);return r.round(e,4)},toJSON:function(t){var e=n.prototype.toJSON.apply(this,t);if(e.meta){var i=[];s.each(e.meta,function(t){i.push({key:t.label,value:t.value})}),e.meta_data=i}return e}})},function(t,e,i){var n=i(21),o=i(82),r=i(2);t.exports=n.extend({model:o,name:"customers",indexes:[{name:"local_id",keyPath:"local_id",unique:!0},{name:"id",keyPath:"id",unique:!0},{name:"status",keyPath:"status",unique:!1},{name:"email",keyPath:"email",unique:!0},{name:"username",keyPath:"username",unique:!0}],initialize:function(){var t=r.request("entities","get",{type:"option",name:"customers"});t&&(this._guest=t.guest,this._default=t.default||t.guest)},getGuestCustomer:function(){return this._guest},getDefaultCustomer:function(){return this._default}})},function(t,e,i){var n=i(22),o=i(1),r=n.extend({name:"customer",fields:["email","username","first_name","last_name"]});t.exports=r,o.prototype.set("Entities.Customers.Model",r)},function(t,e,i){var n=i(14),o=i(84);t.exports=n.extend({model:o})},function(t,e,i){var n=i(16);t.exports=n.extend({})},function(t,e,i){var n=i(14),o=i(37);t.exports=n.extend({model:o})},function(t,e,i){var n=i(14),o=i(87);t.exports=n.extend({model:o,initialize:function(){this._isNew=!1,this.on("change:active",this.onChangeActive)},onChangeActive:function(t,e){e&&this.each(function(e){t.id!==e.id&&e.set({active:!1})})}})},function(t,e,i){var n=i(16);t.exports=n.extend({idAttribute:"method_id",defaults:{active:!1}})},function(t,e,i){"use strict";t.exports=function(t){return"shift"===t||"ctrl"===t||"alt"===t||"meta"===t}},function(t,e,i){var n=i(15),o=i(1),r=i(3),s=i(0),a=i(38),c=(o=i(1)).prototype.namespace("dropdown"),u=a.createContext({classPrefix:c}),l={position:"bottom left",openOn:"click",classes:c+"-theme-basic",remove:!0},h=n.extend({_initialized:[],initialize:function(t){this.options=s.extend({},l,t),s.bindAll(this,"onOpen","onClose","onSelect","onKeydown"),this.ui={target:'*[data-toggle="'+c+'"]'}},events:{"click @ui.target":"onClick"},onBeforeRender:function(){this.close()},onClick:function(t){var e=t.currentTarget;if(-1===this._initialized.indexOf(e)){var i=this.initDrop(e);this._initialized.push(e),i.open()}},initDrop:function(t){var e=this.view.dropdownContent||this.view.$(".dropdown-list")[0],i=s.extend({},this.options,{target:t,content:e});return this.drop=new u(i),this.drop.on("open",this.onOpen),this.drop.on("close",this.onClose),r("li",this.drop.content).on("click",this.onSelect),r(t).on("keydown",this.onKeydown),this.drop},open:function(){this.drop&&this.drop.open()},close:function(){this.drop&&this.drop.close()},onOpen:function(){this.view.triggerMethod("dropdown:open")},onClose:function(){this.view.triggerMethod("dropdown:close")},onSelect:function(t){this.view.triggerMethod("dropdown:select",t),this.close()},onKeydown:function(t){return 27===t.which?this.close():this.drop.isOpened()?this.view.triggerMethod("target:keydown",t):void this.open()}});t.exports=h,o.prototype.set("Behaviors.Dropdown",h)},function(t,e,i){var n,o;void 0===(o="function"==typeof(n=function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=void 0;void 0===r&&(r={modules:[]});var s=null;function a(t){var e=t.getBoundingClientRect(),i={};for(var n in e)i[n]=e[n];if(t.ownerDocument!==document){var o=t.ownerDocument.defaultView.frameElement;if(o){var r=a(o);i.top+=r.top,i.bottom+=r.top,i.left+=r.left,i.right+=r.left}}return i}function c(t){var e=(getComputedStyle(t)||{}).position,i=[];if("fixed"===e)return[t];for(var n=t;(n=n.parentNode)&&n&&1===n.nodeType;){var o=void 0;try{o=getComputedStyle(n)}catch(t){}if(null==o)return i.push(n),i;var r=o,s=r.overflow,a=r.overflowX,c=r.overflowY;/(auto|scroll|overlay)/.test(s+c+a)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(o.position)>=0)&&i.push(n)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}var u,l=(u=0,function(){return++u}),h={},d=function(){var t=s;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",l()),y(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),s=t);var e=t.getAttribute("data-tether-id");return void 0===h[e]&&(h[e]=a(t),S(function(){delete h[e]})),h[e]};function p(){s&&document.body.removeChild(s),s=null}function f(t){var e=void 0;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var i=e.documentElement,n=a(t),o=d();return n.top-=o.top,n.left-=o.left,void 0===n.width&&(n.width=document.body.scrollWidth-n.left-n.right),void 0===n.height&&(n.height=document.body.scrollHeight-n.top-n.bottom),n.top=n.top-i.clientTop,n.left=n.left-i.clientLeft,n.right=e.body.clientWidth-n.width-n.left,n.bottom=e.body.clientHeight-n.height-n.top,n}function g(t){return t.offsetParent||document.documentElement}var m=null;function v(){if(m)return m;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");y(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;i===n&&(n=e.clientWidth),document.body.removeChild(e);var o=i-n;return m={width:o,height:o}}function y(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var i in e)({}).hasOwnProperty.call(e,i)&&(t[i]=e[i])}),t}function b(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var i=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=x(t).replace(i," ");C(t,n)}}function w(t,e){if(void 0!==t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{b(t,e);var i=x(t)+" "+e;C(t,i)}}function _(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=x(t);return new RegExp("(^| )"+e+"( |$)","gi").test(i)}function x(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function C(t,e){t.setAttribute("class",e)}function F(t,e,i){i.forEach(function(i){-1===e.indexOf(i)&&_(t,i)&&b(t,i)}),e.forEach(function(e){_(t,e)||w(t,e)})}var k=[],S=function(t){k.push(t)},O=function(){for(var t=void 0;t=k.pop();)t()},E=function(){function t(){o(this,t)}return n(t,[{key:"on",value:function(t,e,i){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===this.bindings&&(this.bindings={}),void 0===this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:i,once:n})}},{key:"once",value:function(t,e,i){this.on(t,e,i,!0)}},{key:"off",value:function(t,e){if(void 0!==this.bindings&&void 0!==this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var i=0;i<this.bindings[t].length;)this.bindings[t][i].handler===e?this.bindings[t].splice(i,1):++i}},{key:"trigger",value:function(t){if(void 0!==this.bindings&&this.bindings[t]){for(var e=0,i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,c=r.once,u=a;void 0===u&&(u=this),s.apply(u,n),c?this.bindings[t].splice(e,1):++e}}}}]),t}();r.Utils={getActualBoundingClientRect:a,getScrollParents:c,getBounds:f,getOffsetParent:g,extend:y,addClass:w,removeClass:b,hasClass:_,updateClasses:F,defer:S,flush:O,uniqueId:l,Evented:E,getScrollBarSize:v,removeUtilElements:p};var T=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=(n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),function(t,e,i){for(var n=!0;n;){var o=t,r=e,s=i;n=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(s)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=r,i=s,n=!0,a=u=void 0}});function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}if(void 0===r)throw new Error("You must include the utils.js file before tether.js");var c=(Q=r.Utils).getScrollParents,g=(f=Q.getBounds,Q.getOffsetParent),w=(y=Q.extend,Q.addClass),b=Q.removeClass,v=(F=Q.updateClasses,S=Q.defer,O=Q.flush,Q.getScrollBarSize),p=Q.removeUtilElements;function A(t,e){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+i>=e&&e>=t-i}var D,N,R,M,q=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<e.length;++i){var n=e[i];if(void 0!==t.style[n])return n}}(),j=[],I=function(){j.forEach(function(t){t.position(!1)}),O()};function L(){return performance&&performance.now?performance.now():+new Date}D=null,N=null,R=null,M=function t(){if(void 0!==N&&N>16)return N=Math.min(N-16,250),void(R=setTimeout(t,250));void 0!==D&&L()-D<10||(null!=R&&(clearTimeout(R),R=null),D=L(),I(),N=L()-D)},"undefined"!=typeof window&&void 0!==window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,M)});var V={center:"center",left:"right",right:"left"},B={middle:"middle",top:"bottom",bottom:"top"},z={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},H=function(t){var e=t.left,i=t.top;return void 0!==z[t.left]&&(e=z[t.left]),void 0!==z[t.top]&&(i=z[t.top]),{left:e,top:i}};function $(){for(var t={top:0,left:0},e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return i.forEach(function(e){var i=e.top,n=e.left;"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof n&&(n=parseFloat(n,10)),t.top+=i,t.left+=n}),t}function W(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}var U=function(t){var e=t.split(" "),i=T(e,2);return{top:i[0],left:i[1]}},G=U,K=function(t){function e(t){var i=this;o(this,e),P(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.position=this.position.bind(this),j.push(this),this.history=[],this.setOptions(t,!1),r.modules.forEach(function(t){void 0!==t.initialize&&t.initialize.call(i)}),this.position()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,E),n(e,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1];this.options=y({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var n=this.options,o=n.element,r=n.target,s=n.targetModifier;if(this.element=o,this.target=r,this.targetModifier=s,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if(void 0===e[t])throw new Error("Tether Error: Both element and target must be defined");void 0!==e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),w(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&w(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=G(this.options.targetAttachment),this.attachment=G(this.options.attachment),this.offset=U(this.options.offset),this.targetOffset=U(this.options.targetOffset),void 0!==this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=c(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if(void 0===this.targetModifier)return f(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=f(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=void 0,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=f(e);var i=getComputedStyle(e),n=0;(e.scrollWidth>e.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body)&&(n=15);var o=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-n,r={width:15,height:.975*o*(o/e.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},s=0;o<408&&this.target===document.body&&(s=-11e-5*Math.pow(o,2)-.00727*o+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24));var a=this.target.scrollTop/(e.scrollHeight-o);return r.top=a*(o-r.height-s)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return void 0===this._cache&&(this._cache={}),void 0===this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&w(this.target,this.getClass("enabled")),w(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;b(this.target,this.getClass("enabled")),b(this.element,this.getClass("enabled")),this.enabled=!1,void 0!==this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),j.forEach(function(e,i){e===t&&j.splice(i,1)}),0===j.length&&p()}},{key:"updateAttachClasses",value:function(t,e){var i=this;t=t||this.attachment,e=e||this.targetAttachment;void 0!==this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),void 0===this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;t.top&&n.push(this.getClass("element-attached")+"-"+t.top),t.left&&n.push(this.getClass("element-attached")+"-"+t.left),e.top&&n.push(this.getClass("target-attached")+"-"+e.top),e.left&&n.push(this.getClass("target-attached")+"-"+e.left);var o=[];["left","top","bottom","right","middle","center"].forEach(function(t){o.push(i.getClass("element-attached")+"-"+t),o.push(i.getClass("target-attached")+"-"+t)}),S(function(){void 0!==i._addAttachClasses&&(F(i.element,i._addAttachClasses,o),!1!==i.options.addTargetClasses&&F(i.target,i._addAttachClasses,o),delete i._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var i,n,o,s,a=(i=this.targetAttachment,n=this.attachment,o=i.left,s=i.top,"auto"===o&&(o=V[n.left]),"auto"===s&&(s=B[n.top]),{left:o,top:s});this.updateAttachClasses(this.attachment,a);var c=this.cache("element-bounds",function(){return f(t.element)}),u=c.width,l=c.height;if(0===u&&0===l&&void 0!==this.lastSize){var h=this.lastSize;u=h.width,l=h.height}else this.lastSize={width:u,height:l};var d=this.cache("target-bounds",function(){return t.getTargetBounds()}),p=d,m=W(H(this.attachment),{width:u,height:l}),y=W(H(a),p),b=W(this.offset,{width:u,height:l}),w=W(this.targetOffset,p);m=$(m,b),y=$(y,w);for(var _=d.left+y.left-m.left,x=d.top+y.top-m.top,C=0;C<r.modules.length;++C){var F=r.modules[C].position.call(this,{left:_,top:x,targetAttachment:a,targetPos:d,elementPos:c,offset:m,targetOffset:y,manualOffset:b,manualTargetOffset:w,scrollbarSize:T,attachment:this.attachment});if(!1===F)return!1;void 0!==F&&"object"==typeof F&&(x=F.top,_=F.left)}var k={page:{top:x,left:_},viewport:{top:x-pageYOffset,bottom:pageYOffset-x-l+innerHeight,left:_-pageXOffset,right:pageXOffset-_-u+innerWidth}},S=this.target.ownerDocument,E=S.defaultView,T=void 0;return E.innerHeight>S.documentElement.clientHeight&&(T=this.cache("scrollbar-size",v),k.viewport.bottom-=T.height),E.innerWidth>S.documentElement.clientWidth&&(T=this.cache("scrollbar-size",v),k.viewport.right-=T.width),-1!==["","static"].indexOf(S.body.style.position)&&-1!==["","static"].indexOf(S.body.parentElement.style.position)||(k.page.bottom=S.body.scrollHeight-x-l,k.page.right=S.body.scrollWidth-_-u),void 0!==this.options.optimizations&&!1!==this.options.optimizations.moveElement&&void 0===this.targetModifier&&function(){var e=t.cache("target-offsetparent",function(){return g(t.target)}),i=t.cache("target-offsetparent-bounds",function(){return f(e)}),n=getComputedStyle(e),o=i,r={};if(["Top","Left","Bottom","Right"].forEach(function(t){r[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])}),i.right=S.body.scrollWidth-i.left-o.width+r.right,i.bottom=S.body.scrollHeight-i.top-o.height+r.bottom,k.page.top>=i.top+r.top&&k.page.bottom>=i.bottom&&k.page.left>=i.left+r.left&&k.page.right>=i.right){var s=e.scrollTop,a=e.scrollLeft;k.offset={top:k.page.top-i.top+s-r.top,left:k.page.left-i.left+a-r.left}}}(),this.move(k),this.history.unshift(k),this.history.length>3&&this.history.pop(),e&&O(),!0}}},{key:"move",value:function(t){var e=this;if(void 0!==this.element.parentNode){var i={};for(var n in t)for(var o in i[n]={},t[n]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if(void 0!==a[n]&&!A(a[n][o],t[n][o])){r=!0;break}}r||(i[n][o]=!0)}var c={top:"",left:"",right:"",bottom:""},u=function(t,i){if(!1!==(void 0!==e.options.optimizations?e.options.optimizations.gpu:null)){var n=void 0,o=void 0;if(t.top?(c.top=0,n=i.top):(c.bottom=0,n=-i.bottom),t.left?(c.left=0,o=i.left):(c.right=0,o=-i.right),window.matchMedia)window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches||(o=Math.round(o),n=Math.round(n));c[q]="translateX("+o+"px) translateY("+n+"px)","msTransform"!==q&&(c[q]+=" translateZ(0)")}else t.top?c.top=i.top+"px":c.bottom=i.bottom+"px",t.left?c.left=i.left+"px":c.right=i.right+"px"},l=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(c.position="absolute",u(i.page,t.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(c.position="fixed",u(i.viewport,t.viewport)):void 0!==i.offset&&i.offset.top&&i.offset.left?function(){c.position="absolute";var n=e.cache("target-offsetparent",function(){return g(e.target)});g(e.element)!==n&&S(function(){e.element.parentNode.removeChild(e.element),n.appendChild(e.element)}),u(i.offset,t.offset),l=!0}():(c.position="absolute",u({top:!0,left:!0},t.page)),!l)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var h=!0,d=this.element.parentNode;d&&1===d.nodeType&&"BODY"!==d.tagName;){if("static"!==getComputedStyle(d).position){h=!1;break}d=d.parentNode}h||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var p={},f=!1;for(var o in c){var m=c[o];this.element.style[o]!==m&&(f=!0,p[o]=m)}f&&S(function(){y(e.element.style,p),e.trigger("repositioned")})}}}]),e}();K.modules=[],r.position=I;var J=y(K,r),y=(T=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=(Q=r.Utils).getBounds,Q.extend),X=(F=Q.updateClasses,S=Q.defer,["left","top","right","bottom"]);r.modules.push({position:function(t){var e=this,i=t.top,n=t.left,o=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",function(){return f(e.element)}),s=r.height,a=r.width;if(0===a&&0===s&&void 0!==this.lastSize){var c=this.lastSize;a=c.width,s=c.height}var u=this.cache("target-bounds",function(){return e.getTargetBounds()}),l=u.height,h=u.width,d=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,i=t.pinnedClass;e&&d.push(e),i&&d.push(i)}),d.forEach(function(t){["left","top","right","bottom"].forEach(function(e){d.push(t+"-"+e)})});var p=[],g=y({},o),m=y({},this.attachment);return this.options.constraints.forEach(function(t){var r=t.to,c=t.attachment,u=t.pin;void 0===c&&(c="");var d=void 0,v=void 0;if(c.indexOf(" ")>=0){var y=c.split(" "),b=T(y,2);v=b[0],d=b[1]}else d=v=c;var w,_=("scrollParent"===(w=r)?w=e.scrollParents[0]:"window"===w&&(w=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),w===document&&(w=w.documentElement),void 0!==w.nodeType&&function(){var t=w,e=f(w),i=e,n=getComputedStyle(w);if(w=[i.left,i.top,e.width+i.left,e.height+i.top],t.ownerDocument!==document){var o=t.ownerDocument.defaultView;w[0]+=o.pageXOffset,w[1]+=o.pageYOffset,w[2]+=o.pageXOffset,w[3]+=o.pageYOffset}X.forEach(function(t,e){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?w[e]+=parseFloat(n["border"+t+"Width"]):w[e]-=parseFloat(n["border"+t+"Width"])})}(),w);"target"!==v&&"both"!==v||(i<_[1]&&"top"===g.top&&(i+=l,g.top="bottom"),i+s>_[3]&&"bottom"===g.top&&(i-=l,g.top="top")),"together"===v&&("top"===g.top&&("bottom"===m.top&&i<_[1]?(i+=l,g.top="bottom",i+=s,m.top="top"):"top"===m.top&&i+s>_[3]&&i-(s-l)>=_[1]&&(i-=s-l,g.top="bottom",m.top="bottom")),"bottom"===g.top&&("top"===m.top&&i+s>_[3]?(i-=l,g.top="top",i-=s,m.top="bottom"):"bottom"===m.top&&i<_[1]&&i+(2*s-l)<=_[3]&&(i+=s-l,g.top="top",m.top="top")),"middle"===g.top&&(i+s>_[3]&&"top"===m.top?(i-=s,m.top="bottom"):i<_[1]&&"bottom"===m.top&&(i+=s,m.top="top"))),"target"!==d&&"both"!==d||(n<_[0]&&"left"===g.left&&(n+=h,g.left="right"),n+a>_[2]&&"right"===g.left&&(n-=h,g.left="left")),"together"===d&&(n<_[0]&&"left"===g.left?"right"===m.left?(n+=h,g.left="right",n+=a,m.left="left"):"left"===m.left&&(n+=h,g.left="right",n-=a,m.left="right"):n+a>_[2]&&"right"===g.left?"left"===m.left?(n-=h,g.left="left",n-=a,m.left="right"):"right"===m.left&&(n-=h,g.left="left",n+=a,m.left="left"):"center"===g.left&&(n+a>_[2]&&"left"===m.left?(n-=a,m.left="right"):n<_[0]&&"right"===m.left&&(n+=a,m.left="left"))),"element"!==v&&"both"!==v||(i<_[1]&&"bottom"===m.top&&(i+=s,m.top="top"),i+s>_[3]&&"top"===m.top&&(i-=s,m.top="bottom")),"element"!==d&&"both"!==d||(n<_[0]&&("right"===m.left?(n+=a,m.left="left"):"center"===m.left&&(n+=a/2,m.left="left")),n+a>_[2]&&("left"===m.left?(n-=a,m.left="right"):"center"===m.left&&(n-=a/2,m.left="right"))),"string"==typeof u?u=u.split(",").map(function(t){return t.trim()}):!0===u&&(u=["top","left","right","bottom"]),u=u||[];var x,C,F=[],k=[];i<_[1]&&(u.indexOf("top")>=0?(i=_[1],F.push("top")):k.push("top")),i+s>_[3]&&(u.indexOf("bottom")>=0?(i=_[3]-s,F.push("bottom")):k.push("bottom")),n<_[0]&&(u.indexOf("left")>=0?(n=_[0],F.push("left")):k.push("left")),n+a>_[2]&&(u.indexOf("right")>=0?(n=_[2]-a,F.push("right")):k.push("right")),F.length&&(x=void 0,x=void 0!==e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),p.push(x),F.forEach(function(t){p.push(x+"-"+t)})),k.length&&(C=void 0,C=void 0!==e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),p.push(C),k.forEach(function(t){p.push(C+"-"+t)})),(F.indexOf("left")>=0||F.indexOf("right")>=0)&&(m.left=g.left=!1),(F.indexOf("top")>=0||F.indexOf("bottom")>=0)&&(m.top=g.top=!1),g.top===o.top&&g.left===o.left&&m.top===e.attachment.top&&m.left===e.attachment.left||(e.updateAttachClasses(m,g),e.trigger("update",{attachment:m,targetAttachment:g}))}),S(function(){!1!==e.options.addTargetClasses&&F(e.target,p,d),F(e.element,p,d)}),{top:i,left:n}}});var Q,f=(Q=r.Utils).getBounds,F=Q.updateClasses;S=Q.defer;r.modules.push({position:function(t){var e=this,i=t.top,n=t.left,o=this.cache("element-bounds",function(){return f(e.element)}),r=o.height,s=o.width,a=this.getTargetBounds(),c=i+r,u=n+s,l=[];i<=a.bottom&&c>=a.top&&["left","right"].forEach(function(t){var e=a[t];e!==n&&e!==u||l.push(t)}),n<=a.right&&u>=a.left&&["top","bottom"].forEach(function(t){var e=a[t];e!==i&&e!==c||l.push(t)});var h=[],d=[];return h.push(this.getClass("abutted")),["left","top","right","bottom"].forEach(function(t){h.push(e.getClass("abutted")+"-"+t)}),l.length&&d.push(this.getClass("abutted")),l.forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),S(function(){!1!==e.options.addTargetClasses&&F(e.target,d,h),F(e.element,d,h)}),!0}});T=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return r.modules.push({position:function(t){var e=t.top,i=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:i}));var o=void 0,r=void 0;if("string"==typeof n){(n=n.split(" "))[1]=n[1]||n[0];var s=T(n,2);o=s[0],r=s[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=n.top,r=n.left;return{top:e+=o,left:i+=r}}}}),J})?n.call(e,i,e,t):n)||(t.exports=o)},function(t,e,i){var n=i(12),o=i(4),r=i(92),s=i(98),a=i(3),c=i(0),u=i(2).channel("global");t.exports=n.extend({channelName:"modal",initialize:function(t){this.container=t.container,this.start()},onStart:function(){this.channel.reply({open:this.open,close:this.close,alert:this.alert,confirm:this.confirm,prompt:this.prompt},this),this.layout=new r,this.container.show(this.layout),this.channel.reply({update:this.layout.update},this.layout),u.on({error:this.error},this),this.listenTo(o.history,{route:this.onRoute})},onStop:function(){delete this.layout,this.container.reset(),this.channel.reset()},onRoute:function(){this.fragment!==o.history.fragment&&this.close()},open:function(t){var e=this;return this.fragment=o.history.fragment,this.close().then(function(){return e.isOpen=!0,e.layout.open(t)})},close:function(){return this.isOpen?(this.isOpen=!1,this.layout.close()):a.Deferred().resolve()},error:function(t){(t=t||{}).jqXHR&&this.parseXHR(t);var e=new s({className:"error",title:t.status,message:t.message,raw:t.raw});this.open(e)},parseXHR:function(t){c.isObject(t.thrownError)?(t.status=t.thrownError.name,t.message=t.thrownError.message):(t.status=t.jqXHR.statusText,t.jqXHR.responseJSON&&t.jqXHR.responseJSON.message?t.message=t.jqXHR.responseJSON.message:t.jqXHR.responseJSON&&t.jqXHR.responseJSON.errors&&t.jqXHR.responseJSON.errors[0]&&(t.message=t.jqXHR.responseJSON.errors[0].message)),t.raw=t.jqXHR.responseText}})},function(t,e,i){var n=i(10),o=i(93),r=i(0),s=i(3),a=i(7),c=i(95),u=i(2),l=i(8)("modalLayout"),h=i(1);i(96),t.exports=n.extend({template:a.compile(c),className:function(){return h.prototype.namespace("modal")},attributes:{tabindex:-1,role:"dialog"},buttons:[{type:"message"},{action:"save",icon:"prepend",className:"btn-primary"}],regions:{header:".modal-header",content:".modal-body",footer:".modal-footer"},initialize:function(){this.$el.modal({show:!1,backdrop:"static"})},events:{'click [data-action="close"]':function(t){t.preventDefault(),u.request("modal","close")}},triggers:{"show.bs.modal":{preventDefault:!1,event:"before:open"},"shown.bs.modal":{preventDefault:!1,event:"open"},"hide.bs.modal":{preventDefault:!1,event:"before:close"},"hidden.bs.modal":{preventDefault:!1,event:"close"}},open:function(t){var e=s.Deferred();return this.once("open",e.resolve),this.setup(t),this.content.show(t),this.$el.modal("show"),e},close:function(){var t=s.Deferred();return this.once("close",function(){this.tearDown(),t.resolve()}),this.$el.modal("hide"),t},setup:function(t){var e=t.modal||{};r.defaults(e,{header:{},footer:{}}),r.each(e,function(t,e){var i=s.camelCase("modal-"+e);this[i]?this[i](t):l("no method matching "+i)},this)},tearDown:function(){this.header.empty(),this.content.empty(),this.footer.empty(),this.$(".modal-dialog").removeClass().addClass("modal-dialog")},update:function(t){t=t||{},r.each(t,function(t,e){this[e].currentView.triggerMethod("Update",t)},this)},modalHeader:function(t){var e=new o(t);this.header.show(e)},modalFooter:function(t){t.buttons=t.buttons||this.buttons;var e=u.request("buttons","view",t);this.footer.show(e)},modalTitle:function(t){this.$(".modal-header h1").html(t)},modalClassName:function(t){t&&this.$(".modal-dialog").addClass(t)},getButtons:function(){return this.getRegion("footer").currentView}})},function(t,e,i){var n=i(5),o=i(7),r=i(94),s=i(0),a=i(6);t.exports=n.extend({template:o.compile(r),initialize:function(t){t=t||{};var e={title:a.t("messages.loading"),close:a.t("buttons.close")};this.data=s.defaults(t,e)},templateHelpers:function(){return this.data.iconPrefix=window.adminpage?"wc_pos-icon":"icon",this.data},onUpdate:function(t){s.extend(this.data,t),this.render()}})},function(t,e){t.exports='<h4 class="{{namespace \'modal-title\'}} modal-title">\r\n  {{{title}}}\r\n</h4>\r\n<a class="{{namespace \'btn\'}} close" data-action="close">\r\n  <i class="{{namespace \'icon-times\'}}" title="{{close}}"></i>\r\n</a>'},function(t,e){t.exports="<div class=\"{{namespace 'modal-dialog'}} modal-dialog\">\r\n  <div class=\"{{namespace 'modal-content'}} modal-content\">\r\n    <div class=\"{{namespace 'modal-header'}} modal-header\"></div>\r\n    <div class=\"{{namespace 'modal-body'}} modal-body\"></div>\r\n    <div class=\"{{namespace 'modal-footer'}} modal-footer\"></div>\r\n  </div>\r\n</div>"},function(t,e,i){var n,o,r,s;s=function(t,e,i){"use strict";var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var o,r,s,a,c,u,l,h,d,p,f,g,m,v,y,b,w=(o=i)&&o.__esModule?o:{default:o},_=(r=jQuery,s="modal",c="."+(a="bs.modal"),u=r.fn[s],l={backdrop:!0,keyboard:!0,focus:!0,show:!0},h={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},d={HIDE:"hide"+c,HIDDEN:"hidden"+c,SHOW:"show"+c,SHOWN:"shown"+c,FOCUSIN:"focusin"+c,RESIZE:"resize"+c,CLICK_DISMISS:"click.dismiss"+c,KEYDOWN_DISMISS:"keydown.dismiss"+c,MOUSEUP_DISMISS:"mouseup.dismiss"+c,MOUSEDOWN_DISMISS:"mousedown.dismiss"+c,CLICK_DATA_API:"click"+c+".data-api"},p="modal-scrollbar-measure",f="modal-backdrop",g="modal-open",m="fade",v="in",y={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".navbar-fixed-top, .navbar-fixed-bottom, .is-fixed"},b=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=this._getConfig(i),this._element=e,this._dialog=r(e).find(y.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return n(t,[{key:"toggle",value:function(t){return this._isShown?this.hide():this.show(t)}},{key:"show",value:function(t){var e=this,i=r.Event(d.SHOW,{relatedTarget:t});r(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),r(document.body).addClass(g),this._setEscapeEvent(),this._setResizeEvent(),r(this._element).on(d.CLICK_DISMISS,y.DATA_DISMISS,r.proxy(this.hide,this)),r(this._dialog).on(d.MOUSEDOWN_DISMISS,function(){r(e._element).one(d.MOUSEUP_DISMISS,function(t){r(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(r.proxy(this._showElement,this,t)))}},{key:"hide",value:function(t){t&&t.preventDefault();var e=r.Event(d.HIDE);r(this._element).trigger(e),this._isShown&&!e.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),r(document).off(d.FOCUSIN),r(this._element).removeClass(v),r(this._element).off(d.CLICK_DISMISS),r(this._dialog).off(d.MOUSEDOWN_DISMISS),w.default.supportsTransitionEnd()&&r(this._element).hasClass(m)?r(this._element).one(w.default.TRANSITION_END,r.proxy(this._hideModal,this)).emulateTransitionEnd(300):this._hideModal())}},{key:"dispose",value:function(){r.removeData(this._element,a),r(window).off(c),r(document).off(c),r(this._element).off(c),r(this._backdrop).off(c),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null}},{key:"_getConfig",value:function(t){return t=r.extend({},l,t),w.default.typeCheckConfig(s,t,h),t}},{key:"_showElement",value:function(t){var e=this,i=w.default.supportsTransitionEnd()&&r(this._element).hasClass(m);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&w.default.reflow(this._element),r(this._element).addClass(v),this._config.focus&&this._enforceFocus();var n=r.Event(d.SHOWN,{relatedTarget:t}),o=function(){e._config.focus&&e._element.focus(),r(e._element).trigger(n)};i?r(this._dialog).one(w.default.TRANSITION_END,o).emulateTransitionEnd(300):o()}},{key:"_enforceFocus",value:function(){var t=this;r(document).off(d.FOCUSIN).on(d.FOCUSIN,function(e){document===e.target||t._element===e.target||r(t._element).has(e.target).length||t._element.focus()})}},{key:"_setEscapeEvent",value:function(){var t=this;this._isShown&&this._config.keyboard?r(this._element).on(d.KEYDOWN_DISMISS,function(e){27===e.which&&t.hide()}):this._isShown||r(this._element).off(d.KEYDOWN_DISMISS)}},{key:"_setResizeEvent",value:function(){this._isShown?r(window).on(d.RESIZE,r.proxy(this._handleUpdate,this)):r(window).off(d.RESIZE)}},{key:"_hideModal",value:function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._showBackdrop(function(){r(document.body).removeClass(g),t._resetAdjustments(),t._resetScrollbar(),r(t._element).trigger(d.HIDDEN)})}},{key:"_removeBackdrop",value:function(){this._backdrop&&(r(this._backdrop).remove(),this._backdrop=null)}},{key:"_showBackdrop",value:function(t){var e=this,i=r(this._element).hasClass(m)?m:"";if(this._isShown&&this._config.backdrop){var n=w.default.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=f,i&&r(this._backdrop).addClass(i),r(this._backdrop).appendTo(document.body),r(this._element).on(d.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),n&&w.default.reflow(this._backdrop),r(this._backdrop).addClass(v),!t)return;if(!n)return void t();r(this._backdrop).one(w.default.TRANSITION_END,t).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){r(this._backdrop).removeClass(v);var o=function(){e._removeBackdrop(),t&&t()};w.default.supportsTransitionEnd()&&r(this._element).hasClass(m)?r(this._backdrop).one(w.default.TRANSITION_END,o).emulateTransitionEnd(150):o()}else t&&t()}},{key:"_handleUpdate",value:function(){this._adjustDialog()}},{key:"_adjustDialog",value:function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")}},{key:"_resetAdjustments",value:function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}},{key:"_checkScrollbar",value:function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}},{key:"_setScrollbar",value:function(){var t=parseInt(r(y.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=t+this._scrollbarWidth+"px")}},{key:"_resetScrollbar",value:function(){document.body.style.paddingRight=this._originalBodyPadding}},{key:"_getScrollbarWidth",value:function(){var t=document.createElement("div");t.className=p,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}}],[{key:"_jQueryInterface",value:function(e,i){return this.each(function(){var n=r(this).data(a),o=r.extend({},t.Default,r(this).data(),"object"==typeof e&&e);if(n||(n=new t(this,o),r(this).data(a,n)),"string"==typeof e){if(void 0===n[e])throw new Error('No method named "'+e+'"');n[e](i)}else o.show&&n.show(i)})}},{key:"VERSION",get:function(){return"4.0.0-alpha.2"}},{key:"Default",get:function(){return l}}]),t}(),r(document).on(d.CLICK_DATA_API,y.DATA_TOGGLE,function(t){var e=this,i=void 0,n=w.default.getSelectorFromElement(this);n&&(i=r(n)[0]);var o=r(i).data(a)?"toggle":r.extend({},r(i).data(),r(this).data());"A"===this.tagName&&t.preventDefault();var s=r(i).one(d.SHOW,function(t){t.isDefaultPrevented()||s.one(d.HIDDEN,function(){r(e).is(":visible")&&e.focus()})});b._jQueryInterface.call(r(i),o,this)}),r.fn[s]=b._jQueryInterface,r.fn[s].Constructor=b,r.fn[s].noConflict=function(){return r.fn[s]=u,b._jQueryInterface},b);e.exports=_},o=[e,t,i(97)],void 0===(r="function"==typeof(n=s)?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n,o,r;o=[e,t],void 0===(r="function"==typeof(n=function(t,e){"use strict";var i=function(t){var e=!1,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};function n(e){var i=this,n=!1;return t(this).one(o.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||o.triggerTransitionEnd(i)},e),this}var o={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){new Function("bs","return bs")(t.offsetHeight)},triggerTransitionEnd:function(i){t(i).trigger(e.end)},supportsTransitionEnd:function(){return Boolean(e)},typeCheckConfig:function(t,e,i){for(var n in i)if(i.hasOwnProperty(n)){var o=i[n],r=e[n],s=void 0;if(r&&((c=r)[0]||c).nodeType?s="element":(a=r,s={}.toString.call(a).match(/\s([a-zA-Z]+)/)[1].toLowerCase()),!new RegExp(o).test(s))throw new Error(t.toUpperCase()+': Option "'+n+'" provided type "'+s+'" but expected type "'+o+'".')}var a,c}};return e=function(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in i)if(void 0!==t.style[e])return{end:i[e]};return!1}(),t.fn.emulateTransitionEnd=n,o.supportsTransitionEnd()&&(t.event.special[o.TRANSITION_END]={bindType:e.end,delegateType:e.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}),o}(jQuery);e.exports=i})?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n=i(5),o=i(7),r=i(99);t.exports=n.extend({template:o.compile(r),initialize:function(t){t=t||{},this.message=t.message,this.raw=t.raw,this.modal={className:t.className,header:{title:t.title},footer:{buttons:[{action:"close"}]}}},templateHelpers:function(){var t={};return t.message=this.message,t.raw=this.raw,t},ui:{raw:'*[data-action="raw"]',output:".raw-output"},events:{"click @ui.raw":"toggleRaw"},toggleRaw:function(t){t.preventDefault(),this.ui.output.toggle()}})},function(t,e){t.exports='<p>\r\n  {{message}}\r\n  {{#if raw}}\r\n    <a href="#" data-action="raw"><i class="{{namespace \'icon-info-circle\'}}"></i></a>\r\n  {{/if}}\r\n<p>\r\n{{#if raw}}\r\n  <div class="raw-output" style="display:none">{{{raw}}}</div>\r\n{{/if}}'},function(t,e,i){var n=i(12),o=i(101),r=i(104);t.exports=n.extend({channelName:"tabs",initialize:function(){this.channel.reply({view:this.tabsView},this)},tabsView:function(t){return t=t||{},new o({collection:this.tabsCollection(t)})},tabsCollection:function(t){return new r(t.tabs)}})},function(t,e,i){var n=i(25),o=i(102),r=n.extend({tagName:"ul",childView:o,attributes:{class:"tabs",role:"tablist"},setActive:function(t){this.collection.get(t).set({active:!0})},setLabel:function(t){t=t||{},this.collection.get(t.tab).set({label:t.label})},onShow:function(){this.collection.ensureActiveTab()}});t.exports=r},function(t,e,i){var n=i(7),o=i(5),r=i(103),s=o.extend({tagName:"li",template:n.compile(r),className:function(){if(this.model.get("active"))return"active"},modelEvents:{"change:active":"toggleActive","change:label":"render"},toggleActive:function(){this.$el.toggleClass("active",this.model.get("active"))},triggers:{click:"tab:clicked",'click *[data-action="remove"]':"remove:tab"},onTabClicked:function(){this.model.set({active:!0})},onRemoveTab:function(){this.model.collection.remove(this.model)}});t.exports=s},function(t,e){t.exports='{{#unless fixed}}\r\n<a href="#" data-action="remove">\r\n  <i class="icon icon-times-circle"></i>\r\n</a>\r\n{{/unless}}\r\n{{{ label }}}'},function(t,e,i){var n=i(14),o=i(105),r=n.extend({model:o,initialize:function(){this.on({"change:active":this.onChangeActive,remove:this.ensureActiveTab})},onChangeActive:function(t,e){e&&(this.each(function(e){e.set({active:e===t})}),this.trigger("active:tab",t))},ensureActiveTab:function(){var t=this.where({active:!0});this.length>0&&0===t.length&&this.at(0).set({active:!0})}});t.exports=r},function(t,e,i){var n=i(16).extend({defaults:{id:"",label:"Tab",active:!1,fixed:!0}});t.exports=n},function(t,e,i){var n=i(12),o=i(26);t.exports=n.extend({channelName:"buttons",initialize:function(){this.channel.reply({view:this.view},this)},view:function(t){return new o(t)}})},function(t,e){t.exports='{{#each buttons}}\r\n\r\n  {{#if this.button}}\r\n    <button class="btn {{this.className}}"\r\n            {{#if this.action}}data-action="{{this.action}}"{{/if}}\r\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\r\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\r\n      {{#if this.icon}}data-icon="{{this.icon}}"{{/if}}\r\n      {{#if this.disabled}}disabled{{/if}}\r\n      >\r\n      {{this.label}}\r\n    </button>\r\n  {{/if}}\r\n\r\n  {{#if this.link}}\r\n    <a href="#" class="btn {{this.className}}"\r\n       {{#if this.action}}data-action="{{this.action}}"{{/if}}\r\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\r\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\r\n      {{#if this.icon}}data-icon="{{this.icon}}"{{/if}}\r\n      >\r\n      {{this.label}}\r\n    </a>\r\n  {{/if}}\r\n\r\n  {{#if this.input}}\r\n    <input type="button" class="btn {{this.className}}" value="{{this.label}}"\r\n           {{#if this.action}}data-action="{{this.action}}"{{/if}}\r\n      {{#if this.toggle}}data-toggle="{{this.toggle}}"{{/if}}\r\n      {{#if this.loading}}data-loading="{{this.loadingText}}"{{/if}}\r\n      >\r\n  {{/if}}\r\n\r\n  {{#if this.message}}\r\n    <p class="message {{this.className}}"></p>\r\n  {{/if}}\r\n\r\n{{/each}}'},function(t,e,i){var n=i(15),o=i(1),r=i(3),s=i(6),a="disabled",c=n.extend({loadingText:s.t("messages.loading"),ui:{btns:".btn",action:"[data-action]",toggle:"[data-toggle]",message:".message"},events:{"click @ui.action":"action","click @ui.toggle":"toggle","state @ui.btns":"setState"},namespace:function(t){return window.adminpage&&(t="wc_pos-"+t),t},action:function(t){t.preventDefault();var e=r(t.target).data("action");this.view.trigger("action:"+e,r(t.target),this.view,e)},toggle:function(t){t.preventDefault(),this.enable().disable(r(t.target));var e=r(t.target).data("toggle");this.view.trigger("toggle:"+e,r(t.target),this.view,e)},enable:function(t){return t?t.removeClass(a).prop(a,!1):this.ui.btns.each(function(){r(this).removeClass(a).prop(a,!1)}),this},disable:function(t){return t?t.addClass(a).prop(a,!0):this.ui.btns.each(function(){r(this).addClass(a).prop(a,!0)}),this},setState:function(t,e,i){var n=r(t.target);this["loading"===e?"disable":"enable"](),this.updateText(n),n.is("input")?this.updateInput(n,e):this.updateIcon(n,e),void 0!==i&&this.updateMessage(i,e)},updateText:function(t){if(void 0!==t.data("loading")){var e=t.is("input")?"val":"html",i=t[e](),n=t.data("loading")||this.loadingText;t.data("loading",i),t[e](n)}},updateIcon:function(t,e){if(void 0!==t.data("icon")){var i=t.data("icon")||"prepend",n="reset"!==e?this.icon(e):"";t.children("i").remove(),t[i](n)}},icon:function(t){return'<i class="'+this.namespace("icon-"+t)+'"></i>'},updateInput:function(t,e){t.removeClass("loading success error"),"reset"!==e&&t.addClass(e)},updateMessage:function(t,e){null===t&&(t=s.t("messages."+e)),e||(e=t,t=s.t("messages."+t)),"reset"===e&&(t=""),this.ui.message.removeClass("loading success error").addClass(this.namespace("text-"+e)).html(t)},onMessage:function(t,e){this.updateMessage(t,e)},onDisableButtons:function(){this.disable()},onEnableButtons:function(){this.enable()}});t.exports=c,o.prototype.set("Behaviors.Buttons",c)},function(t,e,i){var n,o,r,s;s=function(t,e,i){e.Stickit=i,i._handlers=[],i.addHandler=function(e){e=t.map(t.flatten([e]),function(e){return t.defaults({},e,{updateModel:!0,updateView:!0,updateMethod:"text"})}),this._handlers=this._handlers.concat(e)},i.ViewMixin={_modelBindings:null,unstickit:function(e,i){if(t.isObject(i))t.each(i,function(t,i){this.unstickit(e,i)},this);else{var n=[],o=[];this._modelBindings=t.reject(this._modelBindings,function(t){if(!(e&&t.model!==e||i&&t.config.selector!=i))return t.model.off(t.event,t.fn),o.push(t.config._destroy),n.push(t.model),!0}),t.invoke(t.uniq(n),"trigger","stickit:unstuck",this.cid),t.each(t.uniq(o),function(t){t.call(this)},this),this.$el.off(".stickit"+(e?"."+e.cid:""),i)}},stickit:function(e,i){var n=e||this.model,o=i||t.result(this,"bindings")||{};this._modelBindings||(this._modelBindings=[]),this.addBinding(n,o);var r=this.remove;return r.stickitWrapped||(this.remove=function(){var t=this;return this.unstickit(),r&&(t=r.apply(this,arguments)),t}),this.remove.stickitWrapped=!0,this},addBinding:function(e,i,o){var g=e||this.model,m=".stickit."+g.cid;if(o=o||{},t.isObject(i)){var v=i;t.each(v,function(t,e){this.addBinding(g,e,t)},this)}else{var y=":el"===i?this.$el:this.$(i);if(this.unstickit(g,i),y.length){t.isString(o)&&(o={observe:o}),t.isFunction(o.observe)&&(o.observe=o.observe.call(this));var b=l(y,o),w=b.observe;b.selector=i,b.view=this;var _=b.bindId=t.uniqueId(),x=t.extend({stickitChange:b},b.setOptions);if(b._destroy=function(){r.call(this,b.destroy,y,g,b)},h(y,b,g,w),p(y,b,g,w),d(y,b,g,w),w){t.each(b.events,function(e){var o=e+m,a=":el"===i?"":i;this.$el.on(o,a,t.bind(function(t){var e=r.call(this,b.getVal,y,t,b,n.call(arguments,1));s(b.updateModel,e,t,b)&&c(g,w,e,x,b)},this))},this),t.each(t.flatten([w]),function(t){a(g,"change:"+t,b,function(t,e,i){if((i&&i.stickitChange&&i.stickitChange.bindId)!==_){var n=u(g,w,b);f(y,b,n,g)}})});var C=u(g,w,b);f(y,b,C,g,!0)}r.call(this,b.initialize,y,g,b)}}}},t.extend(e.View.prototype,i.ViewMixin);var n=[].slice,o=function(e,i){var n=(i||"").split("."),o=t.reduce(n,function(t,e){return t[e]},e);return null==o?e:o},r=function(e){if(e=t.isString(e)?o(this,e):e)return e.apply(this,n.call(arguments,1))},s=function(e,i,n){if(t.isBoolean(e))return e;if(t.isFunction(e)||t.isString(e)){var o=t.last(arguments).view;return r.apply(o,arguments)}return!1},a=function(t,e,i,n){var o=i.view;t.on(e,n,o),o._modelBindings.push({model:t,event:e,fn:n,config:i})},c=function(e,i,n,o,s){var a={},c=s.view;s.onSet&&(n=r.call(c,s.onSet,n,s)),s.set?r.call(c,s.set,i,n,o,s):(a[i]=n,t.isArray(i)&&t.isArray(n)&&(a=t.reduce(i,function(e,i,o){return e[i]=t.has(n,o)?n[o]:null,e},{})),e.set(a,o))},u=function(e,i,n){var o=n.view,s=function(t){return e[n.escape?"escape":"get"](t)},a=function(t){return null==t?"":t},c=t.isArray(i)?t.map(i,s):s(i);return n.onGet&&(c=r.call(o,n.onGet,c,n)),t.isArray(c)?t.map(c,a):a(c)},l=i.getConfiguration=function(e,n){var o=[{updateModel:!1,updateMethod:"text",update:function(t,e,i,n){t[n.updateMethod]&&t[n.updateMethod](e)},getVal:function(t,e,i){return t[i.updateMethod]()}}];(o=o.concat(t.filter(i._handlers,function(t){return e.is(t.selector)}))).push(n);var r=t.extend.apply(t,o);return t.has(r,"updateView")||(r.updateView=!r.visible),r},h=function(e,i,n,o){var r=["autofocus","autoplay","async","checked","controls","defer","disabled","hidden","indeterminate","loop","multiple","open","readonly","required","scoped","selected"],s=i.view;t.each(i.attributes||[],function(c){(c=t.clone(c)).view=s;var l="",h=c.observe||(c.observe=o),d=function(){var i=t.contains(r,c.name)?"prop":"attr",o=u(n,h,c);"class"===c.name?(e.removeClass(l).addClass(o),l=o):e[i](c.name,o)};t.each(t.flatten([h]),function(t){a(n,"change:"+t,i,d)}),d()})},d=function(e,i,n,o){t.each(i.classes||[],function(o,r){t.isString(o)&&(o={observe:o}),o.view=i.view;var s=o.observe,c=function(){var t=u(n,s,o);e.toggleClass(r,!!t)};t.each(t.flatten([s]),function(t){a(n,"change:"+t,i,c)}),c()})},p=function(e,i,n,o){if(null!=i.visible){var s=i.view,c=function(){var a=i.visible,c=i.visibleFn,l=u(n,o,i),h=!!l;(t.isFunction(a)||t.isString(a))&&(h=!!r.call(s,a,l,i)),c?r.call(s,c,e,h,i):e.toggle(h)};t.each(t.flatten([o]),function(t){a(n,"change:"+t,i,c)}),c()}},f=function(t,e,i,n,o){var a=e.view;s(e.updateView,i,e)&&(r.call(a,e.update,t,i,n,e),o||r.call(a,e.afterUpdate,t,i,e))};return i.addHandler([{selector:"[contenteditable]",updateMethod:"html",events:["input","change"]},{selector:"input",events:["propertychange","input","change"],update:function(t,e){t.val(e)},getVal:function(t){return t.val()}},{selector:"textarea",events:["propertychange","input","change"],update:function(t,e){t.val(e)},getVal:function(t){return t.val()}},{selector:'input[type="radio"]',events:["change"],update:function(t,e){t.filter('[value="'+e+'"]').prop("checked",!0)},getVal:function(t){return t.filter(":checked").val()}},{selector:'input[type="checkbox"]',events:["change"],update:function(i,n,o,r){if(i.length>1)n||(n=[]),i.each(function(i,o){var r=e.$(o),s=t.contains(n,r.val());r.prop("checked",s)});else{var s=t.isBoolean(n)?n:n===i.val();i.prop("checked",s)}},getVal:function(i){var n;if(i.length>1)n=t.reduce(i,function(t,i){var n=e.$(i);return n.prop("checked")&&t.push(n.val()),t},[]);else{n=i.prop("checked");var o=i.val();"on"!==o&&null!=o&&(n=n?i.val():null)}return n}},{selector:"select",events:["change"],update:function(i,n,s,a){var c,l=a.selectOptions,h=l&&l.collection||void 0,d=i.prop("multiple");if(!l){l={};var p=function(t){return t.map(function(t,i){var n=e.$(i).data("stickit-bind-val");return{value:void 0!==n?n:i.value,label:i.text}}).get()};i.find("optgroup").length?(h={opt_labels:[]},i.find("> option").length&&(h.opt_labels.push(void 0),t.each(i.find("> option"),function(t){h[void 0]=p(e.$(t))})),t.each(i.find("optgroup"),function(t){var i=e.$(t).attr("label");h.opt_labels.push(i),h[i]=p(e.$(t).find("option"))})):h=p(i.find("option"))}l.valuePath=l.valuePath||"value",l.labelPath=l.labelPath||"label",l.disabledPath=l.disabledPath||"disabled";var f=function(i,n,r){t.each(i,function(i){var s,a,c,u,h,p,f=e.$("<option/>"),g=i;"__default__"===i?(s=r.label,a=r.value,c=r.disabled):(s=o(i,l.labelPath),a=o(i,l.valuePath),c=o(i,l.disabledPath)),u=s,h=a,p=c,f.text(u),g=h,f.data("stickit-bind-val",g),t.isArray(g)||t.isObject(g)||f.val(g),!0===p&&f.prop("disabled","disabled");!d&&null!=g&&null!=r&&g===r||t.isObject(r)&&t.isEqual(g,r)?f.prop("selected",!0):d&&t.isArray(r)&&t.each(r,function(e){t.isObject(e)&&(e=o(e,l.valuePath)),(e===g||t.isObject(e)&&t.isEqual(g,e))&&f.prop("selected",!0)}),n.append(f)})};if(i.find("*").remove(),t.isString(h)){var g=window;0===h.indexOf("this.")&&(g=this),h=h.replace(/^[a-z]*\.(.+)$/,"$1"),c=o(g,h)}else c=t.isFunction(h)?r.call(this,h,i,a):h;if(c instanceof e.Collection){var m=c,v=function(){var t=u(s,a.observe,a);r.call(this,a.update,i,t,s,a)},y=function(){m.off("add remove reset sort",v)},b=function(){y(),m.off("stickit:selectRefresh"),s.off("stickit:selectRefresh")};m.trigger("stickit:selectRefresh"),m.once("stickit:selectRefresh",y,this),m.on("add remove reset sort",v,this),s.trigger("stickit:selectRefresh"),s.once("stickit:selectRefresh",function(){s.off("stickit:unstuck",b)}),s.once("stickit:unstuck",b,this),c=c.toJSON()}if(l.defaultOption){var w=t.isFunction(l.defaultOption)?l.defaultOption.call(this,i,a):l.defaultOption;f(["__default__"],i,w)}if(t.isArray(c))f(c,i,n);else if(c.opt_labels)t.each(c.opt_labels,function(t){var o=e.$("<optgroup/>").attr("label",t);f(c[t],o,n),i.append(o)});else{var _,x=[];for(var C in c)(_={})[l.valuePath]=C,_[l.labelPath]=c[C],x.push(_);x=t.sortBy(x,l.comparator||l.labelPath),f(x,i,n)}},getVal:function(i){var n=i.find("option:selected");return i.prop("multiple")?t.map(n,function(t){return e.$(t).data("stickit-bind-val")}):n.data("stickit-bind-val")}}]),i},o=[i(0),i(4),e],void 0===(r="function"==typeof(n=s)?n.apply(e,o):n)||(t.exports=r)},function(t,e,i){var n;n=function(t,e){return t.Validation=function(t){"use strict";var e,i,n,o,r,s,a,c,u,l,h={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},d={formatLabel:function(t,e){return y[h.labelFormatter](t,e)},format:function(){var t=Array.prototype.slice.call(arguments);return t.shift().replace(/\{(\d+)\}/g,function(e,i){return void 0!==t[i]?t[i]:e})}},p=function(e,i,n){return i=i||{},n=n||"",t.each(e,function(o,r){e.hasOwnProperty(r)&&(o&&t.isArray(o)?t.forEach(o,function(t,e){p(t,i,n+r+"."+e+"."),i[n+r+"."+e]=t}):o&&"object"==typeof o&&o.constructor===Object&&p(o,i,n+r+"."),i[n+r]=o)}),i},f=(e=function(e,i){var n=e.attributes;if(t.isFunction(n)?n=n(i):t.isString(n)&&t.isFunction(b[n])&&(n=b[n](i)),t.isArray(n))return n},i=function(e,i,n,o){return t.reduce((s=i,a=(r=e).validation&&t.result(r,"validation")[s]||{},(t.isFunction(a)||t.isString(a))&&(a={fn:a}),t.isArray(a)||(a=[a]),t.reduce(a,function(e,i){return t.each(t.without(t.keys(i),"msg"),function(t){e.push({fn:w[t],val:i[t],msg:i.msg})}),e},[])),function(r,s){var a=t.extend({},d,w),c=s.fn.call(a,n,i,s.val,e,o);return!1!==c&&!1!==r&&(c&&!r?t.result(s,"msg")||c:r)},"");var r,s,a},o=function(e,i,o){i.associatedViews?i.associatedViews.push(e):i.associatedViews=[e],t.extend(i,n(e,o))},r=function(e,i){i&&e.associatedViews&&e.associatedViews.length>1?e.associatedViews=t.without(e.associatedViews,i):(delete e.validate,delete e.preValidate,delete e.isValid,delete e.associatedViews)},s=function(t){o(this.view,t,this.options)},a=function(t){r(t)},{version:"0.11.3",configure:function(e){t.extend(h,e)},bind:function(e,i){var n=(i=t.extend({},h,g,i)).model||e.model,r=i.collection||e.collection;if(void 0===n&&void 0===r)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";n?o(e,n,i):r&&(r.each(function(t){o(e,t,i)}),r.bind("add",s,{view:e,options:i}),r.bind("remove",a))},unbind:function(e,i){var n=(i=t.extend({},i)).model||e.model,o=i.collection||e.collection;n?r(n,e):o&&(o.each(function(t){r(t,e)}),o.unbind("add",s),o.unbind("remove",a))},mixin:(n=function(n,o){return{preValidate:function(e,n){var o,r=this,s={};return t.isObject(e)?(t.each(e,function(t,e){(o=r.preValidate(e,t))&&(s[e]=o)}),t.isEmpty(s)?void 0:s):i(this,e,n,t.extend({},this.attributes))},isValid:function(r){var s,a,c,u;return r=r||e(o,n),t.isString(r)?a=[r]:t.isArray(r)&&(a=r),a&&(s=p(this.attributes),t.each(this.associatedViews,function(e){t.each(a,function(n){(c=i(this,n,s[n],t.extend({},this.attributes)))?(o.invalid(e,n,c,o.selector),(u=u||{})[n]=c):o.valid(e,n,o.selector)},this)},this)),!0===r&&(u=this.validate()),u&&this.trigger("invalid",this,u,{validationError:u}),a?!u:!this.validation||this._isValid},validate:function(r,s){var a,c,u,l,h,d,f,g,m,v=this,y=!r,b=t.extend({},o,s),w=(g=v,m=(m=e(o,n))||t.keys(t.result(g,"validation")||{}),t.reduce(m,function(t,e){return t[e]=void 0,t},{})),_=t.extend({},w,v.attributes,r),x=p(_),C=r?p(r):x,F=(a=v,c=_,u=t.pick(x,t.keys(w)),h={},d=!0,f=t.clone(c),t.each(u,function(t,e){(l=i(a,e,t,f))&&(h[e]=l,d=!1)}),{invalidAttrs:h,isValid:d});if(v._isValid=F.isValid,t.each(v.associatedViews,function(e){t.each(w,function(t,i){var n=F.invalidAttrs.hasOwnProperty(i),o=C.hasOwnProperty(i);n||b.valid(e,i,b.selector),n&&(o||y)&&b.invalid(e,i,F.invalidAttrs[i],b.selector)})}),t.defer(function(){v.trigger("validated",v._isValid,v,F.invalidAttrs),v.trigger("validated:"+(v._isValid?"valid":"invalid"),v,F.invalidAttrs)}),!b.forceUpdate&&t.intersection(t.keys(F.invalidAttrs),t.keys(C)).length>0)return F.invalidAttrs}}})(null,h)}),g=f.callbacks={valid:function(t,e,i){t.$("["+i+'~="'+e+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(t,e,i,n){t.$("["+n+'~="'+e+'"]').addClass("invalid").attr("data-error",i)}},m=f.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},v=f.messages={required:"{0} is required",acceptance:"{0} must be accepted",min:"{0} must be greater than or equal to {1}",max:"{0} must be less than or equal to {1}",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"{0} must be the same as {1}",digits:"{0} must only contain digits",number:"{0} must be a number",email:"{0} must be a valid email",url:"{0} must be a valid url",inlinePattern:"{0} is invalid"},y=f.labelFormatters={none:function(t){return t},sentenceCase:function(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,function(t,e){return 0===e?t.toUpperCase():" "+t.toLowerCase()}).replace(/_/g," ")},label:function(t,e){return e.labels&&e.labels[t]||y.sentenceCase(t,e)}},b=f.attributeLoaders={inputNames:function(t){var e=[];return t&&t.$("form [name]").each(function(){/^(?:input|select|textarea)$/i.test(this.nodeName)&&this.name&&"submit"!==this.type&&-1===e.indexOf(this.name)&&e.push(this.name)}),e}},w=f.validators=(c=String.prototype.trim?function(t){return null===t?"":String.prototype.trim.call(t)}:function(t){return null===t?"":t.toString().replace(/^\s+/,"").replace(/\s+$/,"")},u=function(e){return t.isNumber(e)||t.isString(e)&&e.match(m.number)},l=function(e){return!(t.isNull(e)||t.isUndefined(e)||t.isString(e)&&""===c(e)||t.isArray(e)&&t.isEmpty(e))},{fn:function(e,i,n,o,r){return t.isString(n)&&(n=o[n]),n.call(o,e,i,r)},required:function(e,i,n,o,r){var s=t.isFunction(n)?n.call(o,e,i,r):n;return!(!s&&!l(e))&&(s&&!l(e)?this.format(v.required,this.formatLabel(i,o)):void 0)},acceptance:function(e,i,n,o){if("true"!==e&&(!t.isBoolean(e)||!1===e))return this.format(v.acceptance,this.formatLabel(i,o))},min:function(t,e,i,n){if(!u(t)||t<i)return this.format(v.min,this.formatLabel(e,n),i)},max:function(t,e,i,n){if(!u(t)||t>i)return this.format(v.max,this.formatLabel(e,n),i)},range:function(t,e,i,n){if(!u(t)||t<i[0]||t>i[1])return this.format(v.range,this.formatLabel(e,n),i[0],i[1])},length:function(e,i,n,o){if(!t.isString(e)||e.length!==n)return this.format(v.length,this.formatLabel(i,o),n)},minLength:function(e,i,n,o){if(!t.isString(e)||e.length<n)return this.format(v.minLength,this.formatLabel(i,o),n)},maxLength:function(e,i,n,o){if(!t.isString(e)||e.length>n)return this.format(v.maxLength,this.formatLabel(i,o),n)},rangeLength:function(e,i,n,o){if(!t.isString(e)||e.length<n[0]||e.length>n[1])return this.format(v.rangeLength,this.formatLabel(i,o),n[0],n[1])},oneOf:function(e,i,n,o){if(!t.include(n,e))return this.format(v.oneOf,this.formatLabel(i,o),n.join(", "))},equalTo:function(t,e,i,n,o){if(t!==o[i])return this.format(v.equalTo,this.formatLabel(e,n),this.formatLabel(i,n))},pattern:function(t,e,i,n){if(!l(t)||!t.toString().match(m[i]||i))return this.format(v[i]||v.inlinePattern,this.formatLabel(e,n),i)}});return t.each(w,function(e,i){w[i]=t.bind(w[i],t.extend({},d,w))}),f}(e),t.Validation},t.exports=n(i(4),i(0))},function(t,e,i){var n=i(4),o=i(0);n.Stickit.addHandler({selector:".autogrow",afterUpdate:function(t){t.trigger("input")}}),n.Stickit.addHandler({selector:"select.select2",initialize:function(t,e,i){t.trigger("stickit:init",i.observe);var n=o.get(i,["view","select2",i.observe],{});t.select2(n)},getVal:function(t){return t.val()}}),n.Stickit.addHandler({selector:"select[multiple].select2",onSet:function(t,e){return o.isArray(t)&&this.model.unset(e.observe,{silent:!0}),t}})},function(t,e,i){var n=i(15),o=i(3),r=i(0),s=i(1),a=n.extend({initialize:function(t){this.options=t||{},r.defaults(this.options,{padding:20}),this.tester=o("#autogrow-tester"),0===this.tester.length&&(this.tester=o('<div id="autogrow-tester" />').css({opacity:0,top:-9999,left:-9999,position:"absolute",whiteSpace:"nowrap"}),o("body").append(this.tester))},ui:{target:".autogrow"},events:{"input @ui.target":"autoGrow"},onShow:function(){r.each(this.ui.target,function(t){this.autoGrow(o(t))},this)},autoGrow:function(t){var e=t.target?o(t.target):t,i=e.is("input")?e.val():e.text();i=i.replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.tester.html(i);var n=this.tester.width()+this.options.padding;e.css({width:n})}});t.exports=a,s.prototype.set("Behaviors.AutoGrow",a)},function(t,e,i){var n=i(12),o=i(114),r=i(0),s=i(8)("loading");t.exports=n.extend({channelName:"loading",initialize:function(t){r.defaults(t,{type:"spinner",message:""}),t.container&&this[t.type]?this[t.type](t):s("invalid loading options",t)},spinner:function(t){var e=new o({message:t.message});t.container.show(e)},opacity:function(t){t.container.currentView.$el.css({opacity:.5})}})},function(t,e,i){var n=i(5),o=i(0),r=i(1),s=n.extend({className:"loading",iconPrefix:"icon-",initialize:function(){this.on("update:message",this.render),this.timeout=setTimeout(o.bind(this.fail,this),6e4),window.adminpage&&(this.iconPrefix="wc_pos-icon-")},render:function(){var t="";return o.isEmpty(this.options.message)||(t="<p>"+this.options.message+"</p>"),this.$el.html("<p>"+this.icon()+"</p>"+t),this},onBeforeDestroy:function(){clearTimeout(this.timeout)},fail:function(t){this.options.message=t||"Script Error",this.render(),this.$("i").removeClass("icon-spinner").addClass("icon-fail")},icon:function(){return'<i class="'+this.iconPrefix+"spinner "+this.iconPrefix+'lg"></i>'}});t.exports=s,r.prototype.set("Components.Loading.View",s)},function(t,e,i){var n=i(15),o=i(1),r=i(2),s=i(123),a=i(3),c=i(0),u=n.extend({ui:{target:"*[data-numpad]"},events:{"click @ui.target":"numpadPopover","open:numpad @ui.input":"numpadPopover"},onRender:function(){window.Modernizr.touch&&this.ui.target.each(function(){a(this).is("input")&&a(this).attr("readonly",!0)})},numpadPopover:function(t){var e=a(t.target).attr("name"),i=c.clone(a(t.target).data());c.defaults(i,{value:this.view.model.get(e)}),c.isString(i.original)&&(i.original=this.view.model.get(i.original));var n=new s(i);this.listenTo(n,"input",function(t){r.request("popover","close"),this.view.model.set(e,t,{numpadChange:!0})}),this._numpadPopover(n,i,t.target)},_numpadPopover:function(t,e,i){c.defaults(e,{target:i,view:t,classes:"popover-theme-arrows popover-numpad"}),r.request("popover","open",e),t.$("input").focus().select()}});t.exports=u,o.prototype.set("Behaviors.Numpad",u)},function(t,e,i){var n=i(5),o=i(1),r=i(2),s=i(0);t.exports=o.prototype.ReceiptView=n.extend({viewOptions:["data"],initialize:function(){var t=r.request("entities","get",{type:"option",name:"tax"})||{},e=this.prepare(this.model.toJSON(),t);this.mergeOptions({data:e},this.viewOptions)},templateHelpers:function(){return this.data},prepare:function(t,e){return t.incl_tax="incl"===e.tax_display_cart,t.itemized="itemized"===e.tax_total_display,s.each(t.line_items,function(t){if(t.on_sale=t.subtotal!==t.total,!t.regular_price){var e=t.quantity||1;t.regular_price=parseFloat(t.subtotal)/e}}),t.incl_tax&&s.each(t.line_items,function(t){var e=t.quantity||1;t.subtotal=parseFloat(t.subtotal)+parseFloat(t.subtotal_tax),t.total=parseFloat(t.total)+parseFloat(t.total_tax),t.regular_price=t.subtotal/e,t.price=t.total/e}),t.itemized&&s.each(t.tax_lines,function(t){t.has_tax=0!==parseFloat(t.total),t.label&&(t.title=t.label)}),t.cart_discount=t.cart_discount||t.total_discount,t.incl_tax&&(t.subtotal=parseFloat(t.subtotal)+parseFloat(t.subtotal_tax),t.cart_discount=parseFloat(t.cart_discount)+parseFloat(t.cart_discount_tax),s.each(t.shipping_lines,function(t){t.total=parseFloat(t.total)+parseFloat(t.total_tax)}),s.each(t.fee_lines,function(t){t.total=parseFloat(t.total)+parseFloat(t.total_tax)})),s.each(t.fee_lines,function(t){t.name&&(t.title=t.name)}),t.has_tax=t.total_tax&&0!==parseFloat(t.total_tax),t.has_discount=t.cart_discount&&0!==parseFloat(t.cart_discount),t.has_order_discount=t.order_discount&&0!==parseFloat(t.order_discount),t}})},function(t,e,i){var n=i(0),o=i(7),r=i(18),s=i(35),a=i(13),c=i(1);o.registerHelper("is",function(t,e,i){return t&&n.includes(e.split("|"),t)?i.fn(this):i.inverse(this)}),o.registerHelper("compare",function(t,e,i,n){if(arguments.length<3)throw new Error('Handlebars Helper "compare" needs 2 parameters');void 0===n&&(n=i,i=e,e="===");var o={"===":function(t,e){return t===e},"!==":function(t,e){return t!==e},"<":function(t,e){return t<e},">":function(t,e){return t>e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e}};if(!o[e])throw new Error('Handlebars Helper "compare" doesn\'t know the operator '+e);return o[e](t,i)?n.fn(this):n.inverse(this)}),o.registerHelper("list",function(t,e,i){return n.isArray(t)||n.isObject(t)?n.map(t,i.fn).join(e):i.fn(t)}),o.registerHelper("csv",function(t,e){return e.fn(t.join(", "))}),o.registerHelper("money",function(t,e){var i=r.settings.currency.precision,n=e.hash.precision||i;return"auto"===n&&(n=a.decimalPlaces(t)),t=a.round(t,n),e.hash.negative&&(t*=-1),r.formatMoney(t)}),o.registerHelper("number",function(t,e){var i=r.settings.number.precision,n=e.hash.precision||i;return"auto"===n&&(n=a.decimalPlaces(t)),e.hash.negative&&(t*=-1),r.formatNumber(t,n)}),o.registerHelper("formatAddress",function(t,e){var i=[[(t=t||{}).first_name,t.last_name],[t.company],[t.address_1],[t.address_2],[t.city,t.state,t.postcode]],r=n.chain(i).map(function(t){return n.compact(t).join(" ")}).compact().join("<br>\n").value();return""!==r&&e.hash.title&&(r="<h3>"+e.hash.title+"</h3>\n"+r),new o.SafeString(r)}),o.registerHelper("formatDate",function(t,e){var i=e.hash.format||"";return s(t).format(i)}),o.registerHelper("formatDay",function(t,e){var i=e.hash.format||"",n=parseInt(t,10)+1;return s().isoWeekday(n).format(i)}),o.registerHelper("debug",function(t){console.log("Current Context"),console.log("===================="),console.log(this),t&&(console.log("Value"),console.log("===================="),console.log(t))}),o.registerHelper("formatCustomerName",function(t){var e=n(t).pick(["first_name","last_name"]).values().map(function(t){return t.trim()}).compact().value().join(" ");return t&&!e&&(e=t.username),e}),o.registerHelper("namespace",function(t){return c.prototype.namespace(t)})},function(t,e,i){var n=i(15),o=i(2),r=i(0),s=i(8)("hotkey"),a=i(1),c=i(119),u=n.extend({keys:[],initialize:function(t){t=t||{},this.element=t.el,this.hotkeys=o.request("entities","get",{type:"option",name:"hotkeys"})||{}},onRender:function(){var t=this.element||document.documentElement,e=this.view;this.combokeys=new c(t),r.each(e.keyEvents,function(t,i){var n=this.hotkeys[i];if(r.isFunction(t)||(t=e[t]),!n||!t)return s("hotkey not found: "+i,this.view.keyEvents);this.combokeys.bind(n.key,function(i,n){t.call(e,i,n)}),this.keys.push(n.key)},this)},onDestroy:function(){r.each(this.keys,function(t){this.combokeys.unbind(t)},this)}});t.exports=u,a.prototype.set("Behaviors.HotKeys",u)},function(t,e,i){"use strict";t.exports=function(t){var e=this,i=e.constructor;return e.callbacks={},e.directMap={},e.sequenceLevels={},e.resetTimer,e.ignoreNextKeyup=!1,e.ignoreNextKeypress=!1,e.nextExpectedAction=!1,e.element=t,e.addEvents(),i.instances.push(e),e},t.exports.prototype.bind=i(132),t.exports.prototype.bindMultiple=i(133),t.exports.prototype.unbind=i(134),t.exports.prototype.trigger=i(135),t.exports.prototype.reset=i(136),t.exports.prototype.stopCallback=i(137),t.exports.prototype.handleKey=i(138),t.exports.prototype.addEvents=i(139),t.exports.prototype.bindSingle=i(143),t.exports.prototype.getKeyInfo=i(144),t.exports.prototype.pickBestAction=i(148),t.exports.prototype.getReverseMap=i(149),t.exports.prototype.getMatches=i(150),t.exports.prototype.resetSequences=i(152),t.exports.prototype.fireCallback=i(153),t.exports.prototype.bindSequence=i(156),t.exports.prototype.resetSequenceTimer=i(157),t.exports.prototype.detach=i(158),t.exports.instances=[],t.exports.reset=i(159),t.exports.REVERSE_MAP=null},function(t,e){function i(t,e,i,n){return!t.addEventListener&&(e="on"+e),(t.addEventListener||t.attachEvent).call(t,e,i,n),i}t.exports=i,t.exports.on=i,t.exports.off=function(t,e,i,n){return!t.removeEventListener&&(e="on"+e),(t.removeEventListener||t.detachEvent).call(t,e,i,n),i}},function(t,e,i){"use strict";t.exports=function(t){var e,n;if(e=i(122),n=i(141),"keypress"===t.type){var o=String.fromCharCode(t.which);return t.shiftKey||(o=o.toLowerCase()),o}return e[t.which]?e[t.which]:n[t.which]?n[t.which]:String.fromCharCode(t.which).toLowerCase()}},function(t,e,i){"use strict";t.exports={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",187:"plus",189:"minus",224:"meta"};for(var n=1;n<20;++n)t.exports[111+n]="f"+n;for(n=0;n<=9;++n)t.exports[n+96]=n},function(t,e,i){var n=i(17),o=i(1),r=i(7),s=i(167),a=i(168),c=i(0),u=i(3),l=i(18),h=i(2),d=i(112),p=i(169),f=i(13),g={amount:function(){return{left:{addOn:this.symbol}}},discount:function(){return{left:{btn:this.symbol},right:{btn:"%"},toggle:!0}},cash:function(){return{left:{addOn:this.symbol}}},quantity:function(){return{left:{btn:'<i class="icon icon-minus"></i>'},right:{btn:'<i class="icon icon-plus"></i>'}}}},m={amount:function(){},discount:function(){var t=h.request("entities","get",{type:"option",name:"discount_keys"})||{};return c.map(t,function(t){return t+"%"})},cash:function(t){var e=h.request("entities","get",{type:"option",name:"denominations"})||{};return c.map(p(t,e),function(t){return 0===this.value?t:f.formatNumber(t)},this)},quantity:function(){}},v=n.extend({template:r.compile(s),viewOptions:["numpad","label","value","decimal","symbol"],initialize:function(t){t=t||{},t=c.defaults(t,{label:"Numpad",numpad:"amount",value:0,decimal:l.settings.currency.decimal,symbol:l.settings.currency.symbol}),this.mergeOptions(t,this.viewOptions),this.model=new a({},t)},behaviors:{AutoGrow:{behaviorClass:d}},bindings:{'input[name="value"]':{observe:["value","percentage","active"],onGet:function(t){return"percentage"===t[2]?t[1]:t[0]},onSet:function(t,e){e.view.model.setActive(t)}},'.numpad-discount [data-btn="left"]':{updateMethod:"html",observe:["value","percentage","active"],onGet:function(t){return"percentage"===t[2]?f.formatMoney(t[0]):this.symbol}},'.numpad-discount [data-btn="right"]':{updateMethod:"html",observe:["percentage","value","active"],onGet:function(t){return"percentage"===t[2]?"%":l.toFixed(t[0],0)+"%"}}},templateHelpers:function(){return{numpad:this.numpad,label:this.label,input:g[this.numpad].call(this),keys:m[this.numpad].call(this,this.value),decimal:this.decimal,return:"return"}},ui:{input:'.numpad-header input[name="value"]',toggle:".numpad-header .input-group",common:".numpad-body .common .btn",discount:".numpad-body .discount .btn",cash:".numpad-body .cash .btn",keys:".numpad-body .btn"},events:{"click @ui.toggle a":"toggle","click @ui.common":"commonKeys","click @ui.discount":"discountKeys","click @ui.cash":"cashKeys","mousedown @ui.keys":"keyPress","keyup @ui.input":"enter"},onRender:function(){window.Modernizr.touch&&this.ui.input.attr("readonly",!0)},toggle:function(t){t.preventDefault();var e=u(t.currentTarget).data("btn");"quantity"===this.numpad&&this.model.quantity("right"===e?"increase":"decrease"),"discount"===this.numpad&&(this.ui.toggle.toggleClass("toggle"),this.model.toggle("percentage"))},commonKeys:function(t){t.preventDefault();var e=u(t.currentTarget).data("key");switch(e){case"ret":return void this.trigger("input",this.model.getFloatValue(),this.model);case"del":this._hasSelection&&this.model.clearInput(),this.model.backSpace();break;case"+/-":this.model.plusMinus();break;case".":this.model.decimal();break;default:this._hasSelection&&this.model.clearInput(),this.model.key(e)}},discountKeys:function(t){t.preventDefault();var e=u(t.currentTarget).data("key");this.model.set("active","percentage"),this.model.set("percentage",e.replace("%","")),this.ui.toggle.addClass("toggle")},cashKeys:function(t){t.preventDefault();var e=u(t.currentTarget).data("key");e=f.unformat(e),this.model.clearInput().key(e)},keyPress:function(){var t=window.getSelection();this._hasSelection=t.toString()===this.ui.input.val()},enter:function(t){13===t.which&&this.trigger("input",this.model.getFloatValue(),this.model)}});t.exports=v,o.prototype.set("Components.Numpad.View",v)},function(t,e,i){var n=i(9),o=i(1),r=i(0);t.exports=o.prototype.InfiniteListView=n.CompositeView.extend({className:"list-infinite",template:function(){return'<div></div><ul></ul><div><i class="icon icon-spinner"></i>'},constructor:function(){n.CompositeView.apply(this,arguments),this.listenTo(this.collection.superset(),{"start:processQueue":this.startLoading,"end:processQueue":this.endLoading,"end:fullSync":this.checkOverflow}),this.on({all:r.debounce(this.checkOverflow,250)}),r.bindAll(this,"onScroll","loadMore","getOverflow")},onShow:function(){this.container=this.$el.parent()[0],this.$el.parent().scroll(r.throttle(this.onScroll,250))},onScroll:function(){this.getOverflow()<100&&this.loadMore()},checkOverflow:function(){this.getOverflow()<100&&this.loadMore()},getOverflow:function(){return this.container.scrollHeight-this.container.clientHeight-this.container.scrollTop},loadMore:function(){if(this.collection.hasNextPage())return this.collection.appendNextPage();this.collection.superset().queue.length>0&&this.remoteFetchMore()},remoteFetchMore:function(){this.collection.superset().processQueue({filter:this.collection.getRemoteFilter()})},startLoading:function(){this.toggleLoading(!0)},endLoading:function(){this.toggleLoading(!1)},toggleLoading:function(t){this.$el.toggleClass("loading",t)}})},function(t,e,i){var n=i(126);i(128);var o=i(60),r=i(130),s=i(91),a=i(164),c=i(165),u=i(100),l=i(106),h=i(166),d=i(170),p=i(211),f=i(220);i(117);var g=new n;g.entitiesService=new o({app:g}),g.headerService=new r({headerContainer:g.layout.getRegion("header"),menuContainer:g.layout.getRegion("menu")}),g.posApp=new d({container:g.layout.getRegion("main")}),g.supportApp=new p({container:g.layout.getRegion("main")}),g.printApp=new f({container:g.layout.getRegion("main")}),g.modalService=new s({container:g.layout.getRegion("modal")}),g.popoverService=new a,g.printService=new c,g.tabsService=new u,g.buttonsService=new l,g.numpadService=new h,t.exports=g},function(t,e,i){var n=i(1),o=i(4),r=i(127),s=i(8)("app");t.exports=n.extend({initialize:function(){this.layout=new r,this.layout.render()},onBeforeStart:function(){s("starting WooCommerce POS app"),this.headerService.start()},onStart:function(){o.history.start()}})},function(t,e,i){var n=i(10),o=i(3),r=i(2),s=r.channel("global");t.exports=n.extend({el:"#page",template:function(){return'<header id="header"></header><div id="menu"></div><div id="tabs" class="tabs"></div><main id="main"></main><div id="modal"></div>'},regions:{header:"#header",menu:"#menu",tabs:"#tabs",main:"#main",modal:"#modal"},initialize:function(){this.getRegion("main").on("show",this.setup,this),s.on("tab:label",this.updateTabLabel,this)},setup:function(t){t.columns&&2===t.columns?(this.$el.addClass("two-column"),this.showTabs()):(this.$el.removeClass("two-column"),this.getRegion("tabs").empty())},showTabs:function(){var t=this.getRegion("main").tabs=r.request("tabs","view",{tabs:[{id:"left"},{id:"right"}]});this.listenTo(t.collection,"active:tab",this.toggleLayout),this.getRegion("tabs").show(t)},toggleLayout:function(t){o("#main").removeClass("left-active right-active"),o("#main").addClass(t.id+"-active")},updateTabLabel:function(t){this.getRegion("main").tabs.setLabel(t)}})},function(t,e,i){var n=i(4),o=i(2),r=i(0);n.idbSync=i(129),n.ajaxSync=n.sync,n.$.ajaxSetup({data:{security:function(){return o.request("entities","get",{type:"option",name:"nonce"})}},beforeSend:function(t){t.setRequestHeader("X-WC-POS",1)},timeout:5e4}),n.$(document).ajaxError(function(t,e,i,n){o.trigger("global","error",{jqXHR:e,thrownError:n})}),n.sync=function(t,e,i){if(!i.remote&&(e.db||e.collection&&e.collection.db))return n.idbSync.apply(this,[t,e,i]);if(i.beforeSend=function(t){t.setRequestHeader("X-WC-POS",1);var e=o.request("entities","get",{type:"option",name:"rest_nonce"});t.setRequestHeader("X-WP-Nonce",e)},"create"===t||"update"===t){e.unset("status",{silent:!0});var s=e.get("regular_price"),a=e.get("sale_price");void 0!==s&&e.set({regular_price:s+""},{silent:!0}),void 0!==a&&e.set({sale_price:a+""},{silent:!0});var c=e.get("line_items");if(void 0!==c){var u=[];r.each(c,function(t){r.set(t,"price",r.get(t,"price")+""),r.set(t,"subtotal",r.get(t,"subtotal")+""),r.set(t,"subtotal_tax",r.get(t,"subtotal_tax")+""),r.set(t,"total_tax",r.get(t,"total_tax")+""),r.set(t,"total",r.get(t,"total")+""),u.push(t)}),e.set({line_items:u},{silent:!0})}var l=e.get("shipping_lines");if(void 0!==l){u=[];r.each(l,function(t){r.set(t,"price",r.get(t,"price")+""),r.set(t,"subtotal",r.get(t,"subtotal")+""),r.set(t,"subtotal_tax",r.get(t,"subtotal_tax")+""),r.set(t,"total_tax",r.get(t,"total_tax")+""),r.set(t,"total",r.get(t,"total")+""),u.push(t)}),e.set({shipping_lines:u},{silent:!0})}var h=e.get("fee_lines");if(void 0!==h){u=[];r.each(h,function(t){r.set(t,"price",r.get(t,"price")+""),r.set(t,"subtotal",r.get(t,"subtotal")+""),r.set(t,"subtotal_tax",r.get(t,"subtotal_tax")+""),r.set(t,"total_tax",r.get(t,"total_tax")+""),r.set(t,"total",r.get(t,"total")+""),u.push(t)}),e.set({fee_lines:u},{silent:!0})}}return"patch"===t&&i.attrs&&(i.attrs.status&&(i.attrs.status=void 0),i.attrs.regular_price&&(i.attrs.regular_price+=""),i.attrs.sale_price&&(i.attrs.sale_price+="")),n.ajaxSync.apply(this,[t,e,i])}},function(t,e,i){var n=i(3),o=function(){},r={read:function(t,e,i){return t.id?i.read(t,e):i.getAll(e)},create:function(t,e,i){return t.id?i.update(t,e):i.create(t,e)},update:function(t,e,i){return t.id?i.update(t,e):i.create(t,e)},delete:function(t,e,i){if(t.id)return i.destroy(t,e)}};t.exports=function(t,e,i){var s=new n.Deferred,a=e.db||e.collection.db,c=i.success||o,u=i.success||o;return i.success=function(t){c.apply(this,arguments),s.resolve(t)},i.error=function(t){u.apply(this,arguments),s.reject(t)},a.open().then(function(){if(r[t])return r[t](e,i,a)}),s.promise()}},function(t,e,i){(function(e){var n=i(12),o=i(131),r=i(161),s=i(1),a=i(2),c=a.channel("router"),u=i(163),l=i(0),h=e.Modernizr;n=n.extend({channelName:"header",initialize:function(t){t=t||{},this.header=t.headerContainer,this.menu=t.menuContainer,this.listenToOnce(c,{route:this.browserCheck}),this.channel.reply({"update:title":this.updateTitle},this)},onStart:function(){this.showTitleBar(),this.showMenu()},showTitleBar:function(){var t=new o;this.header.show(t)},updateTitle:function(t){this.header.currentView.update(t)},showMenu:function(){var t=new r;this.channel.reply({"open:menu":t.open,"close:menu":t.close},t),this.menu.show(t)},browserCheck:function(){if(!l.every(["flexbox","indexeddb","smil"],function(t){return h[t]})){var t=new u;a.request("modal","open",t)}},onStop:function(){this.channel.reset()}});t.exports=n,s.prototype.set("HeaderApp.Service",n)}).call(e,i(33))},function(t,e,i){var n=i(5),o=i(1),r=i(118),s=i(89),a=i(2),c=i(160),u=n.extend({template:"header",initialize:function(){var t=a.request("entities","get",{type:"option",name:"store"});this.storeName=t.name},templateHelpers:function(){return{name:this.storeName}},ui:{menu:"#menu-btn"},events:{"click @ui.menu":"openMenu"},keyEvents:{help:"showHelpModal"},behaviors:{HotKeys:{behaviorClass:r},Dropdown:{behaviorClass:s,position:"bottom right"}},update:function(t){var e=t||this.storeName;this.$("h1").text(e)},openMenu:function(t){t.preventDefault(),a.request("header","open:menu")},showHelpModal:function(){var t=new c;a.request("modal","open",t)}});t.exports=u,o.prototype.set("HeaderApp.Views.TitleBar",u)},function(t,e,i){"use strict";t.exports=function(t,e,i){return t=t instanceof Array?t:[t],this.bindMultiple(t,e,i),this}},function(t,e,i){"use strict";t.exports=function(t,e,i){for(var n=0;n<t.length;++n)this.bindSingle(t[n],e,i)}},function(t,e,i){"use strict";t.exports=function(t,e){return this.bind(t,function(){},e)}},function(t,e,i){"use strict";t.exports=function(t,e){return this.directMap[t+":"+e]&&this.directMap[t+":"+e]({},t),this}},function(t,e,i){"use strict";t.exports=function(){return this.callbacks={},this.directMap={},this}},function(t,e,i){"use strict";t.exports=function(t,e){if((" "+e.className+" ").indexOf(" combokeys ")>-1)return!1;var i=e.tagName.toLowerCase();return"input"===i||"select"===i||"textarea"===i||e.isContentEditable}},function(t,e,i){"use strict";t.exports=function(t,e,n){var o,r,s,a,c=this,u={},l=0,h=!1;for(o=c.getMatches(t,e,n),r=0;r<o.length;++r)o[r].seq&&(l=Math.max(l,o[r].level));for(r=0;r<o.length;++r)if(o[r].seq){if(o[r].level!==l)continue;h=!0,u[o[r].seq]=1,c.fireCallback(o[r].callback,n,o[r].combo,o[r].seq)}else h||c.fireCallback(o[r].callback,n,o[r].combo);a="keypress"===n.type&&c.ignoreNextKeypress,s=i(88),n.type!==c.nextExpectedAction||s(t)||a||c.resetSequences(u),c.ignoreNextKeypress=h&&"keydown"===n.type}},function(t,e,i){"use strict";t.exports=function(){var t=this,e=i(120),n=t.element;t.eventHandler=i(140).bind(t),e(n,"keypress",t.eventHandler),e(n,"keydown",t.eventHandler),e(n,"keyup",t.eventHandler)}},function(t,e,i){"use strict";t.exports=function(t){var e;"number"!=typeof t.which&&(t.which=t.keyCode);var n=i(121)(t);n&&("keyup"!==t.type||this.ignoreNextKeyup!==n?(e=i(142),this.handleKey(n,e(t),t)):this.ignoreNextKeyup=!1)}},function(t,e,i){"use strict";t.exports={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}},function(t,e,i){"use strict";t.exports=function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}},function(t,e,i){"use strict";t.exports=function(t,e,i,n,o){var r=this;r.directMap[t+":"+i]=e;var s,a=(t=t.replace(/\s+/g," ")).split(" ");a.length>1?r.bindSequence(t,a,e,i):(s=r.getKeyInfo(t,i),r.callbacks[s.key]=r.callbacks[s.key]||[],r.getMatches(s.key,s.modifiers,{type:s.action},n,t,o),r.callbacks[s.key][n?"unshift":"push"]({callback:e,modifiers:s.modifiers,action:s.action,seq:n,level:o,combo:t}))}},function(t,e,i){"use strict";t.exports=function(t,e){var n,o,r,s,a,c,u=[];for(n=i(145)(t),s=i(146),a=i(147),c=i(88),r=0;r<n.length;++r)s[o=n[r]]&&(o=s[o]),e&&"keypress"!==e&&a[o]&&(o=a[o],u.push("shift")),c(o)&&u.push(o);return{key:o,modifiers:u,action:e=this.pickBestAction(o,u,e)}}},function(t,e,i){"use strict";t.exports=function(t){return"+"===t?["+"]:t.split("+")}},function(t,e,i){"use strict";t.exports={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"}},function(t,e,i){"use strict";t.exports={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"}},function(t,e,i){"use strict";t.exports=function(t,e,i){return i||(i=this.getReverseMap()[t]?"keydown":"keypress"),"keypress"===i&&e.length&&(i="keydown"),i}},function(t,e,i){"use strict";t.exports=function(){var t,e=this.constructor;if(!e.REVERSE_MAP)for(var n in e.REVERSE_MAP={},t=i(122))n>95&&n<112||t.hasOwnProperty(n)&&(e.REVERSE_MAP[t[n]]=n);return e.REVERSE_MAP}},function(t,e,i){"use strict";t.exports=function(t,e,n,o,r,s){var a,c,u,l,h=this,d=[],p=n.type;"keypress"!==p||n.code&&"Arrow"===n.code.slice(0,5)||(h.callbacks["any-character"]||[]).forEach(function(t){d.push(t)});if(!h.callbacks[t])return d;for(u=i(88),"keyup"===p&&u(t)&&(e=[t]),a=0;a<h.callbacks[t].length;++a)if(c=h.callbacks[t][a],(o||!c.seq||h.sequenceLevels[c.seq]===c.level)&&p===c.action&&(l=i(151),"keypress"===p&&!n.metaKey&&!n.ctrlKey||l(e,c.modifiers))){var f=!o&&c.combo===r,g=o&&c.seq===o&&c.level===s;(f||g)&&h.callbacks[t].splice(a,1),d.push(c)}return d}},function(t,e,i){"use strict";t.exports=function(t,e){return t.sort().join(",")===e.sort().join(",")}},function(t,e,i){"use strict";t.exports=function(t){t=t||{};var e,i=!1;for(e in this.sequenceLevels)t[e]?i=!0:this.sequenceLevels[e]=0;i||(this.nextExpectedAction=!1)}},function(t,e,i){"use strict";t.exports=function(t,e,n,o){this.stopCallback(e,e.target||e.srcElement,n,o)||!1===t(e,n)&&(i(154)(e),i(155)(e))}},function(t,e,i){"use strict";t.exports=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},function(t,e,i){"use strict";t.exports=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}},function(t,e,i){"use strict";t.exports=function(t,e,n,o){var r=this;function s(e){return function(){r.nextExpectedAction=e,++r.sequenceLevels[t],r.resetSequenceTimer()}}function a(e){var s;r.fireCallback(n,e,t),"keyup"!==o&&(s=i(121),r.ignoreNextKeyup=s(e)),setTimeout(function(){r.resetSequences()},10)}r.sequenceLevels[t]=0;for(var c=0;c<e.length;++c){var u=c+1===e.length?a:s(o||r.getKeyInfo(e[c+1]).action);r.bindSingle(e[c],u,o,t,c)}}},function(t,e,i){"use strict";t.exports=function(){var t=this;clearTimeout(t.resetTimer),t.resetTimer=setTimeout(function(){t.resetSequences()},1e3)}},function(t,e,i){var n=i(120).off;t.exports=function(){var t=this.element;n(t,"keypress",this.eventHandler),n(t,"keydown",this.eventHandler),n(t,"keyup",this.eventHandler)}},function(t,e,i){"use strict";t.exports=function(){this.instances.forEach(function(t){t.reset()})}},function(t,e,i){var n=i(5),o=i(24),r=i(2),s=i(1),a=i(6),c=n.extend({template:"modals.hotkeys",initialize:function(){this.hotkeys=r.request("entities","get",{type:"option",name:"hotkeys"}),this.modal={header:{title:a.t("titles.hotkeys")},footer:{show:!1}}},behaviors:{Tooltip:{behaviorClass:o}},templateHelpers:function(){return this.hotkeys}});t.exports=c,s.prototype.set("HeaderApp.Views.HelpModal",c)},function(t,e,i){var n=i(5),o=i(3),r=i(0),s=i(1),a=i(2),c=i(7),u=i(162),l=n.extend({tagName:"ul",template:c.compile(u),initialize:function(){r.bindAll(this,"open","close")},templateHelpers:function(){return a.request("entities","get",{type:"option",name:"menu"})},ui:{menuItem:"li a"},events:{"click @ui.menuItem":"close"},open:function(){o("body").addClass("menu-open"),this.backdrop=o('<div class="modal-backdrop in"></div>'),this.backdrop.height("100%"),o("body").append(this.backdrop),this.backdrop.on("click",this.close)},close:function(){o("body").removeClass("menu-open"),this.backdrop&&(this.backdrop.remove(),delete this.backdrop)}});t.exports=l,s.prototype.set("HeaderApp.Views.Menu",l)},function(t,e){t.exports='{{#each []}}\r\n<li class="{{id}}">\r\n  <a href="{{href}}">\r\n    <i class="icon-{{id}} icon-lg"></i>\r\n    {{label}}\r\n  </a>\r\n</li>\r\n{{/each}}'},function(t,e,i){var n=i(5),o=i(2),r=i(1),s=i(3),a=i(6),c=n.extend({template:function(){return'<i class="icon icon-spinner"></i>'},modal:{footer:{buttons:[{action:"close"}]}},initialize:function(){var t=this,e=o.request("entities","get",{type:"option",name:"ajaxurl"});s.get(e,{action:"wc_pos_get_modal",template:"browser"}).always(function(e){t.update(e)}),this.modal.header={title:a.t("messages.browser")}},update:function(t){this.$el.html(t)}});t.exports=c,r.prototype.set("HeaderApp.Views.BrowserModal",c)},function(t,e,i){var n=i(12),o=i(38),r=i(3),s=i(0),a=i(9),c=i(1).prototype.namespace("popover"),u=o.createContext({classPrefix:c}),l={position:"bottom center",openOn:void 0,classes:c+"-theme-arrows",constrainToWindow:!0,constrainToScrollParent:!1};t.exports=n.extend({channelName:"popover",initialize:function(){this.channel.reply({open:this.open,close:this.close},this),s.bindAll(this,"onClick")},open:function(t){return t=s.extend({},l,t),this.close(),this.drop=new u(t),this.drop.region=new a.Region({el:this.drop.content}),r(document).on("click",this.onClick),t.view.on("show",this.drop.open,this.drop),this.drop.region.show(t.view),this.drop},close:function(){this.drop&&(this.drop.region.empty(),this.drop.destroy(),this.drop=void 0,r(document).off("click",this.onClick))},onClick:function(t){t.target===this.drop.target||r(t.target).closest(".popover").length||this.close()}})},function(t,e,i){var n=i(12),o=i(7),r=i(3),s=i(0),a=i(8)("print"),c=i(2),u=i(1);t.exports=n.extend({channelName:"print",initialize:function(){s.bindAll(this,"mediaQueryListener","beforePrint","afterPrint"),this.start()},onStart:function(){this.channel.reply({print:this.print},this)},onStop:function(){this.channel.reset()},print:function(t){var e=this.template(t),i=this.init();this.deferred=r.Deferred(),i.document.open(),i.document.write(e),i.document.close();var n=function(){i.focus(),i.print()},o=i.document.getElementsByTagName("img")[0];return o?o.onload=n:n(),this.deferred},init:function(){frames.iframe.matchMedia&&frames.iframe.matchMedia("print").addListener(this.mediaQueryListener);return frames.iframe},mediaQueryListener:function(t){t.matches?this.beforePrint():s.delay(this.afterPrint)},beforePrint:function(){a("printing ...")},afterPrint:function(){a("printing finished"),this.deferred.resolve()},template:function(t){if((t=t||{}).model){var e=c.request("entities","get",{type:"option",name:"tax"})||{},i=u.prototype.ReceiptView.prototype.prepare(t.model.toJSON(),e),n=s.get(o.Templates,["print","receipt"],"");return o.compile(n)(i)}}})},function(t,e,i){var n=i(12),o=i(123);t.exports=n.extend({channelName:"numpad",initialize:function(){this.channel.reply({view:this.view},this)},view:function(t){return new o(t)}})},function(t,e){t.exports='<div class="numpad numpad-{{numpad}}">\r\n  <div class="popover-header numpad-header">\r\n    <strong class="title">{{label}}</strong>\r\n\r\n    {{#if input}}\r\n      <div class="input-group {{#if input.toggle}}btn-group-toggle{{/if}}">\r\n        {{#if input.left}}\r\n          {{#if input.left.addOn}}<span class="input-group-addon">{{{input.left.addOn}}}</span>{{/if}}\r\n          {{#if input.left.btn}}<span class="input-group-btn"><a href="#" data-btn="left" class="btn btn-secondary">{{{input.left.btn}}}</a></span>{{/if}}\r\n        {{/if}}\r\n        <input type="text" name="value" class="form-control autogrow">\r\n        {{#if input.right}}\r\n          {{#if input.right.btn}}<span class="input-group-btn"><a href="#" data-btn="right" class="btn btn-secondary">{{{input.right.btn}}}</a></span>{{/if}}\r\n          {{#if input.right.addOn}}<span class="input-group-addon">{{{input.right.addOn}}}</span>{{/if}}\r\n        {{/if}}\r\n      </div>\r\n    {{/if}}\r\n\r\n  </div>\r\n\r\n  <div class="popover-body numpad-body">\r\n    <div class="keys common three-cols">\r\n      <div class="row">\r\n        <button data-key="1" class="btn">1</button>\r\n        <button data-key="2" class="btn">2</button>\r\n        <button data-key="3" class="btn">3</button>\r\n      </div>\r\n      <div class="row">\r\n        <button data-key="4" class="btn">4</button>\r\n        <button data-key="5" class="btn">5</button>\r\n        <button data-key="6" class="btn">6</button>\r\n      </div>\r\n      <div class="row">\r\n        <button data-key="7" class="btn">7</button>\r\n        <button data-key="8" class="btn">8</button>\r\n        <button data-key="9" class="btn">9</button>\r\n      </div>\r\n      <div class="row">\r\n        <button data-key="0" class="btn">0</button>\r\n        <button data-key="00" class="btn">00</button>\r\n        <button data-key="." class="btn decimal">{{{decimal}}}</button>\r\n      </div>\r\n    </div>\r\n    <div class="keys common extra-keys">\r\n      <button data-key="del" class="btn"><i class="icon-delete"><span>del</span></i></button>\r\n      <button data-key="+/-" class="btn">+/-</button>\r\n      <button data-key="ret" class="btn two-rows return"><small>{{return}}</small></button>\r\n    </div>\r\n\r\n    {{#if keys}}\r\n      <div class="keys extra-keys {{numpad}}">\r\n        {{#each keys}}\r\n          <button data-key="{{this}}" class="btn">{{this}}</button>\r\n        {{/each}}\r\n      </div>\r\n    {{/if}}\r\n\r\n  </div>\r\n</div>'},function(t,e,i){var n=i(4),o=i(0);t.exports=n.Model.extend({dec:"",defaults:{active:"value"},precision:4,initialize:function(t,e){e=e||{},this.numpad=e.numpad,e.value&&this.set({value:e.value.toString()}),e.precision&&(this.precision=e.precision),e.original&&this.initPercentage(e)},initPercentage:function(t){"off"===t.percentage&&(this.percentageOff=!0),this.set({original:t.original.toString()}),this.set({percentage:this.calcPercentage()}),this.on({"change:value":function(){this.set({percentage:this.calcPercentage()},{silent:!0})},"change:percentage":function(){this.set({value:this.calcValue()},{silent:!0})}})},getFloatValue:function(){return parseFloat(this.get("value"))},getActive:function(t){var e=this.get(this.get("active"));return"float"===t?parseFloat(e):e.toString()},setActive:function(t){"."===this.dec&&(this.dec=""),o.isNaN(t)&&(t=0),this.set(this.get("active"),this.round(t))},backSpace:function(){var t=this.getActive().slice(0,-1);return"."===t.slice(-1)&&(t=t.slice(0,-1)),this.setActive(t),this},plusMinus:function(){var t=-1*this.getActive("float");return this.setActive(t),this},clearInput:function(){return this.setActive(""),this},key:function(t){var e=this.getActive();return this.decimalPlaces(e)<this.precision&&this.setActive(e+this.dec+t),this},decimal:function(){return this.dec=-1===this.getActive().indexOf(".")?".":"",this},quantity:function(t){var e=this.getActive("float");return this.setActive("increase"===t?++e:--e),this},calcPercentage:function(){var t=parseFloat(this.get("value"))/parseFloat(this.get("original"))*100;return this.percentageOff?this.round(100-t):this.round(t)},calcValue:function(){var t=parseFloat(this.get("percentage")),e=parseFloat(this.get("original")),i=t/100;return this.percentageOff?this.round((1-i)*e):this.round(i*e)},toggle:function(t){this.set({active:t===this.get("active")?"value":t})},round:function(t){return t=t.toString(),this.decimalPlaces(t)>this.precision&&(t=parseFloat(t).toFixed(this.precision),t=parseFloat(t).toString()),t},decimalPlaces:function(t){return t.replace(/^-?\d*\.?|0+$/g,"").length}})},function(t,e,i){var n=i(0),o=i(18);function r(t,e){var i,n=Math.ceil(t/e)*e;return i=n,parseFloat(o.toFixed(i,2))}t.exports=function(t,e){var i=[t];return 0===t?e.notes.slice(-4):(n.pull(e.coins,.01,.02),n.each(e.coins,function(e){i.push(r(t,e))}),i=n.chain(i).uniq().sortBy().value(),t>e.notes[0]&&i.slice(0,3),n.each(e.notes,function(e){i.push(r(t,e))}),n.chain(i).uniq().sortBy().value().slice(1,5))}},function(t,e,i){var n=i(1),o=i(39),r=i(171),s=i(172),a=i(184),c=i(195),u=i(203),l=i(2),h=i(4),d=o.extend({routes:{"(cart)(/:id)(/)":"showCart","checkout(/:id)(/)":"showCheckout","receipt(/:id)(/)":"showReceipt"},initialize:function(t){this.container=t.container,this.channel.reply({"show:cart":this.showCart,"show:checkout":this.showCheckout,"show:receipt":this.showReceipt,"add:to:cart":this.addToCart},this)},onBeforeEnter:function(){this.layout=new r,this.container.show(this.layout),this.initOrders()},initOrders:function(){this.orders||(this.orders=l.request("entities","get",{type:"collection",name:"orders"}),this.listenTo(this.orders,{add:this.addOrder,remove:this.removeOrder}))},onBeforeRoute:function(){this.showProducts(),l.request("header","update:title","")},setActiveTab:function(){var t=""===h.history.getFragment()?"left":"right";this.container.tabs.setActive(t)},showProducts:function(){this.layout.getRegion("left").hasView()||new s({container:this.layout.getRegion("left")}).enter()},showCart:function(){return new a({container:this.layout.getRegion("right"),collection:this.orders})},showCheckout:function(){return new c({container:this.layout.getRegion("right"),collection:this.orders})},showReceipt:function(){var t=l.request("entities","get",{type:"option",name:"auto_print"});return new u({container:this.layout.getRegion("right"),collection:this.orders,autoPrint:t})},addToCart:function(t){this._currentRoute instanceof a&&this.orders.addToCart(t)},addOrder:function(t){this._currentRoute instanceof a&&t.isEditable()&&this.execute(this.showCart,[t.id])},removeOrder:function(){this._currentRoute instanceof a&&(h.history.navigate(""),this.execute(this.showCart))}});t.exports=d,n.prototype.set("POSApp.Router",d)},function(t,e,i){var n=i(10);t.exports=n.extend({columns:2,template:function(){return'<section id="left"></section><section id="right"></section>'},regions:{left:"#left",right:"#right"}})},function(t,e,i){var n=i(11),o=i(173),r=i(174),s=i(176),a=i(183),c=i(2),u=i(0),l=i(6);t.exports=n.extend({initialize:function(t){this.container=t.container,this.filtered=c.request("entities","get",{type:"filtered",name:"products",perPage:10}),this.setTabLabel({tab:"left",label:l.t("titles.products")})},fetch:function(){var t=this.filtered.superset();if(t.isNew())return t.fetch().then(function(){t.fullSync()});this.filtered.resetFilters().removeSort().setPage(0)},render:function(){this.layout=new o,this.listenTo(this.layout,"show",function(){this.showActions(),this.showTabs(),this.showProducts(),this.showPagination()}),this.container.show(this.layout)},showActions:function(){var t=new r({collection:this.filtered});this.layout.getRegion("actions").show(t)},showTabs:function(){var t=c.request("tabs","view",{tabs:this.tabsArray()});this.listenTo(t.collection,"active:tab",function(t){this.filtered.query("tab",t.id)}),this.layout.getRegion("tabs").show(t),this.tabs=t},showProducts:function(){var t=new s({collection:this.filtered});this.layout.getRegion("list").show(t)},tabsArray:function(){var t=c.request("entities","get",{type:"option",name:"tabs"});return u.map(t)},showPagination:function(){var t=new a({collection:this.filtered});this.layout.getRegion("footer").show(t)}})},function(t,e,i){var n=i(7),o=i(10),r=i(1),s=o.extend({template:n.compile('<div class="panel-header list-actions products-header"></div><div class="products-tabs"></div><div class="panel-body list products-list list-striped"></div><div class="panel-footer products-footer"></div>'),regions:{actions:".products-header",tabs:".products-tabs",list:".products-list",footer:".products-footer"},attributes:{class:"panel products"}});t.exports=s,r.prototype.set("POSApp.Products.Layout",s)},function(t,e,i){var n=i(5),o=i(1),r=i(175),s=i(118),a=i(2),c=i(89),u=i(3),l=n.extend({template:"pos.products.filter",initialize:function(){var t=this.collection,e=this;this.listenTo(t.superset(),"match:barcode",function(i){t.once("paginated:change:page",function(){e.triggerMethod("clear"),e.ui.searchField.blur()}),a.request("router","add:to:cart",i)})},behaviors:{Filter:{behaviorClass:r},HotKeys:{behaviorClass:s},Dropdown:{behaviorClass:c}},keyEvents:{search:"barcodeModeOff",barcode:"barcodeModeOn"},ui:{modeIcon:'*[data-toggle="dropdown"] i',searchBtn:'*[data-action="search"]',barcodeBtn:'*[data-action="barcode"]',searchField:"input[type=search]"},onRender:function(){this.barcodeModeOff()},onDropdownSelect:function(t){if("barcode"===u(t.currentTarget).data("action"))return this.barcodeModeOn();this.barcodeModeOff()},toggleBarcodeMode:function(){if("barcode"===this._mode)return this.barcodeModeOff();this.barcodeModeOn()},barcodeModeOn:function(t){t&&t.preventDefault(),this._mode="barcode",this.ui.modeIcon.removeClass("icon-search").addClass("icon-barcode"),this.ui.searchField.attr("placeholder",this.ui.barcodeBtn.text()).focus().trigger("keyup")},barcodeModeOff:function(t){t&&t.preventDefault(),this._mode=void 0,this.ui.modeIcon.removeClass("icon-barcode").addClass("icon-search"),this.ui.searchField.attr("placeholder",this.ui.searchBtn.text()).focus().trigger("keyup")}});t.exports=l,o.prototype.set("POSApp.Products.Actions",l)},function(t,e,i){var n=i(15),o=i(0),r=i(1),s=i(119),a=i(2),c=n.extend({initialize:function(){this.listenTo(this.view.options.collection.superset(),{"start:fullSync":this.syncStart,"end:fullSync":this.syncEnd}),this.hotkeys=a.request("entities","get",{type:"option",name:"hotkeys"})||{},this.combokeys=new s(document.documentElement),this.combokeys.bind(this.hotkeys.sync.key,o.bind(this.sync,this))},ui:{searchField:"input[type=search]",clearBtn:".clear",clear:'*[data-action="clear"]',sync:'*[data-action="sync"]'},events:{"keyup @ui.searchField":"query","click @ui.clear":"clear","click @ui.sync":"sync"},query:function(){var t=this.ui.searchField.val();if(""===t)return this.clear();this.view._mode&&(t=[{type:"prefix",prefix:this.view._mode,query:t}]),this.ui.clearBtn.show(),this._query(t)},_query:o.debounce(function(t){this.view.collection.query(t).firstPage()},149),clear:function(t){t&&t.preventDefault(),this.view.collection.removeFilter("search"),this.ui.searchField.val(""),this.ui.clearBtn.hide()},onRender:function(){if(this.view.collection.hasFilter("search")){var t=this.view.collection._filtered._query;t&&this.ui.searchField.val(t).trigger("keyup")}},sync:function(t){t&&t.preventDefault(),this.view.collection.superset().fullSync()},syncStart:function(){this.ui.sync.children("i").addClass("icon-spin")},syncEnd:function(){this.ui.sync.children("i").removeClass("icon-spin")},onDestroy:function(){this.combokeys.unbind(this.hotkeys.sync.key)},onClear:function(){this.clear()}});t.exports=c,r.prototype.set("Behaviors.Filter",c)},function(t,e,i){var n=i(5),o=i(124),r=i(177),s=i(1),a=i(6),c=n.extend({tagName:"li",className:"empty",template:function(){return a.t("messages.no-products")}}),u=o.extend({childView:r,emptyView:c,childViewContainer:"ul"});t.exports=u,s.prototype.set("POSApp.Products.List",u)},function(t,e,i){var n=i(1),o=i(10),r=i(178),s=i(181),a=o.extend({tagName:"li",className:function(){return this.model.get("type")},template:function(){return'<div class="list-item"></div><div class="list-drawer"></div>'},regions:{item:".list-item",drawer:".list-drawer"},onRender:function(){var t=new r({model:this.model});this.listenTo(t,{"open:drawer":this.openDrawer,"close:drawer":this.closeDrawer,"toggle:drawer":this.toggleDrawer}),this.getRegion("item").show(t)},openDrawer:function(t){(t=t||{}).model=this.model,t.className="variations";var e=new s(t);this.getRegion("drawer").show(e),this.$el.addClass("drawer-open")},closeDrawer:function(){var t=this.getRegion("drawer");t.$el.slideUp(250,function(){t.empty(),t.$el.show()}),this.$el.removeClass("drawer-open")},toggleDrawer:function(t){var e=this.getRegion("drawer"),i=e.hasView();if(i&&t.filter)return e.currentView.filterVariations(t.filter);i?this.closeDrawer():this.openDrawer(t)}});t.exports=a,n.prototype.set("POSApp.Products.Item.Layout",a)},function(t,e,i){var n=i(5),o=i(1),r=i(3),s=i(0),a=i(24),c=i(2),u=i(179),l=n.extend({template:"pos.products.product",className:"list-row",ui:{add:'a[data-action="add"]',popover:'a[data-action="variations"]',filter:".title ul.variations li a",open:'a[data-action="expand"]',close:'a[data-action="close"]'},events:{"click @ui.add":"addToCart","click @ui.popover":"variationsPopover","click @ui.filter":"variationsDrawer"},triggers:{"click @ui.open":"open:drawer","click @ui.close":"close:drawer toggle:reset"},modelEvents:{"change:updated_at":"render"},behaviors:{Tooltip:{behaviorClass:a,html:!0}},addToCart:function(t){t.preventDefault(),c.request("router","add:to:cart",{model:this.model})},variationsPopover:function(t){t.preventDefault();var e=new u({model:this.model});this.listenTo(e,"add:to:cart",function(t){var e=t.collection.models[0].toJSON();c.request("router","add:to:cart",e),c.request("popover","close")});var i=s.extend({view:e,target:t.target,position:"right middle"},e.popover);c.request("popover","open",i)},variationsDrawer:function(t){t.preventDefault();var e={},i=r(t.target).data("name");i&&(e.filter={name:i,option:r(t.target).text()}),this.trigger("toggle:drawer",e)},templateHelpers:function(){var t=this.model.getVariations(),e=t?{price:t.superset().range("price"),sale_price:t.superset().range("sale_price"),regular_price:t.superset().range("regular_price"),product_variations:this.model.productVariations()}:{};return e.product_attributes=this.model.productAttributes(),e}});t.exports=l,o.prototype.set("POSApp.Products.Item",l)},function(t,e,i){var n=i(5),o=i(180),r=i(1),s=i(7),a=i(0),c=i(3),u=i(6),l=n.extend({template:s.compile(o),popover:{classes:"popover-theme-arrows popover-variations"},initialize:function(){this.collection=this.model.getVariations(),this.collection.resetFilters()},templateHelpers:function(){var t={};return t.variations=a.chain(this.model.productVariations()).each(function(t){var e;26*(e=t).options.length+5*e.options.reduce(function(t,e){return t+e.length},0)>220&&(t.select=!0,t.emptyOption=u.t("messages.choose"))}).value(),t},ui:{add:'*[data-action="add"]',btn:".btn-group .btn",select:"select"},triggers:{"click @ui.add":"add:to:cart"},events:{"click @ui.btn":"onVariationSelect","change @ui.select":"onVariationSelect"},onVariationSelect:function(t){var e=c(t.currentTarget);e.is("button")&&e.addClass("active").siblings(".btn").removeClass("active");var i=e.data("name"),n=e.val();this.collection.filterBy(i,function(t){return a.some(t.getVariationAttributes(),function(t){return t.name===i&&(void 0===t.option&&a.includes(t.options,n)||t.option===n||""===t.option)})}),this.ui.add.prop("disabled",1!==this.collection.length)}});t.exports=l,r.prototype.set("POSApp.Products.Variations",l)},function(t,e){t.exports='<div class="popover-body">\r\n{{#variations}}\r\n  <strong>{{name}}</strong>\r\n  {{#unless this.select}}\r\n    <div class="btn-group" data-toggle="buttons">\r\n    {{#each options}}\r\n      <button class="btn btn-default" value="{{this}}" data-name="{{../name}}">{{this}}</button>\r\n    {{/each}}\r\n    </div>\r\n  {{/unless}}\r\n  {{#if this.select}}\r\n    <select data-name="{{name}}">\r\n      <option value="">{{this.emptyOption}}</option>\r\n    {{#each options}}\r\n      <option value="{{this}}">{{this}}</option>\r\n    {{/each}}\r\n    </select>\r\n  {{/if}}\r\n{{/variations}}\r\n</div>\r\n<div class="popover-footer">\r\n  <button class="btn btn-success" data-action="add" disabled>Añadir</button>\r\n</div>\r\n'},function(t,e,i){var n=i(5),o=i(25),r=i(182),s=i(0),a=n.extend({tagName:"li",className:"empty",template:"pos.products.empty"});t.exports=o.extend({childView:r,emptyView:a,childViewContainer:"ul",initialize:function(t){t=t||{},this.collection=this.model.getVariations(),this.collection.resetFilters(),this.filterVariations(t.filter)},onShow:function(){this.$el.hide().slideDown(250)},filterVariations:function(t){if(t){t=t||{};this.collection.filterBy("variation",function(e){var i=e.getVariationAttributes();return s.any(i,function(e){return e.name===t.name&&void 0===e.option&&s.includes(e.options,t.option)||e.option===t.option||""===e.option})})}}})},function(t,e,i){var n=i(5),o=i(1),r=i(2),s=n.extend({template:"pos.products.product",className:"list-row",ui:{add:'a[data-action="add"]'},events:{"click @ui.add":"addToCart"},modelEvents:{"change:stock_quantity":"render"},addToCart:function(t){t.preventDefault(),r.request("router","add:to:cart",{model:this.model})},templateHelpers:function(){return{variation:!0,title:this.options.model.parent.get("title"),attributes:this.model.getVariationAttributes()}}});t.exports=s,o.prototype.set("POSApp.Products.Item.Drawer.Variation",s)},function(t,e,i){var n=i(5),o=i(1),r=i(0),s=n.extend({template:"pagination",collectionEvents:{"add remove paginated:change:page paginated:change:numPages reset":r.debounce(function(){this.isDestroyed||this.render()},10)},initialize:function(){this.listenTo(this.collection.superset(),{"end:fullSync":this.render})},templateHelpers:function(){var t=this.collection.superset().queue.length;return{showing:this.collection.length,local:this.collection.superset().length,queue:t,hasQueue:t>0}}});t.exports=s,o.prototype.set("Components.Pagination.View",s)},function(t,e,i){var n=i(11),o=i(185),r=i(186),s=i(190),a=i(191),c=i(192),u=i(26),l=i(0),h=i(1),d=i(13),p=i(6),f=i(2),g=n.extend({initialize:function(t){t=t||{},this.container=t.container,this.collection=t.collection,this.setTabLabel({tab:"right",label:p.t("titles.cart")})},fetch:function(){if(this.collection.isNew())return this.collection.fetch({silent:!0})},onFetch:function(t){this.order=this.collection.setActiveOrder(t),this.order&&(this.setTabLabel({tab:"right",label:this.tabLabel(this.order)}),this.listenTo(this.order,"change:total",function(t){this.setTabLabel({tab:"right",label:this.tabLabel(t)})}))},render:function(){this.layout=new o({order:this.order}),this.listenTo(this.layout,"show",this.onShow),this.container.show(this.layout)},onRender:function(){this.order&&!this.order.isEditable()&&this.navigate("receipt/"+this.order.id,{trigger:!0})},onShow:function(){if(!this.order)return this.noActiveOrder();this.showCart(),this.showTotals(),this.showCustomer(),this.showActions(),this.showNotes()},noActiveOrder:function(){var t=new r;this.layout.getRegion("list").show(t),l.invoke([this.layout.getRegion("totals"),this.layout.getRegion("customer"),this.layout.getRegion("actions"),this.layout.getRegion("note")],"empty")},showCart:function(){var t=new r({collection:this.order.cart});this.layout.getRegion("list").show(t)},showTotals:function(){var t=new s({model:this.order});this.on("discount:clicked",t.showDiscountRow),this.layout.getRegion("totals").show(t)},showCustomer:function(){var t=new c({model:this.order});this.layout.getRegion("customer").show(t)},showActions:function(){var t=new u({buttons:[{action:"void",className:"btn-danger pull-left"},{action:"fee",className:"btn-primary"},{action:"shipping",className:"btn-primary"},{action:"note",className:"btn-primary"},{action:"checkout",className:"btn-success"}]});this.listenTo(t,{"action:void":function(t,e){e.triggerMethod("disableButtons"),this.layout.getRegion("list").currentView.voidCart(this.order)},"action:note":function(){this.layout.getRegion("note").currentView.showNoteField()},"action:fee":function(){this.order.cart.addToCart({type:"fee",name:p.t("titles.fee")})},"action:shipping":function(){var t=f.request("entities","get",{type:"option",name:"shipping"}),e=l.keys(t);this.order.cart.addToCart({type:"shipping",method_title:p.t("titles.shipping"),method_id:l.first(e)||""})},"action:checkout":function(){this.navigate("checkout/"+this.order.id,{trigger:!0})}}),this.layout.getRegion("actions").show(t)},showNotes:function(){var t=new a({model:this.order});this.on("note:clicked",t.showNoteField),this.layout.getRegion("note").show(t)},tabLabel:function(t){var e=p.t("titles.cart"),i=t.get("total");return e+": "+d.formatMoney(i)}});t.exports=g,h.prototype.set("POSApp.Cart.Route",g)},function(t,e,i){var n=i(10);t.exports=n.extend({template:"pos.cart.panel",initialize:function(t){t=t||{},this.order=t.order},regions:{list:".cart-list",totals:".cart-totals",customer:".cart-customer",actions:".cart-actions",note:".cart-notes",footer:".cart-footer"},attributes:{class:"panel cart"},onShow:function(){this.$el.toggleClass("cart-empty",!this.order)}})},function(t,e,i){var n=i(5),o=i(25),r=i(187),s=i(1),a=i(6),c=n.extend({tagName:"li",className:"empty",template:function(){return a.t("messages.cart-empty")}}),u=o.extend({tagName:"ul",childView:r,emptyView:c,voidCart:function(t){this.children.each(function(e){e instanceof c?t.destroy():e.getRegion("item").currentView.removeItem()})}});t.exports=u,s.prototype.set("POSApp.Cart.Views.Items",u)},function(t,e,i){var n=i(10),o=i(188),r=i(189),s=i(3);s.fn.selectText=function(){var t,e=this[0];if(document.body.createTextRange)(t=document.body.createTextRange()).moveToElementText(e),t.select();else if(window.getSelection){var i=window.getSelection();(t=document.createRange()).selectNodeContents(e),i.removeAllRanges(),i.addRange(t)}},t.exports=n.extend({tagName:"li",className:function(){return this.model.get("type")},template:function(){return'<div class="list-item cart-item"></div><div class="list-drawer cart-drawer"></div>'},regions:{item:".list-item",drawer:".list-drawer"},modelEvents:{pulse:"pulse"},onRender:function(){var t=new o({model:this.model});this.listenTo(t,"drawer:open",this.openDrawer),this.listenTo(t,"drawer:close",this.closeDrawer),this.listenTo(t,"drawer:toggle",this.toggleDrawer),this.getRegion("item").show(t)},openDrawer:function(){var t=new r({model:this.model});this.getRegion("drawer").show(t),this.$el.addClass("drawer-open")},closeDrawer:function(){this.getRegion("drawer").empty(),this.$el.removeClass("drawer-open")},toggleDrawer:function(){this.getRegion("drawer").hasView()?this.closeDrawer():this.openDrawer()},pulse:function(t){if("remove"!==t){var e=this.$el,i=this.model.get("type");e.addClass("pulse-in").scrollIntoView({complete:function(){e.animate({backgroundColor:"transparent"},500,function(){s(this).removeClass("pulse-in").removeAttr("style"),"fee"!==i&&"shipping"!==i||s(".title strong",this).focus().selectText()})}})}}})},function(t,e,i){var n=i(17),o=i(13),r=i(4).Radio,s=i(112),a=i(115),c=i(0);t.exports=n.extend({template:"pos.cart.item",className:"list-row",initialize:function(){this.tax=r.request("entities","get",{type:"option",name:"tax"})||{}},templateHelpers:function(){var t=this.model.get("type");return{product:"shipping"!==t&&"fee"!==t}},behaviors:{AutoGrow:{behaviorClass:s},Numpad:{behaviorClass:a}},ui:{remove:'*[data-action="remove"]',more:'*[data-action="more"]',title:".title"},events:{"click @ui.remove":"removeItem","click @ui.title":"focusTitle"},triggers:{"click @ui.more":"drawer:toggle"},modelEvents:{"change:name":"save","change:method_title":"save"},bindings:{'input[name="quantity"]':{observe:"quantity",onGet:function(t){return o.formatNumber(t,"auto")},onSet:o.unformat},'*[data-name="title"]':{observe:"name",events:["blur"]},"dl.meta":{observe:"meta",updateMethod:"html",onGet:function(t){var e="";return c.each(t,function(t){e+="<dt>"+t.label+":</dt><dd>"+t.value+"</dd>"}),e}},'*[data-name="method_title"]':"method_title",'input[name="item_price"]':{observe:"item_price",onGet:o.formatNumber,onSet:o.unformat},".total":{observe:["total","subtotal","tax_class","taxable"],updateMethod:"html",onGet:function(t){"incl"===this.tax.tax_display_cart&&(t[0]=this.model.sum(["total","total_tax"]),t[1]=this.model.sum(["subtotal","subtotal_tax"]));var e=o.formatMoney(t[0]),i=o.formatMoney(t[1]);return e!==i?"<del>"+i+"</del> <ins>"+e+"</ins>":e}}},save:function(){this.model.save()},removeItem:function(t){t&&t.preventDefault();var e=this;this.ui.remove.attr("disabled","true"),this.$el.addClass("pulse-out").fadeOut(500,function(){e.model.destroy()})},focusTitle:function(){this.ui.title.find("strong").focus()}})},function(t,e,i){var n=i(17),o=i(13),r=i(112),s=i(115),a=i(3),c=i(0),u=i(4).Radio;t.exports=n.extend({template:"pos.cart.item-drawer",behaviors:{AutoGrow:{behaviorClass:r},Numpad:{behaviorClass:s}},ui:{addMeta:'*[data-action="add-meta"]',removeMeta:'*[data-action="remove-meta"]',metaLabel:'input[name="meta.label"]',metaValue:'textarea[name="meta.value"]'},events:{"click @ui.addMeta":"addMetaFields","click @ui.removeMeta":"removeMetaFields","blur @ui.metaLabel":"updateMeta","blur @ui.metaValue":"updateMeta"},modelEvents:{pulse:"pulse"},bindings:{'input[name="regular_price"]':{observe:"regular_price",onGet:o.formatNumber,onSet:o.unformat},'input[name="taxable"]':"taxable",'select[name="tax_class"]':{observe:"tax_class",selectOptions:{collection:function(){return u.request("entities","get",{type:"option",name:"tax_classes"})}},attributes:[{name:"disabled",observe:"taxable",onGet:function(t){return!t}}]},'select[name="method_id"]':{observe:"method_id",selectOptions:{collection:function(){return u.request("entities","get",{type:"option",name:"shipping"})},comparator:function(){}}}},onShow:function(){this.$el.hide().slideDown(250)},remove:function(){this.$el.slideUp(250,function(){n.prototype.remove.call(this)}.bind(this))},pulse:function(t){if("remove"===t)return this.$el.slideUp(250)},updateMeta:function(t){var e,i,n,o=a(t.target),r=o.attr("name").split("."),s=r[0],u=o.val(),l={},h=this;r.length>1&&"meta"===s&&(e=o.parent("span").data("key"),i=h.model.get("meta")||[],(n=(n=c.where(i,{key:e})).length>0?n[0]:{key:e})[r[1]]=u,i.push(n),u=c.uniq(i,"key")),l[s]=u,this.model.save(l)},addMetaFields:function(t){t.preventDefault();var e=a(t.currentTarget).prev("span").data("key");a('<span data-key="'+(e?e+1:1)+'" />').append('<input class="form-control" type="text" name="meta.label"><textarea class="form-control" name="meta.value"></textarea><a href="#" data-action="remove-meta"><i class="icon-remove icon-lg"></i></a>').insertBefore(a(t.currentTarget))},removeMetaFields:function(t){t.preventDefault();var e=a(t.currentTarget).parent("span"),i=this.model.get("meta")||[],n=c.findIndex(i,{key:e.data("key")});n>=0&&(i.splice(n,1),this.model.save({meta:i}),this.model.trigger("change:meta")),e.remove()}})},function(t,e,i){var n=i(17),o=i(2);t.exports=n.extend({tagName:"ul",template:"pos.cart.totals",initialize:function(){this.tax=o.request("entities","get",{type:"option",name:"tax"})||{}},modelEvents:{change:"render"},templateHelpers:function(){var t={itemized:"itemized"===this.tax.tax_total_display,has_discount:0!==this.model.get("cart_discount")};return"incl"===this.tax.tax_display_cart&&(t.subtotal=this.model.sum(["subtotal","subtotal_tax"]),t.cart_discount=this.model.sum(["cart_discount","cart_discount_tax"]),t.incl_tax=!0),t}})},function(t,e,i){var n=i(5),o=i(0);t.exports=n.extend({template:o.template("<%= note %>"),modelEvents:{"change:note":"render"},events:{click:"edit",keypress:"saveOnEnter",blur:"save"},onShow:function(){this.showOrHide()},showOrHide:function(){""===this.model.get("note")&&this.$el.hide()},edit:function(){this.$el.attr("contenteditable","true").focus()},save:function(){var t=this.$el.text();this.model.save({note:t}),this.$el.attr("contenteditable","false"),this.showOrHide()},saveOnEnter:function(t){13===t.which&&(t.preventDefault(),this.$el.blur())},showNoteField:function(){this.$el.show(),this.$el.attr("contenteditable","true").focus()}})},function(t,e,i){var n=i(5),o=i(1),r=i(0),s=i(2),a=i(193),c=i(89),u=i(9);n=n.extend({template:"pos.cart.customer",className:"list-row",initialize:function(){this.customers=s.request("entities","get",{type:"filtered",name:"customers",perPage:10}),this.mergeOptions({guest:this.customers.superset().getGuestCustomer()},["guest"]),this.listenTo(this.customers.superset(),"modal:save",this.onModalSave),r.bindAll(this,"dropdownContent")},behaviors:{Dropdown:{behaviorClass:c}},ui:{searchField:"input",removeCustomer:'*[data-action="remove"]'},events:{"input @ui.searchField":"query","click @ui.removeCustomer":"removeCustomer"},query:function(){var t=this.ui.searchField.val();this._query(t)},_query:r.debounce(function(t){this.customers.query(t).firstPage()},149),modelEvents:{"change:customer":"render"},dropdownContent:function(t){return this.customersRegion=new u.Region({el:t.content}),this.listenTo(this.customers,"reset",function(){t.position.call(t)}),this.listenTo(this.customersRegion,"show",function(){t.position.call(t)}),""},onDropdownOpen:function(){var t=new a({collection:this.customers,filter:this.$("input").val()});this.listenTo(t,"childview:customer:selected",function(t){this.saveCustomer(t.model.toJSON())}),this.customersRegion.show(t)},onDropdownClose:function(){this.customersRegion.empty()},onTargetKeydown:function(t){this.customersRegion.currentView.moveFocus(t.which)},removeCustomer:function(){this.saveCustomer(this.getOption("guest"))},saveCustomer:function(t){this.model.unset("customer",{silent:!0}),this.model.save({customer_id:t.id,customer:t})}});t.exports=n,o.prototype.set("POSApp.Cart.Views.Customer",n)},function(t,e,i){var n=i(5),o=i(124),r=i(6),s=i(194),a=i(7),c=i(0),u=n.extend({template:a.compile(s),tagName:"li",triggers:{click:"customer:selected"},addFocus:function(){this.$el.addClass("focus").scrollIntoView()},removeFocus:function(){this.$el.removeClass("focus")},hasFocus:function(){return this.$el.hasClass("focus")}}),l=n.extend({tagName:"li",className:"empty",template:function(){return r.t("messages.no-customer")}}),h=o.extend({childView:u,emptyView:l,childViewContainer:"ul",className:"list-infinite dropdown-list",initialize:function(t){t=t||{};var e=this.collection,i=this.collection.superset();if(i.isNew())return i.fetch().then(function(){i.fullSync()});e.query(t.filter)},childEvents:{focus:"onChildFocus"},onChildFocus:function(){this.children.each(function(t){t.removeFocus()})},moveFocus:function(t){40===t&&this.moveFocusDown(),38===t&&this.moveFocusUp(),13===t&&this.getFocusedChild().trigger("customer:selected")},moveFocusDown:function(){var t,e,i=this.getFocusedChild();if(!i)return this.children.first().addFocus();c.each(this.children._views,function(n){t&&(e=n,t=!1),t=n===i}),e&&(i.removeFocus(),e.addFocus())},moveFocusUp:function(){var t,e,i=this.getFocusedChild();if(!i)return this.children.last().addFocus();c.eachRight(this.children._views,function(n){t&&(e=n,t=!1),t=n===i}),e&&(i.removeFocus(),e.addFocus())},getFocusedChild:function(){return this.children.find(function(t){return t.hasFocus()})}});t.exports=h},function(t,e){t.exports="<strong>{{formatCustomerName this}}</strong>\r\n<small>#{{id}}{{#if email}} - {{email}}{{/if}}</small>"},function(t,e,i){var n=i(11),o=i(1),r=i(196),s=i(197),a=i(199),c=i(6),u=i(2),l=n.extend({initialize:function(t){t=t||{},this.container=t.container,this.collection=t.collection,this.setTabLabel({tab:"right",label:c.t("titles.checkout")})},fetch:function(){if(this.collection.isNew())return this.collection.fetch()},onFetch:function(t){this.order=this.collection.setActiveOrder(t),this.order&&this.listenTo(this.order,"change:status",function(t){t.isEditable()||"failed"===t.get("status")||this.navigate("receipt/"+t.id,{trigger:!0})})},render:function(){this.layout=new r,this.listenTo(this.layout,"show",function(){this.showStatus(),this.showGateways(),this.showActions()}),this.container.show(this.layout)},onRender:function(){this.order&&!this.order.isEditable()&&this.navigate("receipt/"+this.order.id,{trigger:!0})},showStatus:function(){var t=new s({model:this.order});this.layout.getRegion("status").show(t)},showGateways:function(){this.order.gateways.order=this.order;var t=new a({collection:this.order.gateways});this.layout.getRegion("list").show(t)},showActions:function(){var t=u.request("buttons","view",{buttons:[{action:"return-to-sale",className:"btn pull-left"},{action:"process-payment",className:"btn btn-success",icon:"prepend"}]});this.listenTo(t,{"action:return-to-sale":function(){this.navigate("cart/"+this.order.id,{trigger:!0})},"action:process-payment":function(t){t.trigger("state","loading"),this.order.process().always(function(){t.trigger("state","reset")})}}),this.layout.getRegion("actions").show(t)}});t.exports=l,o.prototype.set("POSApp.Checkout.Route",l)},function(t,e,i){var n=i(10),o=i(1),r=i(7),s=n.extend({initialize:function(){this.template=r.compile('<div class="panel-header checkout-status"></div><div class="panel-body list checkout-list"></div><div class="list-actions checkout-actions"></div>')},regions:{status:".checkout-status",list:".checkout-list",actions:".checkout-actions"},attributes:{class:"panel checkout"}});t.exports=s,o.prototype.set("POSApp.Checkout.Views.Layout",s)},function(t,e,i){var n=i(5),o=i(1),r=i(7),s=i(6),a=i(198),c=i(0),u=n.extend({template:r.compile(a),initialize:function(){},templateHelpers:function(){return{status:this.getStatus(),message:this.getMessage()}},modelEvents:{"change:payment_details":"render"},getStatus:function(){return!1===this.model.get("payment_details.paid")?(this.$el.addClass("fail"),s.t("titles.unpaid")):s.t("titles.to-pay")},getMessage:function(){var t=this.model.get("payment_details.message");return c.isArray(t)?c.last(t):t}});t.exports=u,o.prototype.set("POSApp.Checkout.Views.Status",u)},function(t,e){t.exports="<h4>{{status}}: {{{money total}}}</h4>\r\n{{#if message}}\r\n  <p>{{{message}}}</p>\r\n{{/if}}"},function(t,e,i){var n=i(5),o=i(25),r=i(200),s=i(1),a=i(6),c=n.extend({tagName:"li",className:"empty",template:function(){return a.t("messages.no-gateway")}}),u=o.extend({tagName:"ul",childView:r,emptyView:c});t.exports=u,s.prototype.set("POSApp.Checkout.Views.Gateways",u)},function(t,e,i){var n=i(10),o=i(201),r=i(202);t.exports=n.extend({tagName:"li",template:function(){return'<div class="gateway"></div><div class="drawer"></div>'},regions:{gatewayRegion:".gateway",drawerRegion:".drawer"},initialize:function(){this.listenTo(this.model,"change:active",this.toggleDrawer)},onRender:function(){var t=new o({model:this.model});this.gatewayRegion.show(t)},onShow:function(){this.model.get("active")&&this.openDrawer()},openDrawer:function(){var t=new r({model:this.model});this.drawerRegion.show(t),this.$el.addClass("active")},closeDrawer:function(){this.drawerRegion.empty(),this.$el.removeClass("active")},toggleDrawer:function(){this.drawerRegion.hasView()?this.closeDrawer():this.openDrawer()}})},function(t,e,i){var n=i(5),o=i(7);t.exports=n.extend({tagName:"h5",template:o.compile('{{method_title}}{{#if icon}}<img src="{{icon}}">{{/if}}'),events:{click:"makeActive"},makeActive:function(){this.model.set({active:!0})}})},function(t,e,i){var n=i(17),o=i(3),r=i(0),s=i(115),a=i(13),c=i(6);t.exports=n.extend({initialize:function(){this.template="pos.checkout.gateways."+this.model.id,this.order_total=this.model.collection.order.get("total"),this.updateStatusMessage()},templateHelpers:function(){return{total:this.order_total}},behaviors:{Numpad:{behaviorClass:s}},modelEvents:{"change:message":"updateStatusMessage"},onRender:function(){var t=this;return"pos_cash"===this.model.id?this.posCashRender():"pos_card"===this.model.id?this.posCardRender():void this.$("input, select, textarea").each(function(){var e=o(this).attr("name"),i=o(this).attr("id"),n=o(this).data();if(e)return t.addBinding(null,'*[name="'+e+'"]',e);if(i)return t.addBinding(null,"#"+i,i);if(1===r.size(n)){var s=Object.keys(n)[0];return t.addBinding(null,"*[data-"+s+'="'+n[s]+'"]',n[s])}})},posCashRender:function(){this.addBinding(null,{"#pos-cash-tendered":{observe:"pos-cash-tendered",onGet:function(t){return this.calcChange(t),a.formatNumber(t)},onSet:function(t){var e=a.unformat(t);return this.calcChange(e),e},initialize:function(t,e){e.get("pos-cash-tendered")||e.set({"pos-cash-tendered":this.order_total})}}})},posCardRender:function(){this.addBinding(null,{"#pos-cashback":{observe:"pos-cashback",onGet:a.formatNumber,onSet:a.unformat}})},onShow:function(){this.$el.hide().slideDown(250),window.Modernizr.touch&&(this.$("#pos-cash-tendered").attr("readonly",!0),this.$("#pos-cashback").attr("readonly",!0))},remove:function(){this.$el.slideUp(250,function(){n.prototype.remove.call(this)}.bind(this))},calcChange:function(t){var e=t-this.order_total,i=c.t("titles.change")+": "+a.formatMoney(e);this.model.set({message:i,"pos-cash-change":e})},updateStatusMessage:function(){this.model.collection.order.set({"payment_details.message":this.model.get("message")})}})},function(t,e,i){var n=i(11),o=i(2),r=i(1),s=i(204),a=i(205),c=i(207),u=i(208),l=i(209),h=i(6),d=i(26),p=i(3),f=n.extend({initialize:function(t){t=t||{},this.container=t.container,this.collection=t.collection,this.autoPrint=t.autoPrint,this.setTabLabel({tab:"right",label:h.t("titles.receipt")}),this.tax=o.request("entities","get",{type:"option",name:"tax"})||{}},fetch:function(){if(this.collection.isNew())return this.collection.fetch()},onFetch:function(t){this.order=this.collection.get(t),this.order.clearCart();var e=this.order.get("payment_details.redirect");e&&""!==e&&window.open(e,"_blank"),o.request("entities","get",{type:"collection",name:"products"}).fetchUpdated()},render:function(){this.layout=new s({model:this.order}),this.listenTo(this.layout,"show",function(){this.showStatus(),this.showItems(),this.showTotals(),this.showActions(),this.autoPrint&&this.print()}),this.container.show(this.layout)},showStatus:function(){var t=new a({model:this.order});this.layout.getRegion("status").show(t)},showItems:function(){var t=new c({model:this.order});this.layout.getRegion("list").show(t)},showTotals:function(){var t=new u({model:this.order});this.layout.getRegion("totals").show(t)},showActions:function(){var t=new d({buttons:[{action:"print",className:"btn-primary pull-left"},{action:"email",className:"btn-primary pull-left"},{action:"new-order",className:"btn-success"}]});this.listenTo(t,{"action:print":this.print,"action:email":this.email,"action:new-order":function(){this.navigate("",{trigger:!0})}}),this.layout.getRegion("actions").show(t)},print:function(){o.request("print","print",{template:"receipt",model:this.order})},email:function(){var t=this,e=new l({order_id:this.order.get("id"),email:this.order.get("customer.email")});o.request("modal","open",e).then(function(e){var i=e.view.getButtons();t.listenTo(i,"action:send",function(i,n){var o=e.view.getRegion("content").currentView.getEmail();t.send(i,n,o)})})},send:function(t,e,i){var n=this.order.get("id"),r=o.request("entities","get",{type:"option",name:"ajaxurl"});t.trigger("state",["loading",""]),p.getJSON(r,{action:"wc_pos_email_receipt",order_id:n,email:i}).done(function(e){"success"===e.result?t.trigger("state",["success",e.message]):t.trigger("state",["error",e.message])}).fail(function(e){var i=null;e.responseJSON&&e.responseJSON.errors&&(i=e.responseJSON.errors[0].message),t.trigger("state",["error",i])})}});t.exports=f,r.prototype.set("POSApp.Receipt.Route",f)},function(t,e,i){var n=i(10);t.exports=n.extend({template:"pos.receipt.panel",regions:{status:".receipt-status",list:".receipt-list",totals:".receipt-totals",actions:".receipt-actions"},className:function(){return"panel receipt "+this.model.get("status")}})},function(t,e,i){var n=i(5),o=i(1),r=i(7),s=i(6),a=i(206),c=i(0),u=n.extend({template:r.compile(a),className:function(){return this.model.get("payment_details.paid")?"paid":"unpaid"},initialize:function(){var t=this.model.get("payment_details.paid")?"paid":"unpaid";this.status=s.t("titles."+t);var e=this.model.get("payment_details.message");c.isArray(e)?this.message=c.last(e):this.message=e},templateHelpers:function(){return{status:this.status,message:this.message}}});t.exports=u,o.prototype.set("POSApp.Receipt.Views.Status",u)},function(t,e){t.exports="<h4>{{status}}: {{{money total}}}</h4>\r\n{{#if message}}\r\n  <p>{{{message}}}</p>\r\n{{/if}}"},function(t,e,i){var n=i(116),o=i(1),r=n.extend({tagName:"ul",template:"pos.receipt.items"});t.exports=r,o.prototype.set("POSApp.Receipt.Views.Items",r)},function(t,e,i){var n=i(116),o=i(1),r=n.extend({tagName:"ul",template:"pos.receipt.totals"});t.exports=r,o.prototype.set("POSApp.Receipt.Views.Totals",r)},function(t,e,i){var n=i(5),o=i(1),r=i(7),s=i(6),a=i(210),c=n.extend({template:r.compile(a),viewOptions:["email"],initialize:function(t){this.mergeOptions(t,this.viewOptions),this.modal={header:{title:s.t("titles.email-receipt")},footer:{buttons:[{type:"message"},{action:"send",className:"btn-success",icon:"prepend"}]}}},ui:{email:"input"},templateHelpers:function(){return{email:this.email}},getEmail:function(){return this.ui.email.val()||this.email}});t.exports=c,o.prototype.set("POSApp.Receipt.Views.Email",c)},function(t,e){t.exports='<div class="input-group">\r\n  <span class="input-group-addon">@</span>\r\n  <input type="text" class="form-control" placeholder="{{email}}">\r\n</div>'},function(t,e,i){var n=i(39),o=i(212),r=i(213),s=i(216),a=i(2),c=i(14),u=i(3);t.exports=n.extend({routes:{support:"showStatus"},initialize:function(t){this.container=t.container,this.collection=new c},onBeforeEnter:function(){this.layout=new o,this.container.show(this.layout),this.updateTitle(),this.showForm()},updateTitle:function(){var t=u("#menu li.support").text();a.request("header","update:title",t)},showForm:function(){new r({container:this.layout.getRegion("left")}).enter()},showStatus:function(){return new s({container:this.layout.getRegion("right"),collection:this.collection})}})},function(t,e,i){var n=i(10);t.exports=n.extend({columns:2,template:function(){return'<section id="left"></section><section id="right"></section>'},regions:{left:"#left",right:"#right"}})},function(t,e,i){var n=i(11),o=i(1),r=i(214),s=i(215),a=i(3),c=i(2),u=i(26),l=i(0),h=i(6),d=n.extend({initialize:function(t){this.container=t.container,this.setTabLabel({tab:"left",label:h.t("titles.support-form")})},fetch:function(){},render:function(){this.layout=new r,this.listenTo(this.layout,"show",function(){this.showForm(),this.showActions()}),this.container.show(this.layout)},showForm:function(){var t=new s;this.layout.getRegion("form").show(t)},showActions:function(){var t=new u({buttons:[{type:"message"},{action:"send",className:"btn-success",icon:"prepend"}]});this.listenTo(t,"action:send",this.email),this.layout.getRegion("actions").show(t)},email:function(t,e){var i=this.layout.getRegion("form").currentView,n={action:"wc_pos_send_support_email",name:i.$('[data-name="name"]').text(),email:i.$('[data-name="email"]').text(),message:i.$('[data-name="message"]').text(),status:i.$("#pos_status").val()},o=c.request("entities","get",{type:"option",name:"ajaxurl"});t.trigger("state","loading"),e.triggerMethod("message","reset");var r=function(i){t.trigger("state","error"),e.triggerMethod("message",i,"error")};a.post(o,n).done(function(i){if(!l.isObject(i)||"success"!==i.result)return r(i.message);t.trigger("state","success"),e.triggerMethod("message",i.message,"success")}).fail(r)}});t.exports=d,o.prototype.set("SupportApp.Form.Route",d)},function(t,e,i){var n=i(10),o=i(1),r=i(6),s=n.extend({template:function(){return'<div class="panel-header support-header"><div><h4>'+r.t("titles.support-form")+'</h4></div></div><div class="panel-body list support-list"></div><div class="list-actions support-actions"></div>'},regions:{header:".support-header",form:".support-list",actions:".support-actions"},attributes:{class:"panel support"}});t.exports=s,o.prototype.set("SupportApp.Views.Layout",s)},function(t,e,i){var n=i(5),o=i(3);t.exports=n.extend({tagName:"ul",template:"support.form",ui:{toggle:".toggle",status:"#pos_status",message:'div[data-name="message"]'},events:{"click @ui.toggle":"toggleReport","focusout @ui.message":"focusout"},onRender:function(){this.ui.status.append("\n*** Browser Info ***\n\n"+navigator.userAgent+"; "+o("html").attr("class")+"\n\n")},toggleReport:function(t){t.preventDefault(),o(t.currentTarget).next("textarea").toggle()},focusout:function(t){var e=o(t.target);e.text().replace(" ","").length||e.empty()}})},function(t,e,i){var n=i(11),o=i(1),r=i(217),s=i(218),a=i(3),c=i(0),u=i(2),l=i(6),h=n.extend({databases:["products","orders","cart","customers"],initialize:function(t){this.container=t.container,this.collection=t.collection,this.setTabLabel({tab:"right",label:l.t("titles.system-status")})},fetch:function(){var t=c.map(this.databases,this.fetchDB,this);return a.when.apply(a,t)},_fetch:function(){},render:function(){this.layout=new r,this.listenTo(this.layout,"show",function(){this.showStatus()}),this.container.show(this.layout)},showStatus:function(){var t=new s({storage:this.storageStatus()});this.listenTo(t,{"action:clear":this.clearDB}),this.layout.getRegion("status").show(t)},storageStatus:function(){return c.map(this.databases,function(t){var e=l.t("titles."+t),i=this[t].length;return{message:e+": "+i+" "+l.t("plural.records",i),button:{action:"clear-"+t,label:"Clear"}}},this)},fetchDB:function(t){if(this[t]=u.request("entities","get",{type:"collection",name:t}),this[t].isNew())return this[t].fetch()},clearDB:function(t){var e=this[t],i=this;e.clear().then(function(){i.render()})}});t.exports=h,o.prototype.set("SupportApp.Status.Route",h)},function(t,e,i){var n=i(10),o=i(1),r=i(6),s=n.extend({template:function(){return'<div class="panel-header status-header"><div><h4>'+r.t("titles.system-status")+'</h4></div></div><div class="panel-body list status-list"></div>'},regions:{header:".status-header",status:".status-list"},attributes:{class:"panel status"}});t.exports=s,o.prototype.set("SupportApp.Views.Layout",s)},function(t,e,i){var n=i(5),o=i(3),r=i(40),s=i(219),a=i(7);t.exports=n.extend({tagName:"ul",template:"support.status",ui:{toggle:".toggle",btn:".btn",subHeading:".sub-heading"},events:{"click @ui.toggle":"toggleReport","click @ui.btn":"buttonClick"},behaviors:{EmulateHTTP:{behaviorClass:r}},onRender:function(){var t=a.compile(s)({storage:this.options.storage});this.ui.subHeading.after(t)},toggleReport:function(t){t.preventDefault(),o(t.currentTarget).next("textarea").toggle()},buttonClick:function(t){var e=o(t.target).data("action").split("-"),i=e.shift();i&&(t.preventDefault(),this.trigger("action:"+i,e[0]))}})},function(t,e){t.exports='{{#each storage}}\r\n<li class="list-row">\r\n  {{#if icon}}\r\n  <div class="shrink">\r\n    <i class="icon-{{icon}} icon-lg"></i>\r\n  </div>\r\n  {{/if}}\r\n  {{#if title}}\r\n  <div class="title">{{title}}</div>\r\n  {{/if}}\r\n  <div class="message">\r\n    {{{message}}}\r\n    {{#if button}}\r\n      <button class="btn btn-default" data-action="{{button.action}}">{{button.label}}</button>\r\n    {{/if}}\r\n  </div>\r\n</li>\r\n{{/each}}'},function(t,e,i){var n=i(1),o=i(39),r=i(221),s=i(222),a=i(2),c=o.extend({routes:{"print(/:id)(/)":"showReceipt"},initialize:function(t){this.container=t.container},onBeforeEnter:function(){this.layout=new r,this.container.show(this.layout)},onBeforeRoute:function(){this.showActions()},showReceipt:function(){return new s({container:this.layout.getRegion("iframe")})},showActions:function(){var t=a.request("buttons","view",{buttons:[{action:"print",className:"btn-success"}]});this.listenTo(t,"action:print",function(){this.layout.getRegion("iframe").currentView.print()}),this.layout.getRegion("actions").show(t)}});t.exports=c,n.prototype.set("Print.Router",c)},function(t,e,i){var n=i(10);t.exports=n.extend({tagName:"section",className:"panel print-preview",template:function(){return'<div class="panel-body print-preview-iframe"></div><div class="print-preview-actions"></div>'},regions:{iframe:".print-preview-iframe",actions:".print-preview-actions"}})},function(t,e,i){var n=i(11),o=i(2),r=i(223),s=n.extend({initialize:function(t){t=t||{},this.container=t.container,this.collection=o.request("entities","get",{name:"orders",type:"collection"})},fetch:function(){if(0===this.collection.length)return this.collection.fetch({remote:!0})},render:function(){var t=new r({model:this.collection.at(0)});this.container.show(t)}});t.exports=s},function(t,e,i){var n=i(116),o=i(7);t.exports=n.extend({tagName:"iframe",template:function(){},onShow:function(){var t=o.compile(o.Templates.print.receipt);this.window=this.el.contentWindow,this.window.document.write(t(this.data))},print:function(){this.window.focus(),this.window.print()}})}]);